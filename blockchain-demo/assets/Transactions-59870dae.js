import{r as c,R as w,f as l,g as Ge,h as E,i as Je,u as Ce,j as s,C as B,a as y,F as D,T as F,b as g,k as Qe,c as G,d as he,t as ge,e as Xe}from"./index-58d269b7.js";import{u as Ye,A as Q}from"./Input-fefd95bf.js";import{a as er,u as rr,S as ye}from"./Select-5a3f7c5a.js";import{T as tr}from"./TextInput-0798ffa9.js";import{B as nr}from"./Button-9f4bfd0e.js";function J(e,t,n){return Math.min(Math.max(e,t),n)}function we(){if(typeof window>"u")return"undetermined";const{userAgent:e}=window.navigator,t=/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i,n=/(Win32)|(Win64)|(Windows)|(WinCE)/i,i=/(iPhone)|(iPad)|(iPod)/i;return t.test(e)?"macos":i.test(e)?"ios":n.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function or(e={getValueInEffect:!0}){const[t,n]=c.useState(e.getValueInEffect?"undetermined":we());return Ye(()=>{e.getValueInEffect&&n(we)},[]),t}const ar=(e,t,n)=>Number.isInteger(e)&&e>=0&&t===0?"numeric":!Number.isInteger(e)&&e>=0&&t!==0?"decimal":Number.isInteger(e)&&e<0&&t===0||!Number.isInteger(e)&&e<0&&t!==0?n==="ios"?"text":"decimal":"numeric";function be({direction:e,size:t}){return w.createElement("svg",{style:{transform:e==="up"?"rotate(180deg)":void 0},width:l(t),height:l(t),viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},w.createElement("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"}))}const Ie={xs:l(20),sm:l(24),md:l(30),lg:l(34),xl:l(36)};var sr=Ge((e,{radius:t},{size:n})=>({rightSection:{display:"flex",flexDirection:"column",height:`calc(100% - ${l(2)})`,margin:l(1),overflow:"hidden",borderTopRightRadius:e.fn.radius(t),borderBottomRightRadius:e.fn.radius(t)},control:{margin:0,position:"relative",flex:"0 0 50%",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",width:E({size:n,sizes:Ie}),padding:0,WebkitTapHighlightColor:"transparent",borderBottom:`${l(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderLeft:`${l(1)} solid ${e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[4]}`,borderTop:0,borderRight:0,backgroundColor:"transparent",marginRight:l(1),color:e.colorScheme==="dark"?e.colors.dark[0]:e.black,"&:not(:disabled):hover":{backgroundColor:e.colorScheme==="dark"?e.colors.dark[5]:e.colors.gray[0]},"&:disabled":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[4]}},controlUp:{},controlDown:{borderBottom:0}}));const ir=sr;var lr=Object.defineProperty,cr=Object.defineProperties,ur=Object.getOwnPropertyDescriptors,M=Object.getOwnPropertySymbols,ke=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,ve=(e,t,n)=>t in e?lr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dr=(e,t)=>{for(var n in t||(t={}))ke.call(t,n)&&ve(e,n,t[n]);if(M)for(var n of M(t))Pe.call(t,n)&&ve(e,n,t[n]);return e},fr=(e,t)=>cr(e,ur(t)),pr=(e,t)=>{var n={};for(var i in e)ke.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&M)for(var i of M(e))t.indexOf(i)<0&&Pe.call(e,i)&&(n[i]=e[i]);return n};const mr=e=>e||"",hr=e=>{if(e==="-")return e;let t=e;t[0]==="."&&(t=`0${e}`);const n=parseFloat(t);return Number.isNaN(n)?"":e},Se={xs:l(10),sm:l(14),md:l(16),lg:l(18),xl:l(20)},gr={step:1,hideControls:!1,size:"sm",precision:0,noClampOnBlur:!1,removeTrailingZeros:!1,decimalSeparator:".",formatter:mr,parser:hr,type:"text"},Te=c.forwardRef((e,t)=>{const n=Je("NumberInput",gr,e),{readOnly:i,disabled:C,value:d,onChange:f,decimalSeparator:p,thousandsSeparator:$,min:m,max:b,startValue:v,step:S,stepHoldInterval:I,stepHoldDelay:a,onFocus:u,onBlur:k,onKeyDown:X,onKeyUp:Y,hideControls:_e,radius:ee,variant:U,precision:V,removeTrailingZeros:Re,defaultValue:re,noClampOnBlur:Ne,handlersRef:$e,classNames:te,styles:ne,size:P,rightSection:Ve,rightSectionWidth:oe,formatter:Ae,parser:Oe,inputMode:Ee,unstyled:ae,type:Be}=n,De=pr(n,["readOnly","disabled","value","onChange","decimalSeparator","thousandsSeparator","min","max","startValue","step","stepHoldInterval","stepHoldDelay","onFocus","onBlur","onKeyDown","onKeyUp","hideControls","radius","variant","precision","removeTrailingZeros","defaultValue","noClampOnBlur","handlersRef","classNames","styles","size","rightSection","rightSectionWidth","formatter","parser","inputMode","unstyled","type"]),{classes:T,cx:se}=ir({radius:ee},{classNames:te,styles:ne,unstyled:ae,name:"NumberInput",variant:U,size:P}),A=r=>{if(r==="")return"";let o=r.toFixed(V);return Re&&V>0&&(o=o.replace(new RegExp(`[0]{0,${V}}$`),""),o.endsWith(".")&&(o=o.slice(0,-1))),o},Fe=r=>{let o=r;return p&&(o=o.replace(".",p)),Ae(o)},Me=r=>{let o=r;return p&&(o=o.replaceAll($,"").replace(p,".")),Oe(o)},ie=r=>Fe(A(r)),[h,Ue]=c.useState(typeof d=="number"?d:typeof re=="number"?re:""),[le,ce]=c.useState(()=>ie(h)),ue=c.useRef(),[z,de]=c.useState(!1),_=(r,o)=>{if(!z||o){const N=ie(r);N!==le&&ce(N)}r!==h&&Ue(r)},L=typeof m=="number"?m:-1/0,j=typeof b=="number"?b:1/0,K=c.useRef();K.current=()=>{var r;let o;h===""?o=(r=v??m)!=null?r:0:o=parseFloat(A(J(h+S,L,j))),_(o,!0),f==null||f(o)};const W=c.useRef();W.current=()=>{var r;let o;h===""?o=(r=v??m)!=null?r:0:o=parseFloat(A(J(h-S,L,j))),_(o,!0),f==null||f(o)},er($e,{increment:K.current,decrement:W.current}),c.useEffect(()=>{z||_(d===void 0?h:d,!0)},[d,z]);const H=a!==void 0&&I!==void 0,R=c.useRef(null),Z=c.useRef(0),x=()=>{R.current&&window.clearTimeout(R.current),R.current=null,Z.current=0},fe=r=>{r?K.current():W.current(),Z.current+=1},pe=r=>{if(fe(r),H){const o=typeof I=="number"?I:I(Z.current);R.current=window.setTimeout(()=>pe(r),o)}},O=(r,o)=>{r.preventDefault(),ue.current.focus(),fe(o),H&&(R.current=window.setTimeout(()=>pe(o),a))};c.useEffect(()=>(x(),x),[]);const ze=w.createElement("div",{className:T.rightSection},w.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:h>=b,className:se(T.control,T.controlUp),onPointerDown:r=>{O(r,!0)},onPointerUp:x,onPointerLeave:x},w.createElement(be,{size:E({size:P,sizes:Se}),direction:"up"})),w.createElement("button",{type:"button",tabIndex:-1,"aria-hidden":!0,disabled:h<=m,className:se(T.control,T.controlDown),onPointerDown:r=>{O(r,!1)},onPointerUp:x,onPointerLeave:x},w.createElement(be,{size:E({size:P,sizes:Se}),direction:"down"}))),Le=r=>{let o=r;(o[0]===`${p}`||o[0]===".")&&(o=`0${o}`);const N=parseFloat(A(parseFloat(Me(o)))),me=Ne?N:J(N,L,j),q=Number.isNaN(me)?"":me,qe=h!==q;ce(r),_(q),qe&&(f==null||f(q))},je=r=>{r.nativeEvent.isComposing||Le(r.target.value)},Ke=r=>{de(!0),u==null||u(r)},We=r=>{de(!1),k==null||k(r)},He=r=>{if(typeof X=="function"&&X(r),r.repeat&&H&&(r.key==="ArrowUp"||r.key==="ArrowDown")){r.preventDefault();return}i||(r.key==="ArrowUp"?O(r,!0):r.key==="ArrowDown"&&O(r,!1))},Ze=r=>{typeof Y=="function"&&Y(r),(r.key==="ArrowUp"||r.key==="ArrowDown")&&x()};return w.createElement(tr,fr(dr({},De),{type:Be,variant:U,value:le,disabled:C,readOnly:i,ref:rr(ue,t),onChange:je,onFocus:Ke,onBlur:We,onKeyDown:He,onKeyUp:Ze,rightSection:Ve||(C||i||_e||U==="unstyled"?null:ze),rightSectionWidth:oe??`calc(${E({size:P,sizes:Ie})} + ${l(1)})`,radius:ee,max:b,min:m,step:S,size:P,styles:ne,classNames:te,inputMode:Ee||ar(S,V,or()),__staticSelector:"NumberInput",unstyled:ae}))});Te.displayName="@mantine/core/NumberInput";function xe({transaction:e,index:t}){const n=Ce();return s(B,{withBorder:!0,children:y(D,{direction:"column",gap:"xs",children:[s(F,{order:3,children:`Transaction ${t}`}),s(g,{truncate:!0,children:`Timestamp: ${e.timestamp}`}),y(g,{children:[y(g,{truncate:!0,children:["From: ",s(Q,{onClick:()=>n(`/wallets/${e.fromAddress}`),children:e.fromAddress})]}),y(g,{truncate:!0,children:["To: ",s(Q,{onClick:()=>n(`/wallets/${e.toAddress}`),children:e.toAddress})]}),s(g,{truncate:!0,children:`Amount: ${e.amount}`})]}),s(g,{truncate:!0,children:`Signature: ${e.signature}`})]})})}function xr(){const e=Qe(),t=Ce(),n=e.id?parseInt(e.id):void 0,i=G(a=>a.blockchain),C=G(a=>a.wallets),d=n!==void 0?i.chain[n]:void 0,f=n===i.chain.length,[p,$]=c.useState(""),[m,b]=c.useState(""),[v,S]=c.useState(0),I=()=>{if(!p||!m)return;const a=C.filter(k=>k.keys.public===p)[0];if(!a)return;const u=ge.create(p,m,v);ge.sign(u,a.keys.private),G.setState(k=>{Xe.addTransaction(k.blockchain,u)}),$(""),b(""),S(0)};return y(he,{children:[!f&&d&&s(B,{withBorder:!0,children:y(D,{direction:"column",gap:"xs",children:[s(F,{order:3,children:`Block ${n}`}),s(g,{truncate:!0,children:`Transactions: ${d.transactions.length}`}),d.transactions.map((a,u)=>s(xe,{transaction:a,index:u},a.signature))]})}),!f&&!d&&s(he,{children:i.chain.map((a,u)=>s(B,{withBorder:!0,children:y(D,{direction:"column",gap:"xs",children:[s(F,{order:3,children:`Block ${u}`}),y(g,{truncate:!0,children:[`Transactions: ${a.transactions.length} `,s(Q,{onClick:()=>t(`/transactions/${u}`),children:"See Transactions..."})]})]})},a.hash))}),(f||!d)&&s(B,{withBorder:!0,children:y(D,{direction:"column",gap:"xs",children:[s(F,{order:3,children:`Block ${i.chain.length}`}),s(g,{truncate:!0,children:`Transactions: ${i.pendingTransactions.length}`}),i.pendingTransactions.map((a,u)=>s(xe,{transaction:a,index:u},a.signature)),s(ye,{label:"From Address",data:C.map(a=>({label:a.name,value:a.keys.public})),value:p,onChange:$,withinPortal:!0}),s(ye,{label:"To Address",data:C.map(a=>({label:a.name,value:a.keys.public})),value:m,onChange:b,withinPortal:!0}),s(Te,{label:"Amount",defaultValue:0,min:0,value:v,onChange:a=>S(a!==""?a:0)}),s(nr,{onClick:I,children:"Create Transaction"})]})})]})}export{xr as default};
