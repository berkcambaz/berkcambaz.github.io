import{x as z,y as x,z as S,A as C,G as k,H as v,s as o,r as f,j as e,F as s,I as F,d,J as B,K as I,L as A,P as m,B as g,C as E,E as p,M as j,N as D,w as G}from"./index-qerRH5rX.js";var M=z("search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);function R(t,a){return!(Math.floor((Date.now()-t.campaign.lastFarmDate)/1e3)<5)}function T(t,a){if(!R(t))return;const i=x(t),c=[{item:S(i.gold)},{item:C(i.food)},{item:k(i.xp)}];t.campaign.lastFarmDate=Date.now(),v(t,{toAdd:c})}function P(){const t=o(n=>n.player),a=o(n=>{var l;return(l=n.player)==null?void 0:l.campaign}),i=(a==null?void 0:a.stage)??0,c=D,[r,u]=f.useState(t?x(t):void 0);f.useEffect(()=>{const l=setInterval(()=>{const h=o.getState().player;h&&u(x(h))},1e3);return()=>clearTimeout(l)},[]);const w=()=>{},y=()=>{o.getState().player&&G.setState(l=>{l.modals.lineup={opened:!0,battleType:"campaign"}})},b=()=>{o.setState(n=>{n.player&&(T(n.player),u(x(n.player)))})};return a?e.jsxs(s,{direction:"column",align:"center",justify:"center",gap:"md",h:"100%",children:[e.jsxs(s,{align:"center",pos:"relative",children:[e.jsx(s,{pr:"xs",pos:"absolute",right:"100%",children:e.jsx(F,{radius:"xl",size:32,onClick:w,children:e.jsx(M,{})})}),e.jsx(s,{maw:120,style:{wordBreak:"break-word"},children:e.jsx(d,{fz:"lg",fw:"bold",ta:"center",lineClamp:3,children:a.id})}),e.jsx(s,{pl:"xs",pos:"absolute",left:"100%",children:e.jsx(B,{tier:a.tier})})]}),e.jsx(I,{src:A(a.id),draggable:!1,style:{imageRendering:"pixelated",width:"auto",height:200,flex:"unset"}}),e.jsx(m.Root,{size:"xl",w:"100%",maw:100,children:e.jsx(m.Section,{value:i/c*100,children:e.jsx(m.Label,{pos:"absolute",style:{transform:"translate(-50%,0)",left:"50%"},children:`${i} / ${c}`})})}),e.jsx(g,{size:"md",onClick:y,children:"Battle"}),e.jsx(E,{withBorder:!0,p:0,w:"100%",maw:300,children:e.jsxs(g.Group,{children:[e.jsxs(s,{align:"center",px:"xs",style:{flex:1},children:[e.jsxs(s,{align:"center",w:"100%",children:[e.jsx(p,{emoji:"ü™ô",size:20}),"¬†",e.jsx(d,{size:"sm",w:"100%",children:j((r==null?void 0:r.gold)||0)})]}),e.jsxs(s,{align:"center",w:"100%",children:[e.jsx(p,{emoji:"üçè",size:20}),"¬†",e.jsx(d,{size:"sm",children:j((r==null?void 0:r.food)||0)})]}),e.jsxs(s,{align:"center",w:"100%",children:[e.jsx(p,{emoji:"‚≠ê",size:20}),"¬†",e.jsx(d,{size:"sm",children:j((r==null?void 0:r.xp)||0)})]}),e.jsx(s,{children:e.jsx(p,{emoji:"üì¶",size:20})})]}),e.jsx(g,{onClick:b,children:"Get"})]})})]}):null}export{P as default};
