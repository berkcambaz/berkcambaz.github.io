import{g as v,a as w,s as j,b as f,c as g,d as z,e as B,f as p,j as e,F as r,D as c,E as o,h as G,i as $,C as F,T as A,k as S,l as L,B as C,u as b,m as y}from"./index-8ppehLxy.js";import{C as E}from"./ContentAsset-4jgNcQmx.js";import{C as m}from"./ContentList-q1lpEh1_.js";import{S as T}from"./ScrollArea-e2MVZrqT.js";function k(n,s){var u,a;let i,t=0,d=((u=n.items[v])==null?void 0:u.count)??0,x=((a=n.items[w])==null?void 0:a.count)??0;switch(s.shop){case"gold":if(i=f[s.index],t=n.shop.gold[s.index]??0,!i||(i.price.gold??0)>d)return!1;break;case"gem":if(i=j[s.index],t=n.shop.gem[s.index]??0,!i||(i.price.gem??0)>x)return!1;break;default:return!0}return!(g===n.shop.snapshot&&i.limit>0&&i.limit<=t)}function D(n,s){if(!k(n,s))return;g!==n.shop.snapshot&&(n.shop={snapshot:g,premium:{},gold:{},gem:{}});let i,t=[];switch(s.shop){case"gold":i=f[s.index],t.push({item:B((i==null?void 0:i.price.gold)??0)});break;case"gem":i=j[s.index],t.push({item:z((i==null?void 0:i.price.gem)??0)});break}i&&(n.shop[s.shop][s.index]||(n.shop[s.shop][s.index]=0),n.shop[s.shop][s.index]++,p(n,{toRemove:t}),p(n,{toAdd:[{item:i.item}]}))}function J(){return e.jsx(T,{scrollbars:"y",children:e.jsxs(r,{direction:"column",gap:"md",children:[e.jsx(c,{label:e.jsxs(r,{align:"center",children:[e.jsx(o,{emoji:"âœ¨",size:16}),"Â Special Offer"]})}),e.jsx(P,{specialOffer:G,onBuy:()=>{}}),e.jsx(c,{label:e.jsxs(r,{align:"center",children:[e.jsx(o,{emoji:"ðŸ‘‘",size:16}),"Â Premium Shop"]})}),e.jsx(m,{gap:"xs",children:$.map((n,s)=>e.jsx(h,{shop:"premium",index:s,shopItem:n},s))}),e.jsx(c,{label:e.jsxs(r,{align:"center",children:[e.jsx(o,{emoji:"ðŸª™",size:16}),"Â Gold Shop"]})}),e.jsx(m,{gap:"xs",children:f.map((n,s)=>e.jsx(h,{shop:"gold",index:s,shopItem:n},s))}),e.jsx(c,{label:e.jsxs(r,{align:"center",children:[e.jsx(o,{emoji:"ðŸ’Ž",size:16}),"Â Gem Shop"]})}),e.jsx(m,{gap:"xs",children:j.map((n,s)=>e.jsx(h,{shop:"gem",index:s,shopItem:n},s))})]})})}function P({specialOffer:n,onBuy:s}){return e.jsx(F,{withBorder:!0,styles:{root:{backgroundImage:"url(/idle-demo/gggrain.svg)"}},children:e.jsxs(r,{direction:"column",align:"center",gap:"xs",children:[e.jsx(E,{size:100,image:n.asset.image,emoji:n.asset.emoji}),e.jsx(A,{order:3,c:"white",children:n.name}),e.jsx(r,{direction:"column",w:"100%",children:e.jsx(m,{gap:"xs",children:n.items.map(i=>e.jsx(S,{item:i},L(i)))})}),e.jsx(C,{w:"100%",maw:128,onClick:s,children:`Buy for $${n.money}`})]})})}function h({shop:n,index:s,shopItem:i}){const t=b(l=>l.player),d=()=>{b.setState(l=>{l.player&&D(l.player,{shop:n,index:s})})},x=()=>t?k(t,{shop:n,index:s}):!1,a=t?i.limit-(t.shop[n][s]??0):i.limit;return e.jsxs(r,{direction:"column",align:"center",w:64,children:[e.jsx(S,{item:i.item}),e.jsxs(C,{fullWidth:!0,size:"compact-sm",px:0,mt:"xs",onClick:d,disabled:!x(),children:[i.price.money!==void 0&&e.jsxs(e.Fragment,{children:["$",i.price.money]}),i.price.gem!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(o,{emoji:"ðŸ’Ž"}),"Â ",i.price.gem]}),i.price.gold!==void 0&&e.jsxs(e.Fragment,{children:[e.jsx(o,{emoji:"ðŸª™"}),"Â ",i.price.gold]})]}),e.jsx(y,{size:"xs",my:"xs",children:`Limit ${a<0?"âˆž":a}`})]})}export{J as default};
