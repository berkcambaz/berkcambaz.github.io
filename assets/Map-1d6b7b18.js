import{r as w,R as Z,C as B,h as ii,i as ni,j as E,F as ri,k as ti,a as oi}from"./index-4b9284c8.js";import{f as P,T as D,a as re,b as ai}from"./assets-a37d7d02.js";function si(){const[e,n]=w.useState(!1),i=w.useRef(null),r=w.useCallback(()=>n(!0),[]),t=w.useCallback(()=>n(!1),[]);return w.useEffect(()=>{if(i.current)return i.current.addEventListener("mouseenter",r),i.current.addEventListener("mouseleave",t),()=>{var o,a;(o=i.current)==null||o.removeEventListener("mouseenter",r),(a=i.current)==null||a.removeEventListener("mouseleave",t)}},[]),{ref:i,hovered:e}}var T=function(e,n){return Number(e.toFixed(n))},ui=function(e,n){return typeof e=="number"?e:n},y=function(e,n,i){i&&typeof i=="function"&&i(e,n)},li=function(e){return-Math.cos(e*Math.PI)/2+.5},fi=function(e){return e},di=function(e){return e*e},vi=function(e){return e*(2-e)},pi=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},mi=function(e){return e*e*e},ci=function(e){return--e*e*e+1},hi=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},gi=function(e){return e*e*e*e},yi=function(e){return 1- --e*e*e*e},wi=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},Si=function(e){return e*e*e*e*e},bi=function(e){return 1+--e*e*e*e*e},Ci=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},Ye={easeOut:li,linear:fi,easeInQuad:di,easeOutQuad:vi,easeInOutQuad:pi,easeInCubic:mi,easeOutCubic:ci,easeInOutCubic:hi,easeInQuart:gi,easeOutQuart:yi,easeInOutQuart:wi,easeInQuint:Si,easeOutQuint:bi,easeInOutQuint:Ci},Xe=function(e){typeof e=="number"&&cancelAnimationFrame(e)},X=function(e){e.mounted&&(Xe(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function ze(e,n,i,r){if(e.mounted){var t=new Date().getTime(),o=1;X(e),e.animation=function(){if(!e.mounted)return Xe(e.animation);var a=new Date().getTime()-t,s=a/i,u=Ye[n],f=u(s);a>=i?(r(o),e.animation=null):e.animation&&(r(f),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function Ai(e){var n=e.scale,i=e.positionX,r=e.positionY;return!(Number.isNaN(n)||Number.isNaN(i)||Number.isNaN(r))}function N(e,n,i,r){var t=Ai(n);if(!(!e.mounted||!t)){var o=e.setTransformState,a=e.transformState,s=a.scale,u=a.positionX,f=a.positionY,l=n.scale-s,d=n.positionX-u,v=n.positionY-f;i===0?o(n.scale,n.positionX,n.positionY):ze(e,r,i,function(m){var c=s+l*m,h=u+d*m,p=f+v*m;o(c,h,p)})}}function Pi(e,n,i){var r=e.offsetWidth,t=e.offsetHeight,o=n.offsetWidth,a=n.offsetHeight,s=o*i,u=a*i,f=r-s,l=t-u;return{wrapperWidth:r,wrapperHeight:t,newContentWidth:s,newDiffWidth:f,newContentHeight:u,newDiffHeight:l}}var Ti=function(e,n,i,r,t,o,a){var s=e>n?i*(a?1:.5):0,u=r>t?o*(a?1:.5):0,f=e-n-s,l=s,d=r-t-u,v=u;return{minPositionX:f,maxPositionX:l,minPositionY:d,maxPositionY:v}},le=function(e,n){var i=e.wrapperComponent,r=e.contentComponent,t=e.setup.centerZoomedOut;if(!i||!r)throw new Error("Components are not mounted");var o=Pi(i,r,n),a=o.wrapperWidth,s=o.wrapperHeight,u=o.newContentWidth,f=o.newDiffWidth,l=o.newContentHeight,d=o.newDiffHeight,v=Ti(a,u,f,s,l,d,!!t);return v},ae=function(e,n,i,r){return r?e<n?T(n,2):e>i?T(i,2):T(e,2):T(e,2)},R=function(e,n){var i=le(e,n);return e.bounds=i,i};function q(e,n,i,r,t,o,a){var s=i.minPositionX,u=i.minPositionY,f=i.maxPositionX,l=i.maxPositionY,d=0,v=0;a&&(d=t,v=o);var m=ae(e,s-d,f+d,r),c=ae(n,u-v,l+v,r);return{x:m,y:c}}function J(e,n,i,r,t,o){var a=e.transformState,s=a.scale,u=a.positionX,f=a.positionY,l=r-s;if(typeof n!="number"||typeof i!="number")return console.error("Mouse X and Y position were not provided!"),{x:u,y:f};var d=u-n*l,v=f-i*l,m=q(d,v,t,o,0,0,null);return m}function U(e,n,i,r,t){var o=t?r:0,a=n-o;return!Number.isNaN(i)&&e>=i?i:!Number.isNaN(n)&&e<=a?a:e}var we=function(e,n){var i=e.setup.panning.excluded,r=e.isInitialized,t=e.wrapperComponent,o=n.target,a=t==null?void 0:t.contains(o),s=r&&o&&a;if(!s)return!1;var u=$(o,i);return!u},Se=function(e){var n=e.isInitialized,i=e.isPanning,r=e.setup,t=r.panning.disabled,o=n&&i&&!t;return!!o},Ei=function(e,n){var i=e.transformState,r=i.positionX,t=i.positionY;e.isPanning=!0;var o=n.clientX,a=n.clientY;e.startCoords={x:o-r,y:a-t}},Yi=function(e,n){var i=n.touches,r=e.transformState,t=r.positionX,o=r.positionY;e.isPanning=!0;var a=i.length===1;if(a){var s=i[0].clientX,u=i[0].clientY;e.startCoords={x:s-t,y:u-o}}};function Xi(e){var n=e.transformState,i=n.positionX,r=n.positionY,t=n.scale,o=e.setup,a=o.disabled,s=o.limitToBounds,u=o.centerZoomedOut,f=e.wrapperComponent;if(!(a||!f||!e.bounds)){var l=e.bounds,d=l.maxPositionX,v=l.minPositionX,m=l.maxPositionY,c=l.minPositionY,h=i>d||i<v,p=r>m||r<c,A=i>d?f.offsetWidth:e.setup.minPositionX||0,C=r>m?f.offsetHeight:e.setup.minPositionY||0,S=J(e,A,C,t,e.bounds,s||u),z=S.x,W=S.y;return{scale:t,positionX:h?z:i,positionY:p?W:r}}}function zi(e,n,i,r,t){var o=e.setup.limitToBounds,a=e.wrapperComponent,s=e.bounds,u=e.transformState,f=u.scale,l=u.positionX,d=u.positionY;if(!(a===null||s===null||n===l&&i===d)){var v=q(n,i,s,o,r,t,a),m=v.x,c=v.y;e.setTransformState(f,m,c)}}var Bi=function(e,n,i){var r=e.startCoords,t=e.transformState,o=e.setup.panning,a=o.lockAxisX,s=o.lockAxisY,u=t.positionX,f=t.positionY;if(!r)return{x:u,y:f};var l=n-r.x,d=i-r.y,v=a?u:l,m=s?f:d;return{x:v,y:m}},V=function(e,n){var i=e.setup,r=e.transformState,t=r.scale,o=i.minScale,a=i.disablePadding;return n>0&&t>=o&&!a?n:0},Di=function(e){var n=e.mounted,i=e.setup,r=i.disabled,t=i.velocityAnimation,o=e.transformState.scale,a=t.disabled,s=!a||o>1||!r||n;return!!s},ki=function(e){var n=e.mounted,i=e.velocity,r=e.bounds,t=e.setup,o=t.disabled,a=t.velocityAnimation,s=e.transformState.scale,u=a.disabled,f=!u||s>1||!o||n;return!(!f||!i||!r)};function Ni(e,n){var i=e.setup.velocityAnimation,r=i.equalToMove,t=i.animationTime,o=i.sensitivity;return r?t*n*o:t}function be(e,n,i,r,t,o,a,s,u,f){if(t){if(n>a&&i>a){var l=a+(e-a)*f;return l>u?u:l<a?a:l}if(n<o&&i<o){var l=o+(e-o)*f;return l<s?s:l>o?o:l}}return r?n:ae(e,o,a,t)}function Wi(e,n){var i=1;return n?Math.min(i,e.offsetWidth/window.innerWidth):i}function Oi(e,n){var i=Di(e);if(i){var r=e.lastMousePosition,t=e.velocityTime,o=e.setup,a=e.wrapperComponent,s=o.velocityAnimation.equalToMove,u=Date.now();if(r&&t&&a){var f=Wi(a,s),l=n.x-r.x,d=n.y-r.y,v=l/f,m=d/f,c=u-t,h=l*l+d*d,p=Math.sqrt(h)/c;e.velocity={velocityX:v,velocityY:m,total:p}}e.lastMousePosition=n,e.velocityTime=u}}function Mi(e){var n=e.velocity,i=e.bounds,r=e.setup,t=e.wrapperComponent,o=ki(e);if(!(!o||!n||!i||!t)){var a=n.velocityX,s=n.velocityY,u=n.total,f=i.maxPositionX,l=i.minPositionX,d=i.maxPositionY,v=i.minPositionY,m=r.limitToBounds,c=r.alignmentAnimation,h=r.zoomAnimation,p=r.panning,A=p.lockAxisY,C=p.lockAxisX,S=h.animationType,z=c.sizeX,W=c.sizeY,L=c.velocityAlignmentTime,O=L,Q=Ni(e,u),K=Math.max(Q,O),x=V(e,z),I=V(e,W),ve=x*t.offsetWidth/100,pe=I*t.offsetHeight/100,je=f+ve,He=l-ve,Ue=d+pe,Ge=v-pe,me=e.transformState,Ve=new Date().getTime();ze(e,S,K,function(Fe){var ee=e.transformState,qe=ee.scale,ie=ee.positionX,ne=ee.positionY,Je=new Date().getTime()-Ve,$e=Je/O,xe=Ye[c.animationType],ce=1-xe(Math.min(1,$e)),he=1-Fe,ge=ie+a*he,ye=ne+s*he,Ie=be(ge,me.positionX,ie,C,m,l,f,He,je,ce),ei=be(ye,me.positionY,ne,A,m,v,d,Ge,Ue,ce);(ie!==ge||ne!==ye)&&e.setTransformState(qe,Ie,ei)})}}function Ce(e,n){var i=e.transformState.scale;X(e),R(e,i),window.TouchEvent!==void 0&&n instanceof TouchEvent?Yi(e,n):Ei(e,n)}function Be(e){var n=e.transformState.scale,i=e.setup,r=i.minScale,t=i.alignmentAnimation,o=t.disabled,a=t.sizeX,s=t.sizeY,u=t.animationTime,f=t.animationType,l=o||n<r||!a&&!s;if(!l){var d=Xi(e);d&&N(e,d,u,f)}}function Ae(e,n,i){var r=e.startCoords,t=e.setup,o=t.alignmentAnimation,a=o.sizeX,s=o.sizeY;if(r){var u=Bi(e,n,i),f=u.x,l=u.y,d=V(e,a),v=V(e,s);Oi(e,{x:f,y:l}),zi(e,f,l,d,v)}}function _i(e){if(e.isPanning){var n=e.setup.panning.velocityDisabled,i=e.velocity,r=e.wrapperComponent,t=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var o=r==null?void 0:r.getBoundingClientRect(),a=t==null?void 0:t.getBoundingClientRect(),s=(o==null?void 0:o.width)||0,u=(o==null?void 0:o.height)||0,f=(a==null?void 0:a.width)||0,l=(a==null?void 0:a.height)||0,d=s<f||u<l,v=!n&&i&&(i==null?void 0:i.total)>.1&&d;v?Mi(e):Be(e)}}function fe(e,n,i,r){var t=e.setup,o=t.minScale,a=t.maxScale,s=t.limitToBounds,u=U(T(n,2),o,a,0,!1),f=R(e,u),l=J(e,i,r,u,f,s),d=l.x,v=l.y;return{scale:u,positionX:d,positionY:v}}function De(e,n,i){var r=e.transformState.scale,t=e.wrapperComponent,o=e.setup,a=o.minScale,s=o.limitToBounds,u=o.zoomAnimation,f=u.disabled,l=u.animationTime,d=u.animationType,v=f||r>=a;if((r>=1||s)&&Be(e),!(v||!t||!e.mounted)){var m=n||t.offsetWidth/2,c=i||t.offsetHeight/2,h=fe(e,a,m,c);h&&N(e,h,l,d)}}var k=function(){return k=Object.assign||function(n){for(var i,r=1,t=arguments.length;r<t;r++){i=arguments[r];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])}return n},k.apply(this,arguments)};function Pe(e,n,i){if(i||arguments.length===2)for(var r=0,t=n.length,o;r<t;r++)(o||!(r in n))&&(o||(o=Array.prototype.slice.call(n,0,r)),o[r]=n[r]);return e.concat(o||Array.prototype.slice.call(n))}var G={previousScale:1,scale:1,positionX:0,positionY:0},j={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,wheel:{step:.2,disabled:!1,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},ke=function(e){var n,i,r,t;return{previousScale:(n=e.initialScale)!==null&&n!==void 0?n:G.scale,scale:(i=e.initialScale)!==null&&i!==void 0?i:G.scale,positionX:(r=e.initialPositionX)!==null&&r!==void 0?r:G.positionX,positionY:(t=e.initialPositionY)!==null&&t!==void 0?t:G.positionY}},Te=function(e){var n=k({},j);return Object.keys(e).forEach(function(i){var r=typeof e[i]<"u",t=typeof j[i]<"u";if(t&&r){var o=Object.prototype.toString.call(j[i]),a=o==="[object Object]",s=o==="[object Array]";a?n[i]=k(k({},j[i]),e[i]):s?n[i]=Pe(Pe([],j[i],!0),e[i],!0):n[i]=e[i]}}),n},Ne=function(e,n,i){var r=e.transformState.scale,t=e.wrapperComponent,o=e.setup,a=o.maxScale,s=o.minScale,u=o.zoomAnimation,f=u.size;if(!t)throw new Error("Wrapper is not mounted");var l=r+n*i,d=U(T(l,3),s,a,f,!1);return d};function We(e,n,i,r,t){var o=e.wrapperComponent,a=e.transformState,s=a.scale,u=a.positionX,f=a.positionY;if(!o)return console.error("No WrapperComponent found");var l=o.offsetWidth,d=o.offsetHeight,v=(l/2-u)/s,m=(d/2-f)/s,c=Ne(e,n,i),h=fe(e,c,v,m);if(!h)return console.error("Error during zoom event. New transformation state was not calculated.");N(e,h,r,t)}function Oe(e,n,i,r){var t=e.setup,o=e.wrapperComponent,a=t.limitToBounds,s=ke(e.props),u=e.transformState,f=u.scale,l=u.positionX,d=u.positionY;if(o){var v=le(e,s.scale),m=q(s.positionX,s.positionY,v,a,0,0,o),c={scale:s.scale,positionX:m.x,positionY:m.y};f===s.scale&&l===s.positionX&&d===s.positionY||(r==null||r(),N(e,c,n,i))}}function Zi(e,n,i,r){var t=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=i.getBoundingClientRect(),s=o.x*r.scale,u=o.y*r.scale;return{x:(t.x-a.x+s)/r.scale,y:(t.y-a.y+u)/r.scale}}function Ki(e,n,i){var r=e.wrapperComponent,t=e.contentComponent,o=e.transformState,a=e.setup,s=a.limitToBounds,u=a.minScale,f=a.maxScale;if(!r||!t)return o;var l=r.getBoundingClientRect(),d=n.getBoundingClientRect(),v=Zi(n,r,t,o),m=v.x,c=v.y,h=d.width/o.scale,p=d.height/o.scale,A=r.offsetWidth/h,C=r.offsetHeight/p,S=U(i||Math.min(A,C),u,f,0,!1),z=(l.width-h*S)/2,W=(l.height-p*S)/2,L=(l.left-m)*S+z,O=(l.top-c)*S+W,Q=le(e,S),K=q(L,O,Q,s,0,0,r),x=K.x,I=K.y;return{positionX:x,positionY:I,scale:S}}var Ri=function(e){return function(n,i,r){n===void 0&&(n=.5),i===void 0&&(i=300),r===void 0&&(r="easeOut"),We(e,1,n,i,r)}},Li=function(e){return function(n,i,r){n===void 0&&(n=.5),i===void 0&&(i=300),r===void 0&&(r="easeOut"),We(e,-1,n,i,r)}},Qi=function(e){return function(n,i,r,t,o){t===void 0&&(t=300),o===void 0&&(o="easeOut");var a=e.transformState,s=a.positionX,u=a.positionY,f=a.scale,l=e.wrapperComponent,d=e.contentComponent,v=e.setup.disabled;if(!(v||!l||!d)){var m={positionX:Number.isNaN(n)?s:n,positionY:Number.isNaN(i)?u:i,scale:Number.isNaN(r)?f:r};N(e,m,t,o)}}},ji=function(e){return function(n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut"),Oe(e,n,i)}},Hi=function(e){return function(n,i,r){i===void 0&&(i=200),r===void 0&&(r="easeOut");var t=e.transformState,o=e.wrapperComponent,a=e.contentComponent;if(o&&a){var s=Me(n||t.scale,o,a);N(e,s,i,r)}}},Ui=function(e){return function(n,i,r,t){r===void 0&&(r=600),t===void 0&&(t="easeOut"),X(e);var o=e.wrapperComponent,a=typeof n=="string"?document.getElementById(n):n;if(o&&a&&o.contains(a)){var s=Ki(e,a,i);N(e,s,r,t)}}},se=function(e){return{instance:e,zoomIn:Ri(e),zoomOut:Li(e),setTransform:Qi(e),resetTransform:ji(e),centerView:Hi(e),zoomToElement:Ui(e)}},Gi=function(e){return{instance:e,state:e.transformState}},g=function(e){var n={};return Object.assign(n,Gi(e)),Object.assign(n,se(e)),n},te=!1;function oe(){try{var e={get passive(){return te=!0,!1}};return e}catch{return te=!1,te}}var $=function(e,n){var i=e.tagName.toUpperCase(),r=n.find(function(o){return o.toUpperCase()===i});if(r)return!0;var t=n.find(function(o){return e.classList.contains(o)});return!!t},ue=function(e){e&&clearTimeout(e)},Vi=function(e,n,i){return"translate(".concat(e,"px, ").concat(n,"px) scale(").concat(i,")")},Me=function(e,n,i){var r=i.offsetWidth*e,t=i.offsetHeight*e,o=(n.offsetWidth-r)/2,a=(n.offsetHeight-t)/2;return{scale:e,positionX:o,positionY:a}};function Fi(e){return function(n){e.forEach(function(i){typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var qi=function(e,n){var i=e.setup.wheel,r=i.disabled,t=i.wheelDisabled,o=i.touchPadDisabled,a=i.excluded,s=e.isInitialized,u=e.isPanning,f=n.target,l=s&&!u&&!r&&f;if(!l||t&&!n.ctrlKey||o&&n.ctrlKey)return!1;var d=$(f,a);return!d},Ji=function(e){return e?e.deltaY<0?1:-1:0};function $i(e,n){var i=Ji(e),r=ui(n,i);return r}function _e(e,n,i){var r=n.getBoundingClientRect(),t=0,o=0;if("clientX"in e)t=(e.clientX-r.left)/i,o=(e.clientY-r.top)/i;else{var a=e.touches[0];t=(a.clientX-r.left)/i,o=(a.clientY-r.top)/i}return(Number.isNaN(t)||Number.isNaN(o))&&console.error("No mouse or touch offset found"),{x:t,y:o}}var xi=function(e,n,i,r,t){var o=e.transformState.scale,a=e.wrapperComponent,s=e.setup,u=s.maxScale,f=s.minScale,l=s.zoomAnimation,d=s.disablePadding,v=l.size,m=l.disabled;if(!a)throw new Error("Wrapper is not mounted");var c=o+n*i;if(t)return c;var h=r?!1:!m,p=U(T(c,3),f,u,v,h&&!d);return p},Ii=function(e,n){var i=e.previousWheelEvent,r=e.transformState.scale,t=e.setup,o=t.maxScale,a=t.minScale;return i?r<o||r>a||Math.sign(i.deltaY)!==Math.sign(n.deltaY)||i.deltaY>0&&i.deltaY<n.deltaY||i.deltaY<0&&i.deltaY>n.deltaY||Math.sign(i.deltaY)!==Math.sign(n.deltaY):!1},en=function(e,n){var i=e.setup.pinch,r=i.disabled,t=i.excluded,o=e.isInitialized,a=n.target,s=o&&!r&&a;if(!s)return!1;var u=$(a,t);return!u},nn=function(e){var n=e.setup.pinch.disabled,i=e.isInitialized,r=e.pinchStartDistance,t=i&&!n&&r;return!!t},rn=function(e,n,i){var r=i.getBoundingClientRect(),t=e.touches,o=T(t[0].clientX-r.left,5),a=T(t[0].clientY-r.top,5),s=T(t[1].clientX-r.left,5),u=T(t[1].clientY-r.top,5);return{x:(o+s)/2/n,y:(a+u)/2/n}},Ze=function(e){return Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))},tn=function(e,n){var i=e.pinchStartScale,r=e.pinchStartDistance,t=e.setup,o=t.maxScale,a=t.minScale,s=t.zoomAnimation,u=t.disablePadding,f=s.size,l=s.disabled;if(!i||r===null||!n)throw new Error("Pinch touches distance was not provided");if(n<0)return e.transformState.scale;var d=n/r,v=d*i;return U(T(v,2),a,o,f,!l&&!u)},on=160,an=100,sn=function(e,n){var i=e.props,r=i.onWheelStart,t=i.onZoomStart;e.wheelStopEventTimer||(X(e),y(g(e),n,r),y(g(e),n,t))},un=function(e,n){var i=e.props,r=i.onWheel,t=i.onZoom,o=e.contentComponent,a=e.setup,s=e.transformState,u=s.scale,f=a.limitToBounds,l=a.centerZoomedOut,d=a.zoomAnimation,v=a.wheel,m=a.disablePadding,c=d.size,h=d.disabled,p=v.step;if(!o)throw new Error("Component not mounted");n.preventDefault(),n.stopPropagation();var A=$i(n,null),C=xi(e,A,p,!n.ctrlKey);if(u!==C){var S=R(e,C),z=_e(n,o,u),W=h||c===0||l||m,L=f&&W,O=J(e,z.x,z.y,C,S,L),Q=O.x,K=O.y;e.previousWheelEvent=n,e.setTransformState(C,Q,K),y(g(e),n,r),y(g(e),n,t)}},ln=function(e,n){var i=e.props,r=i.onWheelStop,t=i.onZoomStop;ue(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout(function(){e.mounted&&(De(e,n.x,n.y),e.wheelAnimationTimer=null)},an);var o=Ii(e,n);o&&(ue(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout(function(){e.mounted&&(e.wheelStopEventTimer=null,y(g(e),n,r),y(g(e),n,t))},on))},fn=function(e,n){var i=Ze(n);e.pinchStartDistance=i,e.lastDistance=i,e.pinchStartScale=e.transformState.scale,e.isPanning=!1,X(e)},dn=function(e,n){var i=e.contentComponent,r=e.pinchStartDistance,t=e.transformState.scale,o=e.setup,a=o.limitToBounds,s=o.centerZoomedOut,u=o.zoomAnimation,f=u.disabled,l=u.size;if(!(r===null||!i)){var d=rn(n,t,i);if(!(!Number.isFinite(d.x)||!Number.isFinite(d.y))){var v=Ze(n),m=tn(e,v);if(m!==t){var c=R(e,m),h=f||l===0||s,p=a&&h,A=J(e,d.x,d.y,m,c,p),C=A.x,S=A.y;e.pinchMidpoint=d,e.lastDistance=v,e.setTransformState(m,C,S)}}}},vn=function(e){var n=e.pinchMidpoint;e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,De(e,n==null?void 0:n.x,n==null?void 0:n.y)},Ke=function(e,n){var i=e.props.onZoomStop,r=e.setup.doubleClick.animationTime;ue(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout(function(){e.doubleClickStopEventTimer=null,y(g(e),n,i)},r)},pn=function(e,n){var i=e.props,r=i.onZoomStart,t=i.onZoom,o=e.setup.doubleClick,a=o.animationTime,s=o.animationType;y(g(e),n,r),Oe(e,a,s,function(){return y(g(e),n,t)}),Ke(e,n)};function mn(e,n){var i=e.setup,r=e.doubleClickStopEventTimer,t=e.transformState,o=e.contentComponent,a=t.scale,s=e.props,u=s.onZoomStart,f=s.onZoom,l=i.doubleClick,d=l.disabled,v=l.mode,m=l.step,c=l.animationTime,h=l.animationType;if(!d&&!r){if(v==="reset")return pn(e,n);if(!o)return console.error("No ContentComponent found");var p=v==="zoomOut"?-1:1,A=Ne(e,p,m);if(a!==A){y(g(e),n,u);var C=_e(n,o,a),S=fe(e,A,C.x,C.y);if(!S)return console.error("Error during zoom event. New transformation state was not calculated.");y(g(e),n,f),N(e,S,c,h),Ke(e,n)}}}var cn=function(e,n){var i=e.isInitialized,r=e.setup,t=e.wrapperComponent,o=r.doubleClick,a=o.disabled,s=o.excluded,u=n.target,f=t==null?void 0:t.contains(u),l=i&&u&&f&&!a;if(!l)return!1;var d=$(u,s);return!d},hn=function(){function e(n){var i=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){i.initializeWindowEvents()},this.unmount=function(){i.cleanupWindowEvents()},this.update=function(r){R(i,i.transformState.scale),i.setup=Te(r)},this.initializeWindowEvents=function(){var r,t=oe(),o=(r=i.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.addEventListener("mousedown",i.onPanningStart,t),a==null||a.addEventListener("mousemove",i.onPanning,t),a==null||a.addEventListener("mouseup",i.onPanningStop,t),o==null||o.addEventListener("mouseleave",i.clearPanning,t),a==null||a.addEventListener("keyup",i.setKeyUnPressed,t),a==null||a.addEventListener("keydown",i.setKeyPressed,t)},this.cleanupWindowEvents=function(){var r,t,o=oe(),a=(r=i.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,s=a==null?void 0:a.defaultView;s==null||s.removeEventListener("mousedown",i.onPanningStart,o),s==null||s.removeEventListener("mousemove",i.onPanning,o),s==null||s.removeEventListener("mouseup",i.onPanningStop,o),a==null||a.removeEventListener("mouseleave",i.clearPanning,o),s==null||s.removeEventListener("keyup",i.setKeyUnPressed,o),s==null||s.removeEventListener("keydown",i.setKeyPressed,o),document.removeEventListener("mouseleave",i.clearPanning,o),X(i),(t=i.observer)===null||t===void 0||t.disconnect()},this.handleInitializeWrapperEvents=function(r){var t=oe();r.addEventListener("wheel",i.onWheelZoom,t),r.addEventListener("dblclick",i.onDoubleClick,t),r.addEventListener("touchstart",i.onTouchPanningStart,t),r.addEventListener("touchmove",i.onTouchPanning,t),r.addEventListener("touchend",i.onTouchPanningStop,t)},this.handleInitialize=function(r){var t=i.setup.centerOnInit;i.applyTransformation(),i.onInitCallbacks.forEach(function(o){return o(g(i))}),t&&(i.setCenter(),i.observer=new ResizeObserver(function(){var o;i.onInitCallbacks.forEach(function(a){return a(g(i))}),i.setCenter(),(o=i.observer)===null||o===void 0||o.disconnect()}),i.observer.observe(r))},this.onWheelZoom=function(r){var t=i.setup.disabled;if(!t){var o=qi(i,r);if(o){var a=i.isPressingKeys(i.setup.wheel.activationKeys);a&&(sn(i,r),un(i,r),ln(i,r))}}},this.onPanningStart=function(r){var t=i.setup.disabled,o=i.props.onPanningStart;if(!t){var a=we(i,r);if(a){var s=i.isPressingKeys(i.setup.panning.activationKeys);s&&(r.preventDefault(),r.stopPropagation(),X(i),Ce(i,r),y(g(i),r,o))}}},this.onPanning=function(r){var t=i.setup.disabled,o=i.props.onPanning;if(!t){var a=Se(i);if(a){var s=i.isPressingKeys(i.setup.panning.activationKeys);s&&(r.preventDefault(),r.stopPropagation(),Ae(i,r.clientX,r.clientY),y(g(i),r,o))}}},this.onPanningStop=function(r){var t=i.props.onPanningStop;i.isPanning&&(_i(i),y(g(i),r,t))},this.onPinchStart=function(r){var t=i.setup.disabled,o=i.props,a=o.onPinchingStart,s=o.onZoomStart;if(!t){var u=en(i,r);u&&(fn(i,r),X(i),y(g(i),r,a),y(g(i),r,s))}},this.onPinch=function(r){var t=i.setup.disabled,o=i.props,a=o.onPinching,s=o.onZoom;if(!t){var u=nn(i);u&&(r.preventDefault(),r.stopPropagation(),dn(i,r),y(g(i),r,a),y(g(i),r,s))}},this.onPinchStop=function(r){var t=i.props,o=t.onPinchingStop,a=t.onZoomStop;i.pinchStartScale&&(vn(i),y(g(i),r,o),y(g(i),r,a))},this.onTouchPanningStart=function(r){var t=i.setup.disabled,o=i.props.onPanningStart;if(!t){var a=we(i,r);if(a){var s=i.lastTouch&&+new Date-i.lastTouch<200;if(s&&r.touches.length===1)i.onDoubleClick(r);else{i.lastTouch=+new Date,X(i);var u=r.touches,f=u.length===1,l=u.length===2;f&&(X(i),Ce(i,r),y(g(i),r,o)),l&&i.onPinchStart(r)}}}},this.onTouchPanning=function(r){var t=i.setup.disabled,o=i.props.onPanning;if(i.isPanning&&r.touches.length===1){if(t)return;var a=Se(i);if(!a)return;r.preventDefault(),r.stopPropagation();var s=r.touches[0];Ae(i,s.clientX,s.clientY),y(g(i),r,o)}else r.touches.length>1&&i.onPinch(r)},this.onTouchPanningStop=function(r){i.onPanningStop(r),i.onPinchStop(r)},this.onDoubleClick=function(r){var t=i.setup.disabled;if(!t){var o=cn(i,r);o&&mn(i,r)}},this.clearPanning=function(r){i.isPanning&&i.onPanningStop(r)},this.setKeyPressed=function(r){i.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){i.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(t){return i.pressedKeys[t]}):!0},this.setTransformState=function(r,t,o){var a=i.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(t)&&!Number.isNaN(o)){r!==i.transformState.scale&&(i.transformState.previousScale=i.transformState.scale,i.transformState.scale=r),i.transformState.positionX=t,i.transformState.positionY=o,i.applyTransformation();var s=g(i);i.onChangeCallbacks.forEach(function(u){return u(s)}),y(s,{scale:r,positionX:t,positionY:o},a)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(i.wrapperComponent&&i.contentComponent){var r=Me(i.transformState.scale,i.wrapperComponent,i.contentComponent);i.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,t,o){return i.props.customTransform?i.props.customTransform(r,t,o):Vi(r,t,o)},this.applyTransformation=function(){if(!(!i.mounted||!i.contentComponent)){var r=i.transformState,t=r.scale,o=r.positionX,a=r.positionY,s=i.handleTransformStyles(o,a,t);i.contentComponent.style.transform=s}},this.getContext=function(){return g(i)},this.onChange=function(r){return i.onChangeCallbacks.has(r)||i.onChangeCallbacks.add(r),function(){i.onChangeCallbacks.delete(r)}},this.onInit=function(r){return i.onInitCallbacks.has(r)||i.onInitCallbacks.add(r),function(){i.onInitCallbacks.delete(r)}},this.init=function(r,t){i.cleanupWindowEvents(),i.wrapperComponent=r,i.contentComponent=t,R(i,i.transformState.scale),i.handleInitializeWrapperEvents(r),i.handleInitialize(t),i.initializeWindowEvents(),i.isInitialized=!0;var o=g(i);y(o,void 0,i.props.onInit)},this.props=n,this.setup=Te(this.props),this.transformState=ke(this.props)}return e}(),de=Z.createContext(null),gn=function(e,n){return typeof e=="function"?e(n):e},yn=Z.forwardRef(function(e,n){var i=w.useRef(new hn(e)).current,r=gn(e.children,se(i));return w.useImperativeHandle(n,function(){return se(i)},[i]),w.useEffect(function(){i.update(e)},[i,e]),Z.createElement(de.Provider,{value:i},r)});Z.forwardRef(function(e,n){var i=w.useRef(null),r=w.useContext(de);return w.useEffect(function(){return r.onChange(function(t){if(i.current){var o=0,a=0;i.current.style.transform=r.handleTransformStyles(o,a,1/t.instance.transformState.scale)}})},[r]),Z.createElement("div",k({},e,{ref:Fi([i,n])}))});function wn(e,n){n===void 0&&(n={});var i=n.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",i==="top"&&r.firstChild?r.insertBefore(t,r.firstChild):r.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}}var Sn=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,Ee={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};wn(Sn);var bn=function(e){var n=e.children,i=e.wrapperClass,r=i===void 0?"":i,t=e.contentClass,o=t===void 0?"":t,a=e.wrapperStyle,s=e.contentStyle,u=e.wrapperProps,f=u===void 0?{}:u,l=e.contentProps,d=l===void 0?{}:l,v=w.useContext(de).init,m=w.useRef(null),c=w.useRef(null);return w.useEffect(function(){var h=m.current,p=c.current;h!==null&&p!==null&&v&&v(h,p)},[]),Z.createElement("div",k({},f,{ref:m,className:"react-transform-wrapper ".concat(Ee.wrapper," ").concat(r),style:a}),Z.createElement("div",k({},d,{ref:c,className:"react-transform-component ".concat(Ee.content," ").concat(o),style:s}),n))};function Cn(e){const n=An(e);function i(o,a){return Math.floor(n()*(a-o)+o)}function r(){return i(1,6+1)}function t(o){let a=0;o.forEach(f=>{a+=f.percent});let s=i(0,a)+1,u=0;for(let f=0;f<o.length;++f){const l=o[f];if(l&&(u+=l.percent,s<=u))return l.result}}return{seed:e,number:i,dice:r,percent:t}}function An(e){return function(){var n=e+=1831565813;return n=Math.imul(n^n>>>15,n|1),n^=n+Math.imul(n^n>>>7,n|61),((n^n>>>14)>>>0)/4294967296}}var b=(e=>(e[e.None=-1]="None",e[e.CountryGreen=0]="CountryGreen",e[e.CountryPurple=1]="CountryPurple",e[e.CountryRed=2]="CountryRed",e[e.CountryYellow=3]="CountryYellow",e[e.Chest=4]="Chest",e[e.Banner=5]="Banner",e))(b||{});function Pn(e){return{countries:[],tiles:[],running:!1,turn:{count:0,type:b.None},rng:Cn(e),width:0,height:0}}function Tn(e){switch(e==null?void 0:e.id){case B.Green:return b.CountryGreen;case B.Purple:return b.CountryPurple;case B.Red:return b.CountryRed;case B.Yellow:return b.CountryYellow;default:return b.None}}function En(e,n){switch(n){case b.CountryGreen:return e.countries.filter(i=>i.id===B.Green)[0];case b.CountryPurple:return e.countries.filter(i=>i.id===B.Purple)[0];case b.CountryRed:return e.countries.filter(i=>i.id===B.Red)[0];case b.CountryYellow:return e.countries.filter(i=>i.id===B.Yellow)[0];default:return}}function Yn(e,n){return!e||!n?!1:e.pos.x===n.pos.x&&e.pos.y===n.pos.y}function Xn(e,n){const i=e.countries.length,r=i*3+1,t=n-1-Math.floor(n/r);return n<0?b.None:n%r===0?n%2===1?b.Chest:b.Banner:Y.countryToTurnType(e.countries[t%i])}function F(e,n){const i=[];return n.x-1>=0&&n.y-1>=0&&i.push(e.tiles[n.x-1+(n.y-1)*e.width]),n.y-1>=0&&i.push(e.tiles[n.x+0+(n.y-1)*e.width]),n.x+1<e.width&&n.y-1>=0&&i.push(e.tiles[n.x+1+(n.y-1)*e.width]),n.x-1>=0&&n.y+1<e.height&&i.push(e.tiles[n.x-1+(n.y+1)*e.width]),n.y+1<e.height&&i.push(e.tiles[n.x+0+(n.y+1)*e.width]),n.x+1<e.width&&n.y+1<e.height&&i.push(e.tiles[n.x+1+(n.y+1)*e.width]),n.x-1>=0&&i.push(e.tiles[n.x-1+(n.y+0)*e.width]),n.x+1<e.width&&i.push(e.tiles[n.x+1+(n.y+0)*e.width]),i.filter(r=>r)}function zn(e,n,i){const r=e.tiles[i.x+i.y*e.width];return r?r.unit?r.unit.id!==n?[]:r.unit.attacked?[]:F(e,i).filter(a=>{var s;return!(a.unit&&a.unit.id===n||(s=r.unit)!=null&&s.moved&&!a.unit)}):[]:[]}function Bn(e,n,i){if(!n.unit||!i.unit)return 0;let r=0;const t=F(e,n.pos),o=F(e,i.pos);if(t.forEach(a=>{!n.unit||!i.unit||!a.unit||(a.unit.id===n.unit.id&&(r+=.5),a.unit.id===i.unit.id&&(r+=-1))}),o.forEach(a=>{!n.unit||!i.unit||!a.unit||(a.unit.id===n.unit.id&&(r+=-1),a.unit.id===i.unit.id&&(r+=.5))}),n.owner.id===n.unit.id)switch(n.landmark){case P.Forest:r+=2;break}if(i.owner.id===i.unit.id)switch(i.landmark){case P.Mountains:r-=2;break}return r}const Y={countryToTurnType:Tn,turnTypeToCountry:En,compareTile:Yn,getTurnType:Xn,getAdjacentTiles:F,getMoveableTiles:zn,getWarModifier:Bn};function Dn(e,n){return!e.running}function kn(e,n){Dn(e)&&(e.running=!0,e.turn.type=Y.getTurnType(e,e.turn.count))}function Re(e){return{id:e,attacked:!0,moved:!0}}function Nn(e,n){const i=Y.turnTypeToCountry(e,e.turn.type);return!i||i.id===n.country}function Wn(e,n){if(!Nn(e,n))return;const i=e.turn.type,r=Y.turnTypeToCountry(e,e.turn.type);switch(e.turn.count++,e.turn.type=Y.getTurnType(e,e.turn.count),i){case b.Banner:On(e);break;case b.Chest:Mn(e);break;case b.CountryGreen:case b.CountryPurple:case b.CountryRed:case b.CountryYellow:_n(e,r);break}}function On(e){e.countries.forEach(n=>{n.banners++})}function Mn(e){const n=e.tiles.filter(t=>!(t.unit||t.landmark!==P.None)),i=e.rng.number(0,n.length),r=n[i];r&&(r.landmark=P.Chest)}function _n(e,n){n&&(e.tiles.forEach(i=>{i.owner.id===n.id&&(i.unit||i.landmark===P.Banner&&(i.unit=Re(n.id)))}),e.tiles.forEach(i=>{i.unit&&i.unit.id===n.id&&(i.unit.attacked=!1,i.unit.moved=!1)}),e.tiles.forEach(i=>{if(i.unit&&i.owner.id!==i.unit.id)switch(i.landmark){case P.Banner:i.type===D.Settled?i.type=D.Nomad:i.type===D.Nomad&&(i.owner=n);break;default:i.owner=n;break}}))}function H(e,n){return{pos:e,owner:n,type:D.Nomad,landmark:P.None,unit:void 0}}const Zn={generate:Kn};function Kn(e){const n=Rn(e);Ln(e,n),Qn(e)}function Rn(e){const n=[];for(let i=0;i<e.countries.length;++i){n[i]=[{x:e.rng.number(0,e.width),y:e.rng.number(0,e.height)}];for(let r=i-1;r>=0;--r)if(n[r][0].x===n[i][0].x&&n[r][0].y===n[i][0].y){--i;break}}for(let i=0;i<e.countries.length;++i)e.tiles[n[i][0].x+n[i][0].y*e.width]=H({x:n[i][0].x,y:n[i][0].y},e.countries[i]);return n}function Ln(e,n){let i=!0;for(;i;){i=!1;for(let r=0;r<e.countries.length;++r){if(n[r].length===0)continue;const t=n[r][0].x,o=n[r][0].y,a=t+(o-1)*e.width,s=t+1+o*e.width,u=t+(o+1)*e.width,f=t-1+o*e.width;o-1>-1&&!e.tiles[a]?(n[r].push({x:t,y:o-1}),e.tiles[a]=H({x:t,y:o-1},e.countries[r])):t+1<e.width&&!e.tiles[s]?(n[r].push({x:t+1,y:o}),e.tiles[s]=H({x:t+1,y:o},e.countries[r])):o+1<e.height&&!e.tiles[u]?(n[r].push({x:t,y:o+1}),e.tiles[u]=H({x:t,y:o+1},e.countries[r])):t-1>-1&&!e.tiles[f]?(n[r].push({x:t-1,y:o}),e.tiles[f]=H({x:t-1,y:o},e.countries[r])):n[r].splice(0,1),i=i||n[r]!==0}}}function Qn(e){for(let n=0;n<e.height;++n)for(let i=0;i<e.width;++i){const r=e.tiles[i+n*e.width],t=e.rng.percent([{percent:10,result:P.Mountains},{percent:15,result:P.Forest},{percent:75,result:P.None}]);r&&t&&(r.landmark=t)}}function jn(e,n){return!e.running}function Hn(e,n){jn(e)&&(e.width=n.w,e.height=n.h,Zn.generate(e))}function Un(e){return{id:e,banners:1}}function Gn(e,n){return!(e.countries.filter(r=>r.id===n.country).length>0)}function Vn(e,n){Gn(e,n)&&e.countries.push(Un(n.country))}function Fn(e,n){return!(e.countries.filter(r=>r.id===n.country).length>0)}function qn(e,n){Fn(e,n)&&(e.countries=e.countries.filter(i=>i.id!==n.country))}function Le(e,n){const i=e.countries.filter(a=>a.id===n.countryId)[0];if(!i)return!1;const r=Y.turnTypeToCountry(e,e.turn.type);if(!r||r.id!==i.id)return!1;const t=e.tiles[n.pos.x+n.pos.y*e.width];if(!t||i.banners<=0||t.owner.id!==i.id||t.type!==D.Nomad||t.landmark!==P.None||t.unit)return!1;const o=Y.getAdjacentTiles(e,n.pos);for(const a of o)if(a.landmark===P.Banner||a.unit&&a.unit.id!==i.id)return!1;return!0}function Jn(e,n){if(!Le(e,n))return;const i=e.countries.filter(o=>o.id===n.countryId)[0];if(!i)return;const r=e.tiles[n.pos.x+n.pos.y*e.width];if(!r)return;r.type=D.Settled,r.landmark=P.Banner,r.unit=Re(i.id),i.banners--,Y.getAdjacentTiles(e,n.pos).forEach(o=>{o.type!==D.Settled&&(o.unit&&o.unit.id!==i.id||(o.owner=i,o.type=D.Settled))})}function Qe(e,n){const i=e.tiles[n.from.x+n.from.y*e.width],r=e.tiles[n.to.x+n.to.y*e.width];return!(!i||!r||!i.unit||Y.getMoveableTiles(e,i.unit.id,i.pos).filter(o=>o===r).length===0)}function $n(e,n){if(!Qe(e,n))return;const i=e.tiles[n.from.x+n.from.y*e.width],r=e.tiles[n.to.x+n.to.y*e.width];if(!i||!r)return;const t=e.countries.filter(o=>{var a;return o.id===((a=i.unit)==null?void 0:a.id)})[0];if(t)if(r.unit){const o=Y.getWarModifier(e,i,r),a=e.rng.dice(),s=e.rng.dice();a-s+o>0?(r.unit=i.unit,i.unit=void 0,r.unit&&(r.unit.attacked=!0)):i.unit=void 0}else r.unit=i.unit,i.unit=void 0,r.unit&&(r.unit.moved=!0),r.landmark===P.Chest&&(r.landmark=P.None,t.banners++)}const xn={start:kn,nextTurn:Wn,generate:Hn,addCountry:Vn,removeCountry:qn,placeBanner:Jn,placeBannerActable:Le,moveUnit:$n,moveUnitActable:Qe},M={play:xn,util:Y,createGameData:Pn},In={data:M.createGameData(Date.now()),country:void 0,hoveredTile:void 0,selectedUnitTile:void 0,moveableTiles:[]},_=ii(ni((e,n)=>({...In}))),er="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAAABGdBTUEAALGPC/xhBQAAAGNQTFRFKSkpKioqKSkpKioqKCgoIiIiKioqKSkpKSkpJiYmKSkpKioqKioqKCgoKSkpAAAARERE8fHx19fXvLy8eXl5UVFRh4eHbGxsNzc3oaGhr6+v5OTklJSUX19fycnJ////Kioqg8amTAAAABB0Uk5Tj59vz18PT6/fLx/vfz+/ADrMDhQAAANGSURBVHja7ZvZsoIwDIZRVqEUjwv79v5PebpgsVjRGRu4Sa5EnOaDNg04/+9kbyI+UuqcMohIZcTiwMmyUxh6qchJpqAsRhEWCNIoORzj6cAPiOPKoUdKQ18AROP7iH4HSFaGDz8CjL/fgHF9eAZAzOe61grA0TD0vWNx5rMgAPh0l+LErZXRs/gbBisAB57wPufO2/oy8MjZEVEA/WAIKwB89No0esdOeAKA5/kDBejfAaTqDjR7A+w0BVsA8BorvgW4dkXdDE3byQDaBzqZ7MY+HhcAEBtR9jrmWSRrDWX4+tsEZCsWyWptI5IAxUt+C83IS8wAvQLgy6QS31U8J+uE3tQwU4BebAA4KICLnZv+HUAjk+llyM/6GwEMqhs+AUy1CQ3QvAUo4AFCluL6FoC3yAAWwGMpWh0gmgFK+DuQvgKMCoDvDWMMCxCsAfDt+QBchsQMMBdBsA8Afwq8Xkr4GRBVwJ49WdfVAGy2v88PKDzKbicAw3tBYrn/rke0yMYAgoR3QPk6mJygAQJxvdNFy8fyXSIOCBGvrHsBqEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABEAABECA3QB8A4CS3MNm9kgodByU+BLgxIwExzSV2ooUOn/6LCI5CQD3WVZCoQE0EYvLAdK9ZTw6AN0CoGLStaY+izlwsljJfW9bALhKOiflm5Og8f6QGoOXZaK0/ArglEwyz0nrDD8Fgw6gNJ0bA0jt3jNAt8U+YJD17gRwUWK2nQCuStqtKuO26RqY5f3K5bLtIsx1gIe4nm4GMFs84sd3PTCAf2RGOgMAbwbdAyAifBkGRGosqQWRbxzSA+FCzVQ3OBgAYCwe0RuLxwwwG3HKbUwu5WIRzlrn+oXAtQtw7fuq6OpFGYazF6qp21w448qC/dTOmuTDSfdMoRnKrgaXjR52isKfN3/j8JOwuQEDmJf4Ii7SUaqp6zcFMMn7IQD4Es+/AWj6ipk9c+n5rPrGJkD7GaC9Q7luBUAvomonC99CXT+C2n6dz7bfNWfy71uxu5bfVV4zXhKUqAipNbedt3Z58t3QD1nbI2DGgtiZOisNCWE+Ph//oNDjHxMDR5gR1QpJAAAAAElFTkSuQmCC";function ir(){const e=_(n=>n.data.tiles);return E(ri,{children:e.map((n,i)=>E(nr,{tile:n},i))})}function nr({tile:e}){const n=_(p=>p.data),i=_(p=>p.country),r=_(p=>p.hoveredTile),t=_(p=>p.moveableTiles),o=w.useMemo(()=>`translate(${e.pos.x*128}px, ${e.pos.y*128}px)`,[]),a=w.useMemo(()=>"translate(0px, 0px)",[]),s=w.useMemo(()=>"translate(0px, 32px) scale(0.5)",[]),{hovered:u,ref:f}=si();w.useEffect(()=>{u&&_.setState(p=>{p.hoveredTile=p.data.tiles[e.pos.x+e.pos.y*p.data.width]})},[u]);const l=()=>{_.setState(p=>{var A,C;if(p.hoveredTile=p.data.tiles[e.pos.x+e.pos.y*p.data.width],!!p.country){if(M.play.placeBanner(p.data,{countryId:p.country.id,pos:e.pos}),((A=p.selectedUnitTile)==null?void 0:A.pos.x)===e.pos.x&&((C=p.selectedUnitTile)==null?void 0:C.pos.y)===e.pos.y){p.selectedUnitTile=void 0,p.moveableTiles=[];return}p.moveableTiles.filter(S=>M.util.compareTile(S,e)).length>0&&p.selectedUnitTile&&M.play.moveUnit(p.data,{countryId:p.country.id,from:p.selectedUnitTile.pos,to:e.pos}),p.moveableTiles=M.util.getMoveableTiles(p.data,p.country.id,e.pos),p.selectedUnitTile=p.moveableTiles.length>0?e:void 0}})},{onClick:d,onMouseDown:v,onMouseMove:m,onTouchStart:c,onTouchMove:h}=ti(l);return oi("div",{onClick:d,onMouseDown:v,onMouseMove:m,onTouchStart:c,onTouchMove:h,style:{position:"absolute",transform:o,width:128,height:128},ref:f,children:[E("img",{src:re.getTileSrc(e),style:{position:"absolute",transform:a,zIndex:0}}),E("img",{src:re.getLandmarkSrc(e),style:{position:"absolute",transform:a,zIndex:1}}),E("img",{src:re.getUnitSrc(e),style:{position:"absolute",transform:s,zIndex:2}}),i&&M.play.placeBannerActable(n,{countryId:i.id,pos:e.pos})&&E("img",{src:ai,style:{position:"absolute",transform:a,zIndex:2,filter:"invert(100%)"}}),t.filter(p=>p===e).length>0&&E("div",{style:{position:"absolute",transform:a,zIndex:2,width:128,height:128,backgroundColor:"rgba(0, 0, 0, 0.375)"}}),M.util.compareTile(e,r)&&E("img",{src:er,style:{position:"absolute",transform:a,zIndex:3}})]})}function or(){const[e,n]=w.useState({x:innerWidth,y:innerHeight});return w.useLayoutEffect(()=>{const i=()=>{n({x:innerWidth,y:innerHeight})};return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),E(yn,{maxScale:1,minScale:.25,centerOnInit:!0,limitToBounds:!1,doubleClick:{disabled:!0},children:E(bn,{wrapperStyle:{width:`${e.x}px`,height:`${e.y}px`},children:E(ir,{})})})}export{or as M,b as T,M as g,_ as u};
