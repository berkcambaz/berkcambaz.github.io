import{r as v,j as o,a as p,u as P,C,F as L}from"./index-4b9284c8.js";import{u as m,g as i,T as u,M as I}from"./Map-1d6b7b18.js";import{L as x,b as O,U as M,c as S,d as j,e as K}from"./assets-a37d7d02.js";import{F as y,c as _}from"./Flex-4e7b11a9.js";import{c as N,A as d}from"./createReactComponent-6ee58786.js";import{I as D,a as F}from"./IconMessageCircle2-3a13ff24.js";var G=Object.defineProperty,H=Object.defineProperties,R=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,U=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable,k=(e,t,r)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,A=(e,t)=>{for(var r in t||(t={}))U.call(t,r)&&k(e,r,t[r]);if(w)for(var r of w(t))z.call(t,r)&&k(e,r,t[r]);return e},B=(e,t)=>H(e,R(t));function W(e){const t=e.toLowerCase().split("+").map(n=>n.trim()),r={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},a=["alt","ctrl","meta","shift","mod"],s=t.find(n=>!a.includes(n));return B(A({},r),{key:s})}function Y(e,t){const{alt:r,ctrl:a,meta:s,mod:n,shift:c,key:l}=e,{altKey:b,ctrlKey:g,metaKey:h,shiftKey:T,key:E}=t;if(r!==b)return!1;if(n){if(!g&&!h)return!1}else if(a!==g||s!==h)return!1;return c!==T?!1:!!(l&&(E.toLowerCase()===l.toLowerCase()||t.code.replace("Key","").toLowerCase()===l.toLowerCase()))}function V(e){return t=>Y(W(e),t)}function X(e,t,r=!1){return e.target instanceof HTMLElement?(r||!e.target.isContentEditable)&&!t.includes(e.target.tagName):!0}function $(e,t=["INPUT","TEXTAREA","SELECT"],r=!1){v.useEffect(()=>{const a=s=>{e.forEach(([n,c,l={preventDefault:!0}])=>{V(n)(s)&&X(s,t,r)&&(l.preventDefault&&s.preventDefault(),c(s))})};return document.documentElement.addEventListener("keydown",a),()=>document.documentElement.removeEventListener("keydown",a)},[e])}var q=N("world","IconWorld",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M3.6 9h16.8",key:"svg-1"}],["path",{d:"M3.6 15h16.8",key:"svg-2"}],["path",{d:"M11.5 3a17 17 0 0 0 0 18",key:"svg-3"}],["path",{d:"M12.5 3a17 17 0 0 1 0 18",key:"svg-4"}]]);const J=_(e=>({header:{position:"absolute",left:0,right:0,height:"64px",zIndex:1,backgroundImage:"linear-gradient(rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0))"}}));function Q(){const{classes:e}=J(),t=m(r=>r.data);return o(y,{className:e.header,direction:"row",align:"center",justify:"center",gap:"md",children:p(y,{children:[[-4,-3,-2,-1].map((r,a)=>o("img",{src:f(i.util.getTurnType(t,t.turn.count+r)),style:{width:32,height:32}},a)),o("img",{src:f(t.turn.type),style:{width:64,height:64}}),[1,2,3,4].map((r,a)=>o("img",{src:f(i.util.getTurnType(t,t.turn.count+r)),style:{width:32,height:32}},a))]})})}function f(e){switch(e){case u.CountryGreen:return K;case u.CountryPurple:return j;case u.CountryRed:return S;case u.CountryYellow:return M;case u.Banner:return O;case u.Chest:return x;default:return}}const Z=_(e=>({footer:{position:"absolute",bottom:0,left:0,right:0,height:"64px",zIndex:1,backgroundImage:"linear-gradient(0deg, rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0))"}}));function ee(){const e=P(),{classes:t}=Z(),r=()=>{e("/lobby")},a=()=>{e("/chat")},s=()=>{m.setState(n=>{var c;i.play.nextTurn(n.data,{country:(c=n.country)==null?void 0:c.id}),n.country=i.util.turnTypeToCountry(n.data,n.data.turn.type)})};return $([["1",()=>r()],["2",()=>a()],["3",()=>s()]]),p(y,{className:t.footer,direction:"row",align:"center",justify:"center",gap:"md",children:[o(d,{variant:"filled",size:32,onClick:r,children:o(q,{})}),o(d,{variant:"filled",size:32,onClick:a,children:o(D,{})}),o(d,{variant:"filled",size:32,onClick:s,children:o(F,{})})]})}function ie(){return v.useEffect(()=>{m.setState(e=>{e.data=i.createGameData(Date.now()),i.play.addCountry(e.data,{country:C.Green}),i.play.addCountry(e.data,{country:C.Red}),i.play.generate(e.data,{w:10,h:10}),i.play.start(e.data,{}),e.country=i.util.turnTypeToCountry(e.data,e.data.turn.type)})},[]),p(L,{children:[o(Q,{}),o(ee,{}),o(I,{})]})}export{ie as default};
