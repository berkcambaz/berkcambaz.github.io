(()=>{"use strict";var e,t,r,a,n,o,i,s={2989:(e,t,r)=>{r.r(t),r.d(t,{Soda:()=>a});const a=new class{constructor(){this.components={},this.id=0,this.work=[]}state(e,t){const r=this.currentComponent;r.__hooks[r.__hookId]=r.__hooks[r.__hookId]||e;const a=r.__hookId;return[r.__hooks[r.__hookId++],(e,n)=>{const o=r.__hooks[a];return r.__hooks[a]=e,n||t&&t(o,e)||r.update(),e}]}effect(e,t){var r;const a=this.currentComponent;if(!a.__dom)return void this.work.push({cb:()=>{this.effect(e,t)},hookId:a.__hookId++});const n=a.__hooks[a.__hookId],o=!(null==n?void 0:n.deps)||!t.every(((e,t)=>e===n.deps[t]));t&&!o||("function"==typeof(null===(r=a.__hooks[a.__hookId])||void 0===r?void 0:r.cleanup)&&a.__hooks[a.__hookId].cleanup(),a.__hooks[a.__hookId]={},a.__hooks[a.__hookId].deps=t,a.__hooks[a.__hookId].cleanup=e()),++a.__hookId}ref(){return this.state({dom:void 0})[0]}createElement(e,t,...r){return{tag:e,attrs:t,children:r}}render(e,t){if("function"==typeof e.tag){const r={attrs:e.attrs,update:()=>{if("function"==typeof e.tag){const t=this.currentComponent;this.currentComponent=r,r.__hookId=0;const a=e.tag(r.attrs);this._update(r.__dom,a,r.__element,r),r.__element=a,this.currentComponent=t}},__dom:void 0,__element:void 0,__children:[],__hooks:[],__hookId:0},a=this.currentComponent;this.currentComponent=r;const n=this.id++;return this.components[n]=r,this._render(t,r.__element=e.tag(r.attrs),r,{svg:!1,parent:!0}),this.processWork(),this.currentComponent=a,n}}_render(e,t,r,a){if(Array.isArray(t)){for(let n=0;n<t.length;++n)"function"==typeof t[n].tag?r.__children.push(this.render(t[n],e)):this._render(e,t[n],r,a);return}let n;"svg"===t.tag||a.svg?(n=document.createElementNS("http://www.w3.org/2000/svg",t.tag),a.svg=!0):n=document.createElement(t.tag),a.parent&&(r.__dom=n,a.parent=!1);for(let e in t.attrs)e.startsWith("on")?n.addEventListener(e.substring(2).toLowerCase(),t.attrs[e],{capture:!0}):this.setDomAttribute(n,e,t.attrs[e],void 0);for(let e=0;e<t.children.length;++e)"function"==typeof t.children[e].tag?r.__children.push(this.render(t.children[e],n)):"object"==typeof t.children[e]?this._render(n,t.children[e],r,a):n.appendChild(document.createTextNode(t.children[e]));e.appendChild(n)}_update(e,t,r,a){var n,o;if(e.tagName.toLowerCase()!==t.tag){const r=e.parentNode;null==r||r.removeChild(e),e=document.createElement(t.tag),null==r||r.appendChild(e)}const i={};for(let a in null==r?void 0:r.attrs)a.startsWith("on")?(r.attrs&&r.attrs[a]&&e.removeEventListener(a.substring(2).toLowerCase(),r.attrs[a],{capture:!0}),t.attrs&&t.attrs[a]&&(i[a]=!0,e.addEventListener(a.substring(2).toLowerCase(),t.attrs[a],{capture:!0}))):(null==t?void 0:t.attrs[a])?(i[a]=!0,this.setDomAttribute(e,a,t.attrs[a],r.attrs[a])):this.removeDomAttribute(e,a);for(let r in null==t?void 0:t.attrs)i[r]||(r.startsWith("on")?t.attrs&&t.attrs[r]&&e.addEventListener(r.substring(2).toLowerCase(),t.attrs[r],{capture:!0}):this.setDomAttribute(e,r,t.attrs[r],void 0));for(let i=0;i<t.children.length||i<e.childNodes.length;++i)if(void 0!==t.children[i])if("function"==typeof t.children[i].tag){const r=document.createElement("div");a.__children.push(this.render(t.children[i],r)),void 0===e.childNodes[i]?e.appendChild(r.firstChild):e.replaceChild(r.firstChild,e.childNodes[i])}else{if(Array.isArray(t.children[i])){const s=r.children[i],c=t.children[i];let d={};for(let t=0;t<s.length;++t)d[s[t].attrs.key]=e.childNodes[t];for(let t=0,r=0;t<s.length||r<c.length;)if((null===(n=s[t])||void 0===n?void 0:n.attrs.key)===(null===(o=c[r])||void 0===o?void 0:o.attrs.key)){if("function"==typeof c[r].tag)this.components[a.__children[t]].attrs=c[r].attrs,this.components[a.__children[t]].update();else{let e=d[s[t].attrs.key];this._update(e,c[r],s[t],a)}++t,++r}else if(s[t]&&c[r]){let n=d[s[t].attrs.key];const o=document.createElement("div");"function"==typeof c[r].tag?a.__children.push(this.render(c[r],o)):this._render(o,c[r],a,{svg:!1,parent:!1}),e.insertBefore(o.firstChild,n),++r}else if(!s[t]&&c[r]){const t=document.createElement("div");"function"==typeof c[r].tag?a.__children.push(this.render(c[r],t)):this._render(t,c[r],a,{svg:!1,parent:!1}),e.appendChild(t.firstChild),++r}else s[t]&&!c[r]?(e.removeChild(d[s[t].attrs.key]),++t,++r):(++t,++r);break}"object"==typeof t.children[i]?(void 0===e.childNodes[i]?e.appendChild(document.createElement(t.children[i].tag)):e.childNodes[i].nodeType!==document.ELEMENT_NODE&&e.insertBefore(document.createElement(t.children[i].tag),e.childNodes[i]),this._update(e.childNodes[i],t.children[i],r.children[i],a)):void 0===e.childNodes[i]?e.appendChild(document.createTextNode(t.children[i])):e.childNodes[i].nodeType!==document.TEXT_NODE?e.insertBefore(document.createTextNode(t.children[i]),e.childNodes[i]):e.childNodes[i].nodeValue!==t.children[i]&&(e.childNodes[i].nodeValue=t.children[i])}else e.removeChild(e.childNodes[i--]);this.removeChildren(a,!1)}removeChildren(e,t){for(let r=0;r<e.__children.length;++r)!t&&this.components[e.__children[r]].__dom.parentNode||(this.removeChildren(this.components[e.__children[r]],!0),delete this.components[e.__children[r]],e.__children.splice(r--,1))}setDomAttribute(e,t,r,a){switch(t){case"key":case"":break;case"ref":r.dom=e;break;case"style":for(const t in r)e.style.setProperty(t,r[t]);break;default:r!==a&&e.setAttribute(t,r)}}removeDomAttribute(e,t){switch(t){case"key":case"ref":case"":case"style":break;default:e.removeAttribute(t)}}processWork(){for(let e=0;e<this.work.length;++e)this.currentComponent.__hookId=this.work[e].hookId,this.work[e].cb();this.work=[]}}},4800:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var a=r(8081),n=r.n(a),o=r(3645),i=r.n(o)()(n());i.push([e.id,".ui-menu .__top{display:flex;justify-content:center;align-items:center;flex-direction:column;position:absolute;top:0;left:50%;transform:translate(-50%, 0);color:#0e0e12;background-color:#c1c1d2;width:100vw;height:50px}@media screen and (min-width: 1024px){.ui-menu .__top{width:1024px;border-radius:0 0 10px 10px}}.ui-menu .__top .__name-title{font-size:19px;font-weight:500}.ui-menu .__top .__version-title{font-size:13px}.ui-menu .__top .__icon{position:absolute;left:0;padding:9px;cursor:pointer}.ui-menu .__top .__disabled{visibility:hidden}.ui-menu .__bottom{position:absolute;bottom:0;left:50%;transform:translate(-50%, 0)}.ui-ingame .__top{width:100vw;height:64px;position:absolute;top:0;left:50%;transform:translate(-50%, 0);display:flex;flex-direction:row;align-items:center;background-color:#c1c1d2}@media screen and (min-width: 1024px){.ui-ingame .__top{width:1024px;border-radius:0 0 10px 10px}}.ui-ingame .__top img{width:48px;height:48px;margin:0 8px}.ui-ingame .__top .__info{width:100px}.ui-ingame .__top .__icon{position:absolute;right:0;padding-right:16px;cursor:pointer}.ui-ingame .__bottom{width:100vw;position:absolute;bottom:0;left:50%;transform:translate(-50%, 0);background-color:#c1c1d2;overflow-x:auto}@media screen and (min-width: 1024px){.ui-ingame .__bottom{width:1024px;border-radius:10px 10px 0 0}}.ui-ingame .__bottom>:first-child{height:64px;display:inline-block;white-space:nowrap}.ui-ingame .__bottom>:first-child :first-child{margin-left:7px}.ui-ingame .__bottom>:first-child :last-child{margin-right:7px}.ui-ingame .__bottom img{display:inline-block;width:48px;height:48px;margin:7px 3px;border:1px solid #535373;border-radius:5px;cursor:pointer}.ui-ingame .__bottom img.__hidden{display:none}.ui-ingame .__bottom img.__disabled{background-color:#a6a6bf}.ui-menu .__main{display:flex;flex-direction:column;background-color:#c1c1d2;padding:5px;border-radius:10px 10px 0 0}.ui-menu .__main .__btn{padding:5px 20px;border:1px solid #535373;color:#0e0e12;border-radius:5px;cursor:pointer;margin:5px}.ui-menu .__main .__btn:hover{background-color:#e6e6ec}.ui-menu .__new{background-color:#c1c1d2;padding:5px;border-radius:10px 10px 0 0}.ui-menu .__new .__img-container{display:flex;justify-content:space-around}.ui-menu .__new .__img-container :nth-child(n){cursor:pointer;border-radius:5px;width:48px;height:48px}.ui-menu .__new .__img-container :nth-child(n).enabled{background-color:#e6e6ec}.ui-menu .__new .__img-container :nth-child(n).disabled{background-color:#535373}.ui-menu .__new .btn{padding:5px 20px;border:1px solid #535373;color:#0e0e12;border-radius:5px;cursor:pointer}.ui-menu .__new .btn:hover{background-color:#e6e6ec}body{margin:0 auto;padding:0;outline:0;font-family:-apple-system,BlinkMacSystemFont,avenir next,avenir,segoe ui,helvetica neue,helvetica,Ubuntu,roboto,noto,arial,sans-serif;-webkit-tap-highlight-color:rgba(0,0,0,0)}canvas{display:block}\n",""]);const s=i},3645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",a=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),a&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),a&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,a,n,o){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(a)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(i[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);a&&i[l[0]]||(void 0!==o&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=o),r&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=r):l[2]=r),n&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=n):l[4]="".concat(n)),t.push(l))}},t}},8081:e=>{e.exports=function(e){return e[1]}},4699:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/557dd3e32b94363c1953d9207465e3c0.png"},3984:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/ab49ca99f5c48b2a11d0e09ea3577094.png"},3476:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/31e6d908846553d6e0c63d4df76ea63f.png"},6381:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/9e5094faa72343f6eb3bb5f662607338.png"},3985:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/843cb4108cd927aa8e89622378dae3bb.png"},4900:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/043a4365936e8583243068f4f77b0bd7.png"},3358:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/0daf07f6f7816191171c200b66240e8e.png"},6510:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/3186a7ebc708c958d3db1ec831834869.png"},178:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/e10b73b1e86a36f203f3ed6f3ff0d6a6.png"},2400:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/0522363665ac959b4c5ddf8ab481c940.png"},2413:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/a7b52d7c574e436242e5a6668055530b.png"},7448:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/0d54d836371354351afb58dd5a3ec9e7.png"},6498:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/e36822a4da99912d07dc9352c11e4169.png"},5002:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/63dfd2c11f111a17f2514da030f37c03.png"},3694:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/24565e95428679577bede1a4f71f35dd.png"},8434:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/4b83370d0344b6ca2864261b0543bc6c.png"},9857:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/9adc68fc16c7b2f6803af0d50450d9b7.png"},4291:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/a49254628a095ae7aacea6b15a1f9a32.png"},5778:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/ce9d6265b1ee68ac4e339e0bfc81bd0c.png"},1257:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/b47c800b0365671789387198c2e672fb.png"},3425:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/1310b31dce280980adc94b2ebddebfc1.png"},4430:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/0f9d8c7a4324ba986d58def2452cf60b.png"},3157:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/9083996f73a73bb31d5b58e3bc98ab6f.png"},5802:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/3284c3e38b5bf9304d2200258d1d29ba.png"},2265:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/472eb6d89d1d1efbfa1be7caf99552d3.png"},4809:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/29397b2ebb62ab151c72fb5c3139193c.png"},5824:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/bfe6d1ec2cea029f78fc35de06a7a521.png"},1430:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/b565552cb7519190dc6bd2a1c71e4b68.png"},6421:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/4a8290edfe4be4e55fbab6019fb46514.png"},2610:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/9be6864257b46ffe790480c457b0c8ed.png"},231:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/6ea09caaae09e5cc44f5ba63b80eb5c5.png"},6646:(e,t,r)=>{r.r(t),r.d(t,{default:()=>a});const a=r.p+"images/68b34c826c4ac1cc80e3f2e233af9982.png"},9620:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var a=r(3379),n=r.n(a),o=r(7795),i=r.n(o),s=r(569),c=r.n(s),d=r(3565),l=r.n(d),u=r(9216),m=r.n(u),h=r(4589),p=r.n(h),g=r(4800),f={};f.styleTagTransform=p(),f.setAttributes=l(),f.insert=c().bind(null,"head"),f.domAPI=i(),f.insertStyleElement=m();var _=n()(g.default,f);if(!g.default.locals||e.hot.invalidate){var v=!g.default.locals,E=v?g:g.default.locals;e.hot.accept(4800,(t=>{g=r(4800),function(e,t,r){if(!e&&t||e&&!t)return!1;var a;for(a in e)if((!r||"default"!==a)&&e[a]!==t[a])return!1;for(a in t)if(!(r&&"default"===a||e[a]))return!1;return!0}(E,v?g:g.default.locals,v)?(E=v?g:g.default.locals,_(g.default)):e.hot.invalidate()}))}e.hot.dispose((function(){_()}));const y=g.default&&g.default.locals?g.default.locals:void 0},3379:e=>{var t=[];function r(e){for(var r=-1,a=0;a<t.length;a++)if(t[a].identifier===e){r=a;break}return r}function a(e,a){for(var o={},i=[],s=0;s<e.length;s++){var c=e[s],d=a.base?c[0]+a.base:c[0],l=o[d]||0,u="".concat(d," ").concat(l);o[d]=l+1;var m=r(u),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==m)t[m].references++,t[m].updater(h);else{var p=n(h,a);a.byIndex=s,t.splice(s,0,{identifier:u,updater:p,references:1})}i.push(u)}return i}function n(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,n){var o=a(e=e||[],n=n||{});return function(e){e=e||[];for(var i=0;i<o.length;i++){var s=r(o[i]);t[s].references--}for(var c=a(e,n),d=0;d<o.length;d++){var l=r(o[d]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}o=c}}},569:e=>{var t={};e.exports=function(e,r){var a=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(r)}},9216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,r)=>{e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var a="";r.supports&&(a+="@supports (".concat(r.supports,") {")),r.media&&(a+="@media ".concat(r.media," {"));var n=void 0!==r.layer;n&&(a+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),a+=r.css,n&&(a+="}"),r.media&&(a+="}"),r.supports&&(a+="}");var o=r.sourceMap;o&&"undefined"!=typeof btoa&&(a+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(a,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},9764:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Camera=void 0;const a=r(3607);t.Camera=class{constructor(e,t,r,n){this.x=e,this.y=t,this.w=r,this.h=n,this.zoom=.5,this.zoomPoint={x:this.w/(2*this.zoom),y:this.h/(2*this.zoom)},a.game.signals.onResize.add(((e,t)=>{this.onResize(e,t)}))}setZoom(e){const t=.05*Math.sign(-e);this.zoom=a.game.maths.clamp(this.zoom+t,.5,1),a.game.ctx.setTransform(this.zoom,0,0,this.zoom,0,0);const r=window.innerWidth/(2*this.zoom),n=window.innerHeight/(2*this.zoom);this.x-=-this.zoomPoint.x+r,this.y-=-this.zoomPoint.y+n,this.zoomPoint.x=r,this.zoomPoint.y=n,this.w=window.innerWidth/this.zoom,this.h=window.innerHeight/this.zoom}onResize(e,t){a.game.canvas.width=e,a.game.canvas.height=t,a.game.ctx.setTransform(this.zoom,0,0,this.zoom,0,0),this.w=e/this.zoom,this.h=t/this.zoom,this.zoomPoint.x=e/(2*this.zoom),this.zoomPoint.y=t/(2*this.zoom)}}},5724:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Input=void 0;const a=r(3607);t.Input=class{constructor(){this.mouse={x:0,y:0,pressed:!1,moved:!1},a.game.canvas.addEventListener("mousemove",(e=>{this.onMouseMove(e)})),a.game.canvas.addEventListener("mousedown",(e=>{this.onMouseDown(e)})),a.game.canvas.addEventListener("mouseup",(e=>{this.onMouseUp(e)})),a.game.canvas.addEventListener("mouseleave",(e=>{this.onMouseLeave(e)})),a.game.canvas.addEventListener("touchmove",(e=>{this.onTouchMove(e)})),a.game.canvas.addEventListener("touchstart",(e=>{this.onTouchStart(e)})),a.game.canvas.addEventListener("touchend",(e=>{this.onTouchEnd(e)})),a.game.canvas.addEventListener("touchcancel",(e=>{this.onTouchCancel(e)}))}onMouseMove(e){this.mouse.pressed&&(a.game.camera.x+=(this.mouse.x-e.x)/a.game.camera.zoom,a.game.camera.y+=(this.mouse.y-e.y)/a.game.camera.zoom,this.mouse.moved=!0),this.mouse.x=e.x,this.mouse.y=e.y,a.game.tilemap.highlightProvince(a.game.util.worldPosToProvince(this.mouse.x,this.mouse.y))}onMouseDown(e){this.mouse.pressed=!0}onMouseUp(e){this.mouse.moved||a.game.tilemap.selectProvince(a.game.util.worldPosToProvince(this.mouse.x,this.mouse.y)),this.mouse.pressed=!1,this.mouse.moved=!1}onMouseLeave(e){this.mouse.pressed=!1,a.game.tilemap.highlightProvince(void 0)}onWheel(e){a.game.camera.setZoom(e.deltaY)}onTouchMove(e){e.preventDefault();const t=e.touches[0].clientX,r=e.touches[0].clientY;this.mouse.pressed&&(a.game.camera.x+=(this.mouse.x-t)/a.game.camera.zoom,a.game.camera.y+=(this.mouse.y-r)/a.game.camera.zoom,this.mouse.moved=!0),this.mouse.x=t,this.mouse.y=r}onTouchStart(e){e.preventDefault();const t=a.game.canvas.getBoundingClientRect();this.mouse.x=e.touches[0].clientX-t.left,this.mouse.y=e.touches[0].clientY-t.top,this.mouse.pressed=!0}onTouchEnd(e){e.preventDefault(),this.mouse.moved||a.game.tilemap.selectProvince(a.game.util.worldPosToProvince(this.mouse.x,this.mouse.y)),this.mouse.pressed=!1,this.mouse.moved=!1}onTouchCancel(e){e.preventDefault(),this.mouse.pressed=!1,a.game.tilemap.highlightProvince(void 0)}}},9404:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Maths=void 0,t.Maths=class{clamp(e,t,r){return e<t?t:e>r?r:e}}},662:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Random=void 0,t.Random=class{number(e,t){return Math.floor(Math.random()*(t-e)+e)}dice(){return this.number(1,7)}percent(e){const t=this.number(0,99);let r=0;for(let a=0;a<e.length;++a){if(r-1<t&&t<r+e[a].percent)return e[a].result;r+=e[a].percent}}}},1330:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Resources=void 0;const a=r(4699),n=r(3985),o=r(3358),i=r(3476),s=r(3984),c=r(4900),d=r(6510),l=r(6381),u=r(5778),m=r(3157),h=r(2265),p=r(3425),g=r(1257),f=r(5802),_=r(4809),v=r(4430),E=r(178),y=r(2400),I=r(2413),S=r(7448),A=r(6498),T=r(5002),b=r(8434),R=r(9857),L=r(4291),P=r(3694),w=r(5824),N=r(2610),M=r(6646),D=r(1430),C=r(6421),O=r(231),k={ARMY_GREEN_BIG:a.default,ARMY_RED_BIG:n.default,ARMY_YELLOW_BIG:o.default,ARMY_PURPLE_BIG:i.default,ARMY_GREEN_SMALL:s.default,ARMY_RED_SMALL:c.default,ARMY_YELLOW_SMALL:d.default,ARMY_PURPLE_SMALL:l.default,TILE_GREEN:u.default,TILE_RED:m.default,TILE_YELLOW:h.default,TILE_PURPLE:p.default,TILE_GREEN_OCCUPIED:g.default,TILE_RED_OCCUPIED:f.default,TILE_YELLOW_OCCUPIED:_.default,TILE_PURPLE_OCCUPIED:v.default,LANDMARK_CAPITAL:E.default,LANDMARK_CHURCH:y.default,LANDMARK_FOREST:I.default,LANDMARK_HOUSE:S.default,LANDMARK_MOUNTAINS:A.default,LANDMARK_TOWER:T.default,TILEMAP_SELECT_GRAY:b.default,TILEMAP_SELECT_WHITE:R.default,TILEMAP_SELECTED:L.default,MISC_DEMOLISH:P.default,UI_ICON_ARMY:w.default,UI_ICON_BUILDING:N.default,UI_ICON_DIPLOMACY:M.default,UI_ICON_ARROW_LEFT:D.default,UI_ICON_ARROW_RIGHT:C.default,UI_ICON_CANCEL:O.default};t.Resources=class{constructor(){this.SPRITES={},this.URL_SPRITES={}}loadSprites(){return new Promise(((e,t)=>{const r=Object.keys(k).length;let a=0;for(const t in k){const n=new Image;n.onload=()=>{++a===r&&e(0)},n.src=k[t],this.SPRITES[t]=n,this.URL_SPRITES[t]=k[t]}}))}}},7543:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Signal=void 0,t.Signal=class{constructor(){this.listeners=[]}add(e){this.listeners.push(e)}remove(e){for(let t=0;t<this.listeners.length;++t)if(this.listeners[t]===e)return void this.listeners.splice(t,1)}dispatch(...e){for(let t=0;t<this.listeners.length;++t)this.listeners[t](...e)}clear(){this.listeners=[]}}},2070:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Tilemap=void 0;const a=r(3607),n=r(2655),o=r(6551),i=r(824),s=r(5067),c=r(1641);t.Tilemap=class{constructor(){this.TILE_SIZE=128;const e=document.createElement("canvas").getContext("2d");if(!e)throw Error("HTML Canvas is not supported in the browser.");this.buffer=e}generate(e,t,r,a,n){this.buffer.canvas.width=this.TILE_SIZE*e,this.buffer.canvas.height=this.TILE_SIZE*t,this.highlightedProvince=void 0,this.selectedProvince=void 0,this.shownProvinces=[];const o=this.chooseOrigins(e,t,a,n);this.chooseProvinces(e,t,a,n,o),this.sprinkleNature(e,t,n);for(let e=0;e<n.length;++e)this.drawTile(n[e])}drawTile(e){this.buffer.clearRect(e.pos.x*this.TILE_SIZE,e.pos.y*this.TILE_SIZE,this.TILE_SIZE,this.TILE_SIZE);const t=a.game.util.provinceToSprite(e);this.buffer.drawImage(t,e.pos.x*this.TILE_SIZE,e.pos.y*this.TILE_SIZE);const r=a.game.util.provinceToLandmarkSprite(e);r&&this.buffer.drawImage(r,e.pos.x*this.TILE_SIZE,e.pos.y*this.TILE_SIZE);const n=a.game.util.provinceToArmySprite(e);if(n&&this.buffer.drawImage(n,e.pos.x*this.TILE_SIZE,e.pos.y*this.TILE_SIZE),this.shownProvinces.length>0)for(let t=0;t<this.shownProvinces.length;++t)if(s.Province.equals(e,this.shownProvinces[t])){this.buffer.drawImage(a.game.resources.SPRITES.TILEMAP_SELECT_GRAY,e.pos.x*this.TILE_SIZE,e.pos.y*this.TILE_SIZE);break}this.selectedProvince&&s.Province.equals(e,this.selectedProvince)&&(this.buffer.drawImage(a.game.resources.SPRITES.TILEMAP_SELECTED,e.pos.x*this.TILE_SIZE,e.pos.y*this.TILE_SIZE),this.buffer.drawImage(a.game.resources.SPRITES.TILEMAP_SELECT_GRAY,e.pos.x*this.TILE_SIZE,e.pos.y*this.TILE_SIZE)),this.highlightedProvince&&s.Province.equals(e,this.highlightedProvince)&&(this.selectedProvince&&s.Province.equals(e,this.selectedProvince)||this.buffer.drawImage(a.game.resources.SPRITES.TILEMAP_SELECT_WHITE,e.pos.x*this.TILE_SIZE,e.pos.y*this.TILE_SIZE))}render(){let e=a.game.camera.x,t=a.game.camera.y,r=this.buffer.canvas.width,n=this.buffer.canvas.height,o=0,i=0;e<0&&(o=-e,e=0),t<0&&(i=-t,t=0),e+r>a.game.camera.w&&(r-=e),t+n>a.game.camera.h&&(n-=t),a.game.ctx.drawImage(this.buffer.canvas,e,t,r,n,o,i,r,n)}highlightProvince(e){if(!e){if(!this.highlightedProvince)return;const e=this.highlightedProvince;return this.highlightedProvince=void 0,void this.drawTile(e)}if(this.highlightedProvince&&s.Province.equals(this.highlightedProvince,e))return;const t=this.highlightedProvince;this.highlightedProvince=void 0,t&&this.drawTile(t),this.highlightedProvince=e,this.drawTile(e)}selectProvince(e){var t,r;const o=this.shownProvinces;this.shownProvinces=[];for(let i=0;i<o.length;++i){if(e&&s.Province.equals(e,o[i])){const o=null===(r=null===(t=a.game.gameplay.currentProvince)||void 0===t?void 0:t.army)||void 0===r?void 0:r.data;if(!o)return;n.Army.move(a.game.gameplay.currentCountry,a.game.gameplay.currentProvince,e,o)}this.drawTile(o[i])}const i=this.selectedProvince;this.selectedProvince=void 0,i&&this.drawTile(i),!e||i&&s.Province.equals(i,e)||(this.selectedProvince=e,this.drawTile(e)),a.game.gameplay.selectProvince(this.selectedProvince)}showProvinces(e){const t=this.shownProvinces;if(0===e.length||s.Province.equalsArray(t,e)){this.shownProvinces=[];for(let e=0;e<t.length;++e)this.drawTile(t[e])}else{this.shownProvinces=e;for(let t=0;t<e.length;++t)this.drawTile(e[t])}}chooseOrigins(e,t,r,n){const o=[];for(let n=0;n<r.length;++n){o[n]=[{x:a.game.random.number(0,e),y:a.game.random.number(0,t)}];for(let e=n-1;e>=0;--e)if(o[e][0].x===o[n][0].x&&o[e][0].y===o[n][0].y){--n;break}}for(let t=0;t<r.length;++t)n[o[t][0].x+o[t][0].y*e]=new s.Province(new c.Vec2(o[t][0].x,o[t][0].y),r[t]);return o}chooseProvinces(e,t,r,a,n){let o=!0;for(;o;){o=!1;for(let i=0;i<r.length;++i){if(0===n[i].length)continue;const d=n[i][0].x,l=n[i][0].y,u=d+(l-1)*e,m=d+1+l*e,h=d+(l+1)*e,p=d-1+l*e;l-1>-1&&!a[u]?(n[i].push({x:d,y:l-1}),a[u]=new s.Province(new c.Vec2(d,l-1),r[i])):d+1<e&&!a[m]?(n[i].push({x:d+1,y:l}),a[m]=new s.Province(new c.Vec2(d+1,l),r[i])):l+1<t&&!a[h]?(n[i].push({x:d,y:l+1}),a[h]=new s.Province(new c.Vec2(d,l+1),r[i])):d-1>-1&&!a[p]?(n[i].push({x:d-1,y:l}),a[p]=new s.Province(new c.Vec2(d-1,l),r[i])):n[i].splice(0,1),o=o||0!==n[i]}}}sprinkleNature(e,t,r){for(let n=0;n<t;++n)for(let t=0;t<e;++t){const s=a.game.random.percent([{percent:10,result:i.Landmark.create(o.LANDMARK_ID.MOUNTAINS)},{percent:15,result:i.Landmark.create(o.LANDMARK_ID.FOREST)},{percent:75,result:void 0}]);s&&(r[t+n*e].landmark=new i.Landmark(s))}}}},1228:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;const a=r(3607),n=r(2495),o=r(2290),i=r(6551);t.Util=class{countryIdToSprite(e){switch(e){case n.COUNTRY_ID.GREEN:return a.game.resources.URL_SPRITES.ARMY_GREEN_BIG;case n.COUNTRY_ID.PURPLE:return a.game.resources.URL_SPRITES.ARMY_PURPLE_BIG;case n.COUNTRY_ID.RED:return a.game.resources.URL_SPRITES.ARMY_RED_BIG;case n.COUNTRY_ID.YELLOW:return a.game.resources.URL_SPRITES.ARMY_YELLOW_BIG;default:throw Error(`Country with id ${e} doesn't exist.`)}}provinceToSprite(e){var t;switch(null===(t=e.occupier)||void 0===t?void 0:t.id){case n.COUNTRY_ID.GREEN:return a.game.resources.SPRITES.TILE_GREEN_OCCUPIED;case n.COUNTRY_ID.PURPLE:return a.game.resources.SPRITES.TILE_PURPLE_OCCUPIED;case n.COUNTRY_ID.RED:return a.game.resources.SPRITES.TILE_RED_OCCUPIED;case n.COUNTRY_ID.YELLOW:return a.game.resources.SPRITES.TILE_YELLOW_OCCUPIED}switch(e.owner.id){case n.COUNTRY_ID.GREEN:return a.game.resources.SPRITES.TILE_GREEN;case n.COUNTRY_ID.PURPLE:return a.game.resources.SPRITES.TILE_PURPLE;case n.COUNTRY_ID.RED:return a.game.resources.SPRITES.TILE_RED;case n.COUNTRY_ID.YELLOW:return a.game.resources.SPRITES.TILE_YELLOW;default:throw Error(`Country with id ${e.owner.id} doesn't exist.`)}}provinceToLandmarkSprite(e){if(!e.landmark)return null;switch(e.landmark.data.id){case i.LANDMARK_ID.CAPITAL:return a.game.resources.SPRITES.LANDMARK_CAPITAL;case i.LANDMARK_ID.CHURCH:return a.game.resources.SPRITES.LANDMARK_CHURCH;case i.LANDMARK_ID.FOREST:return a.game.resources.SPRITES.LANDMARK_FOREST;case i.LANDMARK_ID.HOUSE:return a.game.resources.SPRITES.LANDMARK_HOUSE;case i.LANDMARK_ID.MOUNTAINS:return a.game.resources.SPRITES.LANDMARK_MOUNTAINS;case i.LANDMARK_ID.TOWER:return a.game.resources.SPRITES.LANDMARK_TOWER;default:throw new Error(`Landmark with id ${e.landmark.data.id} doesn't exist.`)}}provinceToArmySprite(e){if(!e.army)return null;if(e.army.data.id===o.ARMY_ID.NORMAL)switch(e.army.country.id){case n.COUNTRY_ID.GREEN:return a.game.resources.SPRITES.ARMY_GREEN_SMALL;case n.COUNTRY_ID.PURPLE:return a.game.resources.SPRITES.ARMY_PURPLE_SMALL;case n.COUNTRY_ID.RED:return a.game.resources.SPRITES.ARMY_RED_SMALL;case n.COUNTRY_ID.YELLOW:return a.game.resources.SPRITES.ARMY_YELLOW_SMALL;default:throw new Error(`Country with id ${e.owner.id} doesn't exist.`)}throw new Error(`Army with id ${e.army.data.id} doesn't exist.`)}worldPosToProvince(e,t){return e=Math.floor((e+a.game.camera.x*a.game.camera.zoom)/(a.game.tilemap.TILE_SIZE*a.game.camera.zoom)),t=Math.floor((t+a.game.camera.y*a.game.camera.zoom)/(a.game.tilemap.TILE_SIZE*a.game.camera.zoom)),this.tilePosToProvince(e,t)}tilePosToProvince(e,t){if(a.game.gameplay.width&&a.game.gameplay.height&&!(e<0||e>a.game.gameplay.width-1||t<0||t>a.game.gameplay.height-1))return a.game.gameplay.provinces[e+a.game.gameplay.width*t]}hasLandmark(e,t){var r;for(let n=0;n<a.game.gameplay.provinces.length;++n)if(a.game.gameplay.provinces[n].owner.id===e.id&&(null===(r=a.game.gameplay.provinces[n].landmark)||void 0===r?void 0:r.data.id)===t)return!0;return!1}getAdjacentProvinces(e){const t=[],r=a.game.gameplay.provinces[e.pos.x+(e.pos.y+1)*a.game.gameplay.width],n=a.game.gameplay.provinces[e.pos.x+(e.pos.y-1)*a.game.gameplay.width],o=a.game.gameplay.provinces[e.pos.x-1+e.pos.y*a.game.gameplay.width],i=a.game.gameplay.provinces[e.pos.x+1+e.pos.y*a.game.gameplay.width];return r&&t.push(r),n&&t.push(n),o&&t.push(o),i&&t.push(i),t}checkMoveableProvinces(e){var t;const r=[];for(let n=0;n<e.length;++n)e[n].army&&(null===(t=e[n].army)||void 0===t?void 0:t.country.id)===a.game.gameplay.currentCountry.id||r.push(e[n]);return r}getSupportBonus(e){var t,r,a,n;let o=0;const i=this.getAdjacentProvinces(e);for(let s=0;s<i.length;++s)(null===(t=e.army)||void 0===t?void 0:t.country.id)===(null===(r=i[s].army)||void 0===r?void 0:r.country.id)?o+=.5:i[s].army&&(null===(a=e.army)||void 0===a?void 0:a.country.id)!==(null===(n=i[s].army)||void 0===n?void 0:n.country.id)&&(o+=-1);return o}getProvinceCount(e){let t=0;for(let r=0;r<a.game.gameplay.provinces.length;++r)a.game.gameplay.provinces[r].owner.id===e.id&&t++;return t}}},1641:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Vec2=void 0,t.Vec2=class{constructor(e,t){this.x=e,this.y=t}static equals(e,t){return e.x===t.x&&e.y===t.y}}},2655:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Army=t.ARMY_STATE=void 0;const a=r(3607),n=r(6923),o=r(2290),i=r(5067);var s;!function(e){e[e.READY=0]="READY",e[e.NOT_READY=1]="NOT_READY"}(s=t.ARMY_STATE||(t.ARMY_STATE={}));class c{constructor(e,t,r,a){this.country=e,this.data=t,this.state=r,this.exhaust=a}static create(e){if(e===o.ARMY_ID.NORMAL)return new n.ArmyNormal;throw new Error(`Army with id ${e} doesn't exist.`)}static availableToRecruit(e,t,r){var a;return e.id===t.owner.id&&!t.army&&!!(null===(a=t.landmark)||void 0===a?void 0:a.data.recruitable)}static canRecruit(e,t,r){return t.state===i.PROVINCE_STATE.FREE&&!(t.owner.gold<r.cost)}static availableToDisband(e,t,r){return!!t.army&&t.army.country.id===e.id}static canDisband(e,t,r){return e.id===t.owner.id}static availableToMove(e,t,r){return!!t.army&&t.army.country.id===e.id}static canMove(e,t,r){var a;return(null===(a=t.army)||void 0===a?void 0:a.state)===s.READY}static recruit(e,t,r){t&&c.availableToRecruit(e,t,r)&&c.canRecruit(e,t,r)&&(e.gold-=r.cost,e.army+=1,t.army=new c(e,r,s.READY,0),r.onRecruit(t),a.game.ui.ingameHandler(),a.game.tilemap.drawTile(t))}static disband(e,t,r){t&&c.availableToDisband(e,t,r)&&c.canDisband(e,t,r)&&(e.army-=1,t.army=void 0,r.onDisband(t),a.game.ui.ingameHandler(),a.game.tilemap.drawTile(t))}static move(e,t,r,n){t&&t.army&&c.availableToMove(e,t,n)&&c.canMove(e,t,n)&&(t.army.state=s.NOT_READY,n.onMove(t,r),a.game.ui.ingameHandler(),a.game.tilemap.drawTile(t),a.game.tilemap.drawTile(r))}}t.Army=c},2495:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.Country=t.COUNTRY_ID=void 0,(r=t.COUNTRY_ID||(t.COUNTRY_ID={}))[r.GREEN=0]="GREEN",r[r.PURPLE=1]="PURPLE",r[r.RED=2]="RED",r[r.YELLOW=3]="YELLOW",t.Country=class{constructor(e,t,r,a,n){this.id=e,this.gold=t,this.income=r,this.army=a,this.manpower=n}}},2290:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ArmyData=t.ARMY_ID=void 0;const a=r(3607),n=r(2655),o=r(824),i=r(5067);var s;(s=t.ARMY_ID||(t.ARMY_ID={}))[s.NORMAL=0]="NORMAL",t.ArmyData=class{constructor(e,t,r,a,n){this.id=e,this.cost=t,this.offensive=r,this.defensive=a,this.breakthrough=n}onUpdate(e){e.army&&(this.onHitProvince(e),e.army.state===n.ARMY_STATE.READY&&(e.army.exhaust=a.game.maths.clamp(e.army.exhaust-.25,0,6)),e.army.state=n.ARMY_STATE.READY)}onHit(e,t){let r=0,n=0;r+=a.game.random.dice(),n+=a.game.random.dice(),e.army&&(r+=e.army.data.offensive),t.army&&(n+=t.army.data.defensive),e.landmark&&(r+=e.landmark.data.offensive),t.landmark&&(n+=t.landmark.data.defensive),r+=a.game.util.getSupportBonus(e),n+=a.game.util.getSupportBonus(t),t.army&&(n-=t.army.exhaust),r>n?(t.army=e.army,e.army=void 0):r===n?t.army&&(t.army.exhaust+=.5):r<n&&(e.army=void 0,t.army&&(t.army.exhaust+=.25))}onHitProvince(e){var t,r;if(e.owner.id===(null===(t=e.army)||void 0===t?void 0:t.country.id)&&e.state===i.PROVINCE_STATE.FREE)return;if((null===(r=e.army)||void 0===r?void 0:r.state)!==n.ARMY_STATE.READY)return;let o=0,s=0;o+=a.game.random.dice(),s+=a.game.random.dice(),e.army&&(o+=e.army.data.breakthrough),e.landmark&&(s+=e.landmark.data.resistance),e.army&&(o-=e.army.exhaust),o+=a.game.util.getSupportBonus(e),o>s&&(e.owner.id===e.army.country.id?this.onFree(e):e.occupier&&e.occupier.id===e.army.country.id?this.onConquer(e):this.onOccupy(e),a.game.ui.ingameHandler(),a.game.tilemap.drawTile(e))}onMove(e,t){var r,a;t.army?this.onHit(e,t):(e.state===i.PROVINCE_STATE.INVADED&&e.owner.id!==(null===(r=e.army)||void 0===r?void 0:r.country.id)&&(e.state=i.PROVINCE_STATE.FREE),t.state===i.PROVINCE_STATE.FREE&&t.owner.id!==(null===(a=e.army)||void 0===a?void 0:a.country.id)&&(t.state=i.PROVINCE_STATE.INVADED),t.army=e.army,e.army=void 0)}onFree(e){e.occupier=void 0,e.state=i.PROVINCE_STATE.FREE,o.Landmark.addEffects(e)}onOccupy(e){var t;e.occupier=null===(t=e.army)||void 0===t?void 0:t.country,e.state=i.PROVINCE_STATE.OCCUPIED,o.Landmark.removeEffects(e)}onConquer(e){e.army&&(e.owner=e.army.country,e.occupier=void 0,e.state=i.PROVINCE_STATE.FREE,o.Landmark.addEffects(e))}onRecruit(e){}onDisband(e){var t;e.state===i.PROVINCE_STATE.INVADED&&e.owner.id!==(null===(t=e.army)||void 0===t?void 0:t.country.id)&&(e.state=i.PROVINCE_STATE.FREE)}}},6923:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ArmyNormal=void 0;const a=r(2290);class n extends a.ArmyData{constructor(){super(a.ARMY_ID.NORMAL,2,0,0,0)}}t.ArmyNormal=n},6551:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LandmarkData=t.LANDMARK_ID=void 0,(r=t.LANDMARK_ID||(t.LANDMARK_ID={}))[r.CAPITAL=0]="CAPITAL",r[r.CHURCH=1]="CHURCH",r[r.HOUSE=2]="HOUSE",r[r.MOUNTAINS=3]="MOUNTAINS",r[r.FOREST=4]="FOREST",r[r.TOWER=5]="TOWER",t.LandmarkData=class{constructor(e,t,r,a,n,o,i,s,c,d,l){this.id=e,this.cost=t,this.income=r,this.manpower=a,this.unique=n,this.recruitable=o,this.unbuildable=i,this.undestroyable=s,this.offensive=c,this.defensive=d,this.resistance=l}onBuild(e){}onDemolish(e){}}},6558:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LandmarkCapital=void 0;const a=r(6551);class n extends a.LandmarkData{constructor(){super(a.LANDMARK_ID.CAPITAL,0,1,3,!0,!0,!1,!0,0,0,2)}onBuild(e){e.owner.gold+=10}}t.LandmarkCapital=n},2967:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LandmarkChurch=void 0;const a=r(6551);class n extends a.LandmarkData{constructor(){super(a.LANDMARK_ID.CHURCH,4,1,0,!1,!1,!1,!1,0,0,-1)}}t.LandmarkChurch=n},4079:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LandmarkForest=void 0;const a=r(6551);class n extends a.LandmarkData{constructor(){super(a.LANDMARK_ID.FOREST,0,0,0,!1,!1,!0,!0,1,0,0)}}t.LandmarkForest=n},8569:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LandmarkHouse=void 0;const a=r(6551);class n extends a.LandmarkData{constructor(){super(a.LANDMARK_ID.HOUSE,2,0,1,!1,!0,!1,!1,0,0,1)}}t.LandmarkHouse=n},1579:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LandmarkMountains=void 0;const a=r(6551);class n extends a.LandmarkData{constructor(){super(a.LANDMARK_ID.MOUNTAINS,0,0,0,!1,!1,!0,!0,0,1,1)}}t.LandmarkMountains=n},4157:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LandmarkTower=void 0;const a=r(6551);class n extends a.LandmarkData{constructor(){super(a.LANDMARK_ID.TOWER,3,0,0,!1,!1,!1,!1,0,2,2)}}t.LandmarkTower=n},4188:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Game=void 0;const a=r(9764),n=r(5724),o=r(9404),i=r(662),s=r(1330),c=r(7543),d=r(2070),l=r(1228),u=r(2495),m=r(1711),h=r(5849);t.Game=class{constructor(){this.signals={onResize:new c.Signal},this.canvas=document.createElement("canvas");const e=this.canvas.getContext("2d");if(!e)throw Error("HTML Canvas is not supported in the browser.");this.ctx=e,document.body.appendChild(this.canvas),this.addEventListeners()}run(){this.util=new l.Util,this.maths=new o.Maths,this.random=new i.Random,this.resources=new s.Resources,this.input=new n.Input,this.camera=new a.Camera(0,0,window.innerWidth,window.innerHeight),this.tilemap=new d.Tilemap,this.gameplay=new m.Gameplay,this.ui=new h.UI,this.signals.onResize.dispatch(window.innerWidth,window.innerHeight),Promise.resolve().then((()=>this.resources.loadSprites())).then((()=>{this.ui.init()})).then((()=>{this.gameplay.create(10,10,0,[u.COUNTRY_ID.GREEN,u.COUNTRY_ID.PURPLE])})).then((()=>{this.gameplay.start()})).then((()=>{this.loop()}))}loop(){this.render(),window.requestAnimationFrame((()=>{this.loop()}))}update(){}render(){this.ctx.clearRect(0,0,this.camera.w,this.camera.h),this.tilemap.render()}addEventListeners(){window.addEventListener("resize",(()=>{this.signals.onResize.dispatch(window.innerWidth,window.innerHeight)}))}}},1711:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Gameplay=void 0;const a=r(3607),n=r(2495),o=r(6551),i=r(5849);t.Gameplay=class{create(e,t,r,o){this.countries=[],this.provinces=[],this.width=e,this.height=t,this.seed=r;for(let e=0;e<o.length;++e)this.countries[e]=new n.Country(o[e],0,0,0,0);a.game.tilemap.generate(e,t,r,this.countries,this.provinces)}start(){this.currentCountry=this.countries[0],this.currentProvince=void 0,this.turn=1,a.game.ui.clearPrevious(),a.game.ui.menuState=i.MENU_STATE.NONE,a.game.ui.ingameState=i.INGAME_STATE.MAIN,a.game.ui.appHandler(),a.game.ui.menuHandler(),a.game.ui.ingameHandler()}selectProvince(e){this.currentProvince=e,a.game.ui.ingameHandler()}nextTurn(){var e,t;if(a.game.util.hasLandmark(this.currentCountry,o.LANDMARK_ID.CAPITAL)){this.currentCountry.gold+=this.currentCountry.income;for(let r=0;r<this.provinces.length;++r)(null===(e=this.provinces[r].army)||void 0===e?void 0:e.country.id)===this.currentCountry.id&&(null===(t=this.provinces[r].army)||void 0===t||t.data.onUpdate(this.provinces[r]));for(let e=0;e<this.countries.length;++e)if(this.countries[e].id===this.currentCountry.id){this.currentCountry=this.countries[(e+1)%this.countries.length];break}a.game.ui.ingameHandler()}}undo(){}redo(){}save(){}load(){}}},824:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Landmark=void 0;const a=r(3607),n=r(6558),o=r(2967),i=r(4079),s=r(8569),c=r(1579),d=r(4157),l=r(6551),u=r(5067);class m{constructor(e){this.data=e}static create(e){switch(e){case l.LANDMARK_ID.CAPITAL:return new n.LandmarkCapital;case l.LANDMARK_ID.CHURCH:return new o.LandmarkChurch;case l.LANDMARK_ID.FOREST:return new i.LandmarkForest;case l.LANDMARK_ID.HOUSE:return new s.LandmarkHouse;case l.LANDMARK_ID.MOUNTAINS:return new c.LandmarkMountains;case l.LANDMARK_ID.TOWER:return new d.LandmarkTower;default:throw new Error(`Landmark with id ${e} doesn't exist.`)}}static availableToBuild(e,t,r){if(e.id!==t.owner.id)return!1;if(t.landmark)return!1;let n=a.game.util.hasLandmark(e,l.LANDMARK_ID.CAPITAL);n||(n=r.id===l.LANDMARK_ID.CAPITAL);let o=r.unique&&a.game.util.hasLandmark(e,r.id);return n&&!r.unbuildable&&!o}static canBuild(e,t,r){return t.state===u.PROVINCE_STATE.FREE&&!(e.gold<r.cost)}static availableToDemolish(e,t,r){return e.id===t.owner.id&&!!t.landmark&&!r.undestroyable}static canDemolish(e,t,r){return t.state===u.PROVINCE_STATE.FREE}static build(e,t,r){t&&m.availableToBuild(e,t,r)&&m.canBuild(e,t,r)&&(t.landmark=new m(r),e.gold-=r.cost,this.addEffects(t),r.onBuild(t),a.game.ui.ingameHandler(),a.game.tilemap.drawTile(t))}static demolish(e,t,r){t&&m.availableToDemolish(e,t,r)&&m.canDemolish(e,t,r)&&(this.removeEffects(t),t.landmark=void 0,r.onDemolish(t),a.game.ui.ingameHandler(),a.game.tilemap.drawTile(t))}static addEffects(e){e.landmark&&(e.owner.income+=e.landmark.data.income,e.owner.manpower+=e.landmark.data.manpower)}static removeEffects(e){e.landmark&&(e.owner.income-=e.landmark.data.income,e.owner.manpower-=e.landmark.data.manpower)}}t.Landmark=m},5067:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Province=t.PROVINCE_STATE=void 0;const a=r(1641);var n;!function(e){e[e.FREE=0]="FREE",e[e.INVADED=1]="INVADED",e[e.OCCUPIED=2]="OCCUPIED"}(n=t.PROVINCE_STATE||(t.PROVINCE_STATE={})),t.Province=class{constructor(e,t,r,a,o){this.pos=e,this.state=n.FREE,this.owner=t,this.occupier=r,this.landmark=a,this.army=o}static equals(e,t){return a.Vec2.equals(e.pos,t.pos)}static equalsArray(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(!a.Vec2.equals(e[r].pos,t[r].pos))return!1;return!0}}},5825:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.App=void 0;const a=r(2989),n=r(3607),o=r(5849),i=r(6361),s=r(7021);t.App=function(){const[e,t]=a.Soda.state(0);return n.game.ui.appHandler=t,a.Soda.createElement("div",null,n.game.ui.menuState===o.MENU_STATE.NONE?"":a.Soda.createElement(s.Menu,null),n.game.ui.ingameState===o.INGAME_STATE.NONE?"":a.Soda.createElement(i.Ingame,null))}},2325:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ICONS=void 0;const a=r(2989);t.ICONS={Back:function(e){return a.Soda.createElement("svg",{class:null==e?void 0:e.class,onclick:null==e?void 0:e.onclick,width:"32",height:"32",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"#000000",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},a.Soda.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.Soda.createElement("path",{d:"M9 13l-4 -4l4 -4m-4 4h11a4 4 0 0 1 0 8h-1"}))},Settings:function(e){return a.Soda.createElement("svg",{class:null==e?void 0:e.class,onclick:null==e?void 0:e.onclick,width:"32",height:"32",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"#000000",fill:"none","stroke-linecap":"round","stroke-linejoin":"round"},a.Soda.createElement("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),a.Soda.createElement("path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}),a.Soda.createElement("circle",{cx:"12",cy:"12",r:"3"}))}}},6361:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Ingame=void 0;const a=r(2989),n=r(3607),o=r(5849),i=r(2325),s=r(1807),c=r(9958),d=r(840),l=r(5004);t.Ingame=function(){const[e,t]=a.Soda.state(0);return n.game.ui.ingameHandler=t,a.Soda.createElement("div",{class:"ui-ingame"},a.Soda.createElement("div",{class:"__top"},a.Soda.createElement("img",{src:n.game.util.countryIdToSprite(n.game.gameplay.currentCountry.id)}),a.Soda.createElement("div",{class:"__info"},a.Soda.createElement("div",null,"Gold: ",n.game.gameplay.currentCountry.gold),a.Soda.createElement("div",null,"Income: ",n.game.gameplay.currentCountry.income)),a.Soda.createElement("div",{class:"__info"},a.Soda.createElement("div",null,"Army: ",n.game.gameplay.currentCountry.army),a.Soda.createElement("div",null,"Manpower: ",n.game.gameplay.currentCountry.manpower)),a.Soda.createElement(i.ICONS.Settings,{class:"__icon",onclick:()=>{n.game.ui.pushPrevious((()=>{n.game.ui.menuState=o.MENU_STATE.NONE,n.game.ui.ingameState=o.INGAME_STATE.MAIN,n.game.ui.appHandler(),n.game.ui.menuHandler(),n.game.ui.ingameHandler()})),n.game.ui.menuState=o.MENU_STATE.MAIN,n.game.ui.ingameState=o.INGAME_STATE.NONE,n.game.ui.appHandler(),n.game.ui.menuHandler(),n.game.ui.ingameHandler()}})),a.Soda.createElement("div",{class:"__bottom"},function(){switch(n.game.ui.ingameState){case o.INGAME_STATE.NONE:return"";case o.INGAME_STATE.MAIN:return a.Soda.createElement(s.Main,null);case o.INGAME_STATE.ARMY:return a.Soda.createElement(c.ArmyUI,null);case o.INGAME_STATE.BUILDING:return a.Soda.createElement(d.LandmarkUI,null);case o.INGAME_STATE.DIPLOMACY:return a.Soda.createElement(l.DiplomacyUI,null);default:throw new Error(`Ingame state with id ${n.game.ui.ingameState} not found.`)}}()))}},7021:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=void 0;const a=r(2989),n=r(3607),o=r(2325),i=r(7751),s=r(271),c=r(6454),d=r(8718),l=r(3849),u=r(5849);t.Menu=function(){const[e,t]=a.Soda.state(0);return n.game.ui.menuHandler=t,a.Soda.createElement("div",{class:"ui-menu"},a.Soda.createElement("div",{class:"__top"},a.Soda.createElement(o.ICONS.Back,{class:"__icon "+(n.game.ui.hasPrevious()?"":"__disabled"),onclick:()=>{n.game.ui.popPrevious()}}),a.Soda.createElement("div",{class:"__name-title"},"Lords and Lands"),a.Soda.createElement("div",{class:"__version-title"},"v0.0.1")),a.Soda.createElement("div",{class:"__bottom"},function(){switch(n.game.ui.menuState){case u.MENU_STATE.NONE:return"";case u.MENU_STATE.MAIN:return a.Soda.createElement(i.Main,null);case u.MENU_STATE.NEW:return a.Soda.createElement(s.New,null);case u.MENU_STATE.LOAD:return a.Soda.createElement(c.Load,null);case u.MENU_STATE.SAVE:return a.Soda.createElement(d.Save,null);case u.MENU_STATE.SETTINGS:return a.Soda.createElement(l.Settings,null);default:throw new Error(`Menu state with id ${n.game.ui.menuState} not found.`)}}()))}},9958:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ArmyUI=void 0;const a=r(2989),n=r(3607),o=r(2655),i=r(2290),s=r(5849);t.ArmyUI=function(){return a.Soda.createElement("div",null,a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.UI_ICON_ARMY,onclick:()=>{n.game.ui.ingameState=s.INGAME_STATE.MAIN,n.game.ui.ingameHandler()}}),a.Soda.createElement("img",{src:n.game.util.countryIdToSprite(n.game.gameplay.currentCountry.id),class:(e=>{if(!n.game.gameplay.currentProvince)return"__hidden";const t=o.Army.create(e);return o.Army.availableToRecruit(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,t)?o.Army.canRecruit(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,t)?void 0:"__disabled":"__hidden"})(i.ARMY_ID.NORMAL),onclick:()=>{(e=>{const t=o.Army.create(e);o.Army.recruit(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,t)})(i.ARMY_ID.NORMAL)}}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.UI_ICON_ARROW_RIGHT,class:(()=>{if(!n.game.gameplay.currentProvince)return"__hidden";if(!n.game.gameplay.currentProvince.army)return"__hidden";const e=n.game.gameplay.currentProvince.army.data;return o.Army.availableToMove(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,e)?o.Army.canMove(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,e)?void 0:"__disabled":"__hidden"})(),onclick:()=>{if(!n.game.gameplay.currentProvince)return;if(!n.game.gameplay.currentProvince.army)return;const e=n.game.gameplay.currentProvince.army.data;if(!o.Army.availableToMove(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,e)||!o.Army.canMove(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,e))return;const t=n.game.util.getAdjacentProvinces(n.game.gameplay.currentProvince),r=n.game.util.checkMoveableProvinces(t);n.game.tilemap.showProvinces(r)}}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.UI_ICON_CANCEL,class:(()=>{if(!n.game.gameplay.currentProvince)return"__hidden";if(!n.game.gameplay.currentProvince.army)return"__hidden";const e=n.game.gameplay.currentProvince.army.data;return o.Army.availableToDisband(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,e)?o.Army.canDisband(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,e)?void 0:"__disabled":"__hidden"})(),onclick:()=>{var e,t;const r=null===(t=null===(e=n.game.gameplay.currentProvince)||void 0===e?void 0:e.army)||void 0===t?void 0:t.data;r&&o.Army.disband(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,r)}}))}},5004:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DiplomacyUI=void 0;const a=r(2989),n=r(3607),o=r(5849);t.DiplomacyUI=function(){return a.Soda.createElement("div",null,a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.UI_ICON_DIPLOMACY,onclick:()=>{n.game.ui.ingameState=o.INGAME_STATE.MAIN,n.game.ui.ingameHandler()}}))}},840:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.LandmarkUI=void 0;const a=r(2989),n=r(3607),o=r(6551),i=r(824),s=r(5849);t.LandmarkUI=function(){const e=e=>{if(!n.game.gameplay.currentProvince)return"__hidden";const t=i.Landmark.create(e);return i.Landmark.availableToBuild(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,t)?i.Landmark.canBuild(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,t)?void 0:"__disabled":"__hidden"},t=e=>{const t=i.Landmark.create(e);i.Landmark.build(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,t)};return a.Soda.createElement("div",null,a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.UI_ICON_BUILDING,onclick:()=>{n.game.ui.ingameState=s.INGAME_STATE.MAIN,n.game.ui.ingameHandler()}}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.LANDMARK_CAPITAL,class:e(o.LANDMARK_ID.CAPITAL),onclick:()=>{t(o.LANDMARK_ID.CAPITAL)}}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.LANDMARK_CHURCH,class:e(o.LANDMARK_ID.CHURCH),onclick:()=>{t(o.LANDMARK_ID.CHURCH)}}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.LANDMARK_HOUSE,class:e(o.LANDMARK_ID.HOUSE),onclick:()=>{t(o.LANDMARK_ID.HOUSE)}}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.LANDMARK_TOWER,class:e(o.LANDMARK_ID.TOWER),onclick:()=>{t(o.LANDMARK_ID.TOWER)}}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.UI_ICON_CANCEL,class:(()=>{if(!n.game.gameplay.currentProvince)return"__hidden";if(!n.game.gameplay.currentProvince.landmark)return"__hidden";const e=n.game.gameplay.currentProvince.landmark.data;return i.Landmark.availableToDemolish(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,e)?i.Landmark.canDemolish(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,e)?void 0:"__disabled":"__hidden"})(),onclick:()=>{var e,t;const r=null===(t=null===(e=n.game.gameplay.currentProvince)||void 0===e?void 0:e.landmark)||void 0===t?void 0:t.data;r&&i.Landmark.demolish(n.game.gameplay.currentCountry,n.game.gameplay.currentProvince,r)}}))}},1807:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0;const a=r(2989),n=r(3607),o=r(5849);t.Main=function(){return a.Soda.createElement("div",{class:"__main"},a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.UI_ICON_ARMY,onclick:()=>{n.game.ui.ingameState=o.INGAME_STATE.ARMY,n.game.ui.ingameHandler()}}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.UI_ICON_BUILDING,onclick:()=>{n.game.ui.ingameState=o.INGAME_STATE.BUILDING,n.game.ui.ingameHandler()}}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.UI_ICON_DIPLOMACY,onclick:()=>{n.game.ui.ingameState=o.INGAME_STATE.DIPLOMACY,n.game.ui.ingameHandler()}}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.UI_ICON_ARROW_LEFT}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.UI_ICON_ARROW_RIGHT}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.UI_ICON_ARROW_RIGHT}),a.Soda.createElement("img",{src:n.game.resources.URL_SPRITES.LANDMARK_CAPITAL,onClick:()=>{n.game.gameplay.nextTurn()}}))}},6454:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Load=void 0;const a=r(2989);t.Load=function(){return a.Soda.createElement("div",null)}},7751:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Main=void 0;const a=r(2989),n=r(3607),o=r(5849);function i(){n.game.ui.menuState=o.MENU_STATE.MAIN,n.game.ui.menuHandler()}t.Main=function(){return a.Soda.createElement("div",{class:"__main"},a.Soda.createElement("button",{class:"__btn",onclick:()=>{n.game.ui.pushPrevious(i),n.game.ui.menuState=o.MENU_STATE.NEW,n.game.ui.menuHandler()}},"New"),a.Soda.createElement("button",{class:"__btn",onclick:()=>{n.game.ui.pushPrevious(i),n.game.ui.menuState=o.MENU_STATE.LOAD,n.game.ui.menuHandler()}},"Load"),a.Soda.createElement("button",{class:"__btn",onclick:()=>{n.game.ui.pushPrevious(i),n.game.ui.menuState=o.MENU_STATE.SAVE,n.game.ui.menuHandler()}},"Save"),a.Soda.createElement("button",{class:"__btn",onclick:()=>{n.game.ui.pushPrevious(i),n.game.ui.menuState=o.MENU_STATE.SETTINGS,n.game.ui.menuHandler()}},"Settings"))}},271:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.New=void 0;const a=r(2989),n=r(3607);t.New=function(){const[e,t]=a.Soda.state([!0,!0,!0,!0]),[r,o]=a.Soda.state({w:10,h:10}),i=r=>{let a=0;for(let t=0;t<e.length;++t)e[t]&&a++;e[r]&&2==a||(e[r]=!e[r],t(e))},s=(e,t)=>{r.w=n.game.maths.clamp(r.w+e,5,25),r.h=n.game.maths.clamp(r.h+t,5,25),o(r)};return a.Soda.createElement("div",{class:"__new"},a.Soda.createElement("div",{class:"__img-container"},a.Soda.createElement("img",{class:e[0]?"enabled":"disabled",onclick:()=>{i(0)},src:n.game.resources.URL_SPRITES.ARMY_GREEN_BIG}),a.Soda.createElement("img",{class:e[1]?"enabled":"disabled",onclick:()=>{i(1)},src:n.game.resources.URL_SPRITES.ARMY_YELLOW_BIG}),a.Soda.createElement("img",{class:e[2]?"enabled":"disabled",onclick:()=>{i(2)},src:n.game.resources.URL_SPRITES.ARMY_RED_BIG}),a.Soda.createElement("img",{class:e[3]?"enabled":"disabled",onclick:()=>{i(3)},src:n.game.resources.URL_SPRITES.ARMY_PURPLE_BIG})),a.Soda.createElement("div",null,"Seed: ",a.Soda.createElement("input",{type:"text",placeholder:"Seed..."})),a.Soda.createElement("div",null,a.Soda.createElement("span",null,"Width: "),a.Soda.createElement("button",{class:"btn",onClick:()=>{s(-1,0)}}," < "),a.Soda.createElement("span",null," ",r.w," "),a.Soda.createElement("button",{class:"btn",onClick:()=>{s(1,0)}}," > ")),a.Soda.createElement("div",null,a.Soda.createElement("span",null,"Height: "),a.Soda.createElement("button",{class:"btn",onClick:()=>{s(0,-1)}}," < "),a.Soda.createElement("span",null," ",r.h," "),a.Soda.createElement("button",{class:"btn",onClick:()=>{s(0,1)}}," > ")),a.Soda.createElement("div",null,a.Soda.createElement("button",{class:"btn",onclick:()=>{const t=[];for(let r=0;r<e.length;++r)e[r]&&t.push(r);n.game.gameplay.create(r.w,r.h,0,t)}},"Generate"),a.Soda.createElement("button",{class:"btn",onclick:()=>{n.game.gameplay.start()}},"Start")))}},8718:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Save=void 0;const a=r(2989);t.Save=function(){return a.Soda.createElement("div",null)}},3849:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=void 0;const a=r(2989);t.Settings=function(){return a.Soda.createElement("div",null)}},5849:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.UI=t.INGAME_STATE=t.MENU_STATE=void 0;const a=r(2989),n=r(5825);var o,i;!function(e){e[e.NONE=-1]="NONE",e[e.MAIN=0]="MAIN",e[e.NEW=1]="NEW",e[e.LOAD=2]="LOAD",e[e.SAVE=3]="SAVE",e[e.SETTINGS=4]="SETTINGS"}(o=t.MENU_STATE||(t.MENU_STATE={})),function(e){e[e.NONE=-1]="NONE",e[e.MAIN=0]="MAIN",e[e.ARMY=1]="ARMY",e[e.BUILDING=2]="BUILDING",e[e.DIPLOMACY=3]="DIPLOMACY"}(i=t.INGAME_STATE||(t.INGAME_STATE={})),t.UI=class{constructor(){this.menuState=o.MAIN,this.ingameState=i.NONE,this.previous=[]}init(){a.Soda.render(a.Soda.createElement(n.App,null),document.body)}pushPrevious(e){this.previous.push(e)}hasPrevious(){return this.previous.length>0}popPrevious(){const e=this.previous.pop();e&&e()}clearPrevious(){this.previous=[]}}},3607:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.game=void 0;const a=r(4188);r(9620),t.game=new a.Game,window.onload=()=>{t.game.run()}}},c={};function d(e){var t=c[e];if(void 0!==t){if(void 0!==t.error)throw t.error;return t.exports}var r=c[e]={id:e,exports:{}};try{var a={id:e,module:r,factory:s[e],require:d};d.i.forEach((function(e){e(a)})),r=a.module,a.factory.call(r.exports,r,r.exports,a.require)}catch(e){throw r.error=e,e}return r.exports}d.m=s,d.c=c,d.i=[],d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var r in t)d.o(t,r)&&!d.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},d.hu=e=>e+"."+d.h()+".hot-update.js",d.miniCssF=e=>{},d.hmrF=()=>"main."+d.h()+".hot-update.json",d.h=()=>"ed11b333e2df1e033993",d.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="lords-and-lands-web:",d.l=(r,a,n,o)=>{if(e[r])e[r].push(a);else{var i,s;if(void 0!==n)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==r||u.getAttribute("data-webpack")==t+n){i=u;break}}i||(s=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,d.nc&&i.setAttribute("nonce",d.nc),i.setAttribute("data-webpack",t+n),i.src=r),e[r]=[a];var m=(t,a)=>{i.onerror=i.onload=null,clearTimeout(h);var n=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((e=>e(a))),t)return t(a)},h=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),s&&document.head.appendChild(i)}},d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e,t,r,a,n={},o=d.c,i=[],s=[],c="idle";function l(e){c=e;for(var t=[],r=0;r<s.length;r++)t[r]=s[r].call(null,e);return Promise.all(t)}function u(e){if(0===t.length)return e();var r=t;return t=[],Promise.all(r).then((function(){return u(e)}))}function m(e){if("idle"!==c)throw new Error("check() is only allowed in idle status");return l("check").then(d.hmrM).then((function(a){return a?l("prepare").then((function(){var n=[];return t=[],r=[],Promise.all(Object.keys(d.hmrC).reduce((function(e,t){return d.hmrC[t](a.c,a.r,a.m,e,r,n),e}),[])).then((function(){return u((function(){return e?p(e):l("ready").then((function(){return n}))}))}))})):l(g()?"ready":"idle").then((function(){return null}))}))}function h(e){return"ready"!==c?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status")})):p(e)}function p(e){e=e||{},g();var t=r.map((function(t){return t(e)}));r=void 0;var n=t.map((function(e){return e.error})).filter(Boolean);if(n.length>0)return l("abort").then((function(){throw n[0]}));var o=l("dispose");t.forEach((function(e){e.dispose&&e.dispose()}));var i,s=l("apply"),c=function(e){i||(i=e)},d=[];return t.forEach((function(e){if(e.apply){var t=e.apply(c);if(t)for(var r=0;r<t.length;r++)d.push(t[r])}})),Promise.all([o,s]).then((function(){return i?l("fail").then((function(){throw i})):a?p(e).then((function(e){return d.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):l("idle").then((function(){return d}))}))}function g(){if(a)return r||(r=[]),Object.keys(d.hmrI).forEach((function(e){a.forEach((function(t){d.hmrI[e](t,r)}))})),a=void 0,!0}d.hmrD=n,d.i.push((function(p){var g,f,_,v,E=p.module,y=function(r,a){var n=o[a];if(!n)return r;var s=function(t){if(n.hot.active){if(o[t]){var s=o[t].parents;-1===s.indexOf(a)&&s.push(a)}else i=[a],e=t;-1===n.children.indexOf(t)&&n.children.push(t)}else console.warn("[HMR] unexpected require("+t+") from disposed module "+a),i=[];return r(t)},d=function(e){return{configurable:!0,enumerable:!0,get:function(){return r[e]},set:function(t){r[e]=t}}};for(var m in r)Object.prototype.hasOwnProperty.call(r,m)&&"e"!==m&&Object.defineProperty(s,m,d(m));return s.e=function(e){return function(e){switch(c){case"ready":return l("prepare"),t.push(e),u((function(){return l("ready")})),e;case"prepare":return t.push(e),e;default:return e}}(r.e(e))},s}(p.require,p.id);E.hot=(g=p.id,f=E,v={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:_=e!==g,_requireSelf:function(){i=f.parents.slice(),e=_?void 0:g,d(g)},active:!0,accept:function(e,t,r){if(void 0===e)v._selfAccepted=!0;else if("function"==typeof e)v._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var a=0;a<e.length;a++)v._acceptedDependencies[e[a]]=t||function(){},v._acceptedErrorHandlers[e[a]]=r;else v._acceptedDependencies[e]=t||function(){},v._acceptedErrorHandlers[e]=r},decline:function(e){if(void 0===e)v._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)v._declinedDependencies[e[t]]=!0;else v._declinedDependencies[e]=!0},dispose:function(e){v._disposeHandlers.push(e)},addDisposeHandler:function(e){v._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=v._disposeHandlers.indexOf(e);t>=0&&v._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,c){case"idle":r=[],Object.keys(d.hmrI).forEach((function(e){d.hmrI[e](g,r)})),l("ready");break;case"ready":Object.keys(d.hmrI).forEach((function(e){d.hmrI[e](g,r)}));break;case"prepare":case"check":case"dispose":case"apply":(a=a||[]).push(g)}},check:m,apply:h,status:function(e){if(!e)return c;s.push(e)},addStatusHandler:function(e){s.push(e)},removeStatusHandler:function(e){var t=s.indexOf(e);t>=0&&s.splice(t,1)},data:n[g]},e=void 0,v),E.parents=i,E.children=[],i=[],p.require=y})),d.hmrC={},d.hmrI={}})(),(()=>{var e;d.g.importScripts&&(e=d.g.location+"");var t=d.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");r.length&&(e=r[r.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),d.p=e})(),r=(e,t,r,a)=>{var n=document.createElement("link");return n.rel="stylesheet",n.type="text/css",n.onerror=n.onload=o=>{if(n.onerror=n.onload=null,"load"===o.type)r();else{var i=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=s,n.parentNode.removeChild(n),a(c)}},n.href=t,document.head.appendChild(n),n},a=(e,t)=>{for(var r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var n=(i=r[a]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(n===e||n===t))return i}var o=document.getElementsByTagName("style");for(a=0;a<o.length;a++){var i;if((n=(i=o[a]).getAttribute("data-href"))===e||n===t)return i}},n=[],o=[],i=e=>({dispose:()=>{for(var e=0;e<n.length;e++){var t=n[e];t.parentNode&&t.parentNode.removeChild(t)}n.length=0},apply:()=>{for(var e=0;e<o.length;e++)o[e].rel="stylesheet";o.length=0}}),d.hmrC.miniCss=(e,t,s,c,l,u)=>{l.push(i),e.forEach((e=>{var t=d.miniCssF(e),i=d.p+t,s=a(t,i);s&&c.push(new Promise(((t,a)=>{var c=r(e,i,(()=>{c.as="style",c.rel="preload",t()}),a);n.push(s),o.push(c)})))}))},(()=>{var e,t,r,a,n=d.hmrS_jsonp=d.hmrS_jsonp||{179:0},o={};function i(e){return new Promise(((t,r)=>{o[e]=t;var a=d.p+d.hu(e),n=new Error;d.l(a,(t=>{if(o[e]){o[e]=void 0;var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;n.message="Loading hot update chunk "+e+" failed.\n("+a+": "+i+")",n.name="ChunkLoadError",n.type=a,n.request=i,r(n)}}))}))}function s(o){function i(e){for(var t=[e],r={},a=t.map((function(e){return{chain:[e],id:e}}));a.length>0;){var n=a.pop(),o=n.id,i=n.chain,c=d.c[o];if(c&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:i,moduleId:o};if(c.hot._main)return{type:"unaccepted",chain:i,moduleId:o};for(var l=0;l<c.parents.length;l++){var u=c.parents[l],m=d.c[u];if(m){if(m.hot._declinedDependencies[o])return{type:"declined",chain:i.concat([u]),moduleId:o,parentId:u};-1===t.indexOf(u)&&(m.hot._acceptedDependencies[o]?(r[u]||(r[u]=[]),s(r[u],[o])):(delete r[u],t.push(u),a.push({chain:i.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:r}}function s(e,t){for(var r=0;r<t.length;r++){var a=t[r];-1===e.indexOf(a)&&e.push(a)}}d.f&&delete d.f.jsonpHmr,e=void 0;var c={},l=[],u={},m=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var h in t)if(d.o(t,h)){var p,g=t[h],f=!1,_=!1,v=!1,E="";switch((p=g?i(h):{type:"disposed",moduleId:h}).chain&&(E="\nUpdate propagation: "+p.chain.join(" -> ")),p.type){case"self-declined":o.onDeclined&&o.onDeclined(p),o.ignoreDeclined||(f=new Error("Aborted because of self decline: "+p.moduleId+E));break;case"declined":o.onDeclined&&o.onDeclined(p),o.ignoreDeclined||(f=new Error("Aborted because of declined dependency: "+p.moduleId+" in "+p.parentId+E));break;case"unaccepted":o.onUnaccepted&&o.onUnaccepted(p),o.ignoreUnaccepted||(f=new Error("Aborted because "+h+" is not accepted"+E));break;case"accepted":o.onAccepted&&o.onAccepted(p),_=!0;break;case"disposed":o.onDisposed&&o.onDisposed(p),v=!0;break;default:throw new Error("Unexception type "+p.type)}if(f)return{error:f};if(_)for(h in u[h]=g,s(l,p.outdatedModules),p.outdatedDependencies)d.o(p.outdatedDependencies,h)&&(c[h]||(c[h]=[]),s(c[h],p.outdatedDependencies[h]));v&&(s(l,[p.moduleId]),u[h]=m)}t=void 0;for(var y,I=[],S=0;S<l.length;S++){var A=l[S],T=d.c[A];T&&(T.hot._selfAccepted||T.hot._main)&&u[A]!==m&&!T.hot._selfInvalidated&&I.push({module:A,require:T.hot._requireSelf,errorHandler:T.hot._selfAccepted})}return{dispose:function(){var e;r.forEach((function(e){delete n[e]})),r=void 0;for(var t,a=l.slice();a.length>0;){var o=a.pop(),i=d.c[o];if(i){var s={},u=i.hot._disposeHandlers;for(S=0;S<u.length;S++)u[S].call(null,s);for(d.hmrD[o]=s,i.hot.active=!1,delete d.c[o],delete c[o],S=0;S<i.children.length;S++){var m=d.c[i.children[S]];m&&(e=m.parents.indexOf(o))>=0&&m.parents.splice(e,1)}}}for(var h in c)if(d.o(c,h)&&(i=d.c[h]))for(y=c[h],S=0;S<y.length;S++)t=y[S],(e=i.children.indexOf(t))>=0&&i.children.splice(e,1)},apply:function(e){for(var t in u)d.o(u,t)&&(d.m[t]=u[t]);for(var r=0;r<a.length;r++)a[r](d);for(var n in c)if(d.o(c,n)){var i=d.c[n];if(i){y=c[n];for(var s=[],m=[],h=[],p=0;p<y.length;p++){var g=y[p],f=i.hot._acceptedDependencies[g],_=i.hot._acceptedErrorHandlers[g];if(f){if(-1!==s.indexOf(f))continue;s.push(f),m.push(_),h.push(g)}}for(var v=0;v<s.length;v++)try{s[v].call(null,y)}catch(t){if("function"==typeof m[v])try{m[v](t,{moduleId:n,dependencyId:h[v]})}catch(r){o.onErrored&&o.onErrored({type:"accept-error-handler-errored",moduleId:n,dependencyId:h[v],error:r,originalError:t}),o.ignoreErrored||(e(r),e(t))}else o.onErrored&&o.onErrored({type:"accept-errored",moduleId:n,dependencyId:h[v],error:t}),o.ignoreErrored||e(t)}}}for(var E=0;E<I.length;E++){var S=I[E],A=S.module;try{S.require(A)}catch(t){if("function"==typeof S.errorHandler)try{S.errorHandler(t,{moduleId:A,module:d.c[A]})}catch(r){o.onErrored&&o.onErrored({type:"self-accept-error-handler-errored",moduleId:A,error:r,originalError:t}),o.ignoreErrored||(e(r),e(t))}else o.onErrored&&o.onErrored({type:"self-accept-errored",moduleId:A,error:t}),o.ignoreErrored||e(t)}}return l}}}self.webpackHotUpdatelords_and_lands_web=(e,r,n)=>{for(var i in r)d.o(r,i)&&(t[i]=r[i]);n&&a.push(n),o[e]&&(o[e](),o[e]=void 0)},d.hmrI.jsonp=function(e,n){t||(t={},a=[],r=[],n.push(s)),d.o(t,e)||(t[e]=d.m[e])},d.hmrC.jsonp=function(o,c,l,u,m,h){m.push(s),e={},r=c,t=l.reduce((function(e,t){return e[t]=!1,e}),{}),a=[],o.forEach((function(t){d.o(n,t)&&void 0!==n[t]&&(u.push(i(t)),e[t]=!0)})),d.f&&(d.f.jsonpHmr=function(t,r){e&&!d.o(e,t)&&d.o(n,t)&&void 0!==n[t]&&(r.push(i(t)),e[t]=!0)})},d.hmrM=()=>{if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(d.p+d.hmrF()).then((e=>{if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))}})(),d(3607)})();