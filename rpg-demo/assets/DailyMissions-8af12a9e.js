import{e as y,Q as i,W as E,G as I,n as u,r as j,h as A,g as R,j as s,F as c,C as M,T as D,S as T,f as b,m as G,k as $,X as S}from"./index-4dba57df.js";import{I as B}from"./ItemList-5ef079fe.js";var F=y("circle-check-filled","IconCircleCheckFilled",[["path",{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z",fill:"currentColor",key:"svg-0",strokeWidth:"0"}]]),P=y("circle","IconCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}]]);const n={progressCampaign:{count:1,rewards:{monsters:[{id:"Angel",level:1}]}},progressTower:{count:1,rewards:{monsters:[{id:"Angel",level:1}]}},killMonster:{count:10,rewards:{xp:1e3}},unlockMonster:{count:1,rewards:{food:1e4}},unlockItem:{count:1,rewards:{gold:1e4}},evolveMonster:{count:1,rewards:{food:1e4}},upgradeItem:{count:1,rewards:{gold:1e4}},swipeGameEvents:{count:100,rewards:{xp:1e4}},completeAllDailyMissions:{count:8,rewards:{diamond:1e3}}};i.progressCampaign.add(({data:e})=>{a(e,"progressCampaign")});i.progressTower.add(({data:e})=>{a(e,"progressTower")});i.killMonster.add(({data:e})=>{a(e,"killMonster")});i.unlockMonster.add(({data:e})=>{a(e,"unlockMonster")});i.unlockItem.add(({data:e})=>{a(e,"unlockItem")});i.evolveMonster.add(({data:e})=>{a(e,"evolveMonster")});i.upgradeItem.add(({data:e})=>{a(e,"upgradeItem")});i.swipeGameEvents.add(({data:e})=>{a(e,"swipeGameEvents")});function a(e,r){const t=e.dailyMissions[r];t.count=E.clamp(t.count+1,0,n[r].count),!(e.dailyMissions[r].count<n[r].count)&&r!=="completeAllDailyMissions"&&a(e,"completeAllDailyMissions")}const h={act:U,actable:k};function k(e,r){if(e.dailyMissions[r.mission].claimed)return!1;const t=e.dailyMissions[r.mission].count;return!(n[r.mission].count>t)}function U(e,r){k(e,r)&&(I.applyRewards(e,n[r.mission].rewards),e.dailyMissions[r.mission].claimed=!0)}const z={act:W,actable:C};function C(e,r){return!(Date.now()<I.getDailyMissionResetDate(e))}function W(e,r){C(e)&&(e.dailyMissionDate=Date.now(),Object.values(e.dailyMissions).forEach(t=>{t.count=0,t.claimed=!1}))}function N(){const e=u(l=>l.data),[r,t]=j.useState("");return j.useEffect(()=>{const l=setInterval(()=>{const d=A.util.getDailyMissionResetDate(e);Date.now()>d&&u.setState(m=>{z.act(m.data,{})}),t(R.formatDate(d))},1e3);return()=>clearInterval(l)},[]),s.jsx(c,{direction:"column",align:"center",gap:"md",mx:"md",my:80,children:s.jsx(M,{withBorder:!0,w:"100%",maw:360,children:s.jsxs(c,{direction:"column",gap:"md",children:[s.jsx(M,{withBorder:!0,children:s.jsx(D,{order:4,align:"center",children:`Reset: ${r}`})}),s.jsx(o,{mission:"completeAllDailyMissions"}),s.jsx(o,{mission:"progressCampaign"}),s.jsx(o,{mission:"progressTower"}),s.jsx(o,{mission:"killMonster"}),s.jsx(o,{mission:"unlockMonster"}),s.jsx(o,{mission:"evolveMonster"}),s.jsx(o,{mission:"unlockItem"}),s.jsx(o,{mission:"upgradeItem"}),s.jsx(o,{mission:"swipeGameEvents"})]})})})}function o({mission:e}){var f,v;const r=u(g=>g.data),t=r.dailyMissions[e].claimed,l=h.actable(r,{mission:e}),d=()=>{l&&u.setState(g=>{h.act(g.data,{mission:e})})},m=()=>{switch(e){case"completeAllDailyMissions":return"Complete All Daily Missions";case"progressCampaign":return"Progress Campaign";case"progressTower":return"Progress Tower";case"killMonster":return"Kill Monsters";case"unlockMonster":return"Unlock Monster";case"unlockItem":return"Unlock Item";case"evolveMonster":return"Evolve Monster";case"upgradeItem":return"Upgrade Item";case"swipeGameEvents":return"Swipe"}},p=(v=(f=n[e].rewards)==null?void 0:f.monsters)==null?void 0:v[0],w=r.dailyMissions[e].count,x=n[e].count;return s.jsx(M,{withBorder:!0,w:"100%",children:s.jsxs(c,{direction:"row",gap:"md",children:[s.jsxs(c,{direction:"column",align:"center",gap:"md",children:[s.jsx(c,{direction:"row",children:p?s.jsx(T,{src:b.url(G[p.id].path),count:p.level}):s.jsx(B,{diamond:n[e].rewards.diamond,gold:n[e].rewards.gold,food:n[e].rewards.food,xp:n[e].rewards.xp,items:n[e].rewards.items})}),s.jsx($,{onClick:d,disabled:!l,leftIcon:t?s.jsx(F,{}):s.jsx(P,{}),children:"Claim"})]}),s.jsxs(c,{direction:"column",gap:"md",style:{flex:1},children:[s.jsx(D,{order:5,children:`${m()} (${w}/${x})`}),s.jsx(S,{value:w/x*100})]})]})})}export{N as default};
