import{e as I,Q as i,W as C,G as D,n as m,r as f,h as E,g as A,j as s,F as c,C as M,T as y,S as T,f as G,m as S,k as R,X as $}from"./index-1168d81a.js";import{I as b}from"./ItemList-ea481be7.js";var B=I("circle-check-filled","IconCircleCheckFilled",[["path",{d:"M17 3.34a10 10 0 1 1 -14.995 8.984l-.005 -.324l.005 -.324a10 10 0 0 1 14.995 -8.336zm-1.293 5.953a1 1 0 0 0 -1.32 -.083l-.094 .083l-3.293 3.292l-1.293 -1.292l-.094 -.083a1 1 0 0 0 -1.403 1.403l.083 .094l2 2l.094 .083a1 1 0 0 0 1.226 0l.094 -.083l4 -4l.083 -.094a1 1 0 0 0 -.083 -1.32z",fill:"currentColor",key:"svg-0",strokeWidth:"0"}]]),F=I("circle","IconCircle",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}]]);const t={progressCampaign:{count:1,rewards:{monsters:[{id:"Angel",level:1}]}},progressTower:{count:1,rewards:{monsters:[{id:"Angel",level:1}]}},killMonster:{count:10,rewards:{xp:1e3}},unlockMonster:{count:1,rewards:{food:1e4}},unlockItem:{count:1,rewards:{gold:1e4}},evolveMonster:{count:1,rewards:{food:1e4}},upgradeItem:{count:1,rewards:{gold:1e4}},swipeGameEvents:{count:100,rewards:{xp:1e4}},completeAllDailyMissions:{count:8,rewards:{diamond:1e3}}};i.progressCampaign.add(({data:e})=>{o(e,"progressCampaign")});i.progressTower.add(({data:e})=>{o(e,"progressTower")});i.killMonster.add(({data:e})=>{o(e,"killMonster")});i.unlockMonster.add(({data:e})=>{o(e,"unlockMonster")});i.unlockItem.add(({data:e})=>{o(e,"unlockItem")});i.evolveMonster.add(({data:e})=>{o(e,"evolveMonster")});i.upgradeItem.add(({data:e})=>{o(e,"upgradeItem")});i.swipeGameEvents.add(({data:e})=>{o(e,"swipeGameEvents")});function o(e,r){const a=e.dailyMissions[r];a.count=C.clamp(a.count+1,0,t[r].count),!(e.dailyMissions[r].count<t[r].count)&&r!=="completeAllDailyMissions"&&o(e,"completeAllDailyMissions")}const h={act:P,actable:k};function k(e,r){if(e.dailyMissions[r.mission].claimed)return!1;const a=e.dailyMissions[r.mission].count;return!(t[r.mission].count>a)}function P(e,r){k(e,r)&&(D.applyRewards(e,t[r.mission].rewards),e.dailyMissions[r.mission].claimed=!0)}function W(){const e=m(l=>l.data),[r,a]=f.useState("");return f.useEffect(()=>{const l=setInterval(()=>{const d=e.dailyMissionDate+864e5;Date.now()>d&&m.setState(u=>{E.util.resetDailyMissions(u.data)}),a(A.formatDate(d))},1e3);return()=>clearInterval(l)},[]),s.jsx(c,{direction:"column",align:"center",gap:"md",mx:"md",my:80,children:s.jsx(M,{withBorder:!0,w:"100%",maw:360,children:s.jsxs(c,{direction:"column",gap:"md",children:[s.jsx(M,{withBorder:!0,children:s.jsx(y,{order:4,align:"center",children:`Reset: ${r}`})}),s.jsx(n,{mission:"completeAllDailyMissions"}),s.jsx(n,{mission:"progressCampaign"}),s.jsx(n,{mission:"progressTower"}),s.jsx(n,{mission:"killMonster"}),s.jsx(n,{mission:"unlockMonster"}),s.jsx(n,{mission:"evolveMonster"}),s.jsx(n,{mission:"unlockItem"}),s.jsx(n,{mission:"upgradeItem"}),s.jsx(n,{mission:"swipeGameEvents"})]})})})}function n({mission:e}){var v,j;const r=m(g=>g.data),a=r.dailyMissions[e].claimed,l=h.actable(r,{mission:e}),d=()=>{l&&m.setState(g=>{h.act(g.data,{mission:e})})},u=()=>{switch(e){case"completeAllDailyMissions":return"Complete All Daily Missions";case"progressCampaign":return"Progress Campaign";case"progressTower":return"Progress Tower";case"killMonster":return"Kill Monsters";case"unlockMonster":return"Unlock Monster";case"unlockItem":return"Unlock Item";case"evolveMonster":return"Evolve Monster";case"upgradeItem":return"Upgrade Item";case"swipeGameEvents":return"Swipe"}},p=(j=(v=t[e].rewards)==null?void 0:v.monsters)==null?void 0:j[0],w=r.dailyMissions[e].count,x=t[e].count;return s.jsx(M,{withBorder:!0,w:"100%",children:s.jsxs(c,{direction:"row",gap:"md",children:[s.jsxs(c,{direction:"column",align:"center",gap:"md",children:[s.jsx(c,{direction:"row",children:p?s.jsx(T,{src:G.url(S[p.id].path),count:p.level}):s.jsx(b,{diamond:t[e].rewards.diamond,gold:t[e].rewards.gold,food:t[e].rewards.food,xp:t[e].rewards.xp,items:t[e].rewards.items})}),s.jsx(R,{onClick:d,disabled:!l,leftIcon:a?s.jsx(B,{}):s.jsx(F,{}),children:"Claim"})]}),s.jsxs(c,{direction:"column",gap:"md",style:{flex:1},children:[s.jsx(y,{order:5,children:`${u()} (${w}/${x})`}),s.jsx($,{value:w/x*100})]})]})})}export{W as default};
