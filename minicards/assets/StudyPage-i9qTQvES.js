import{q as X,f as P,u as A,j as i,B as H,b as K,d as Z,h as ee,i as te,H as q,N as se,O as re,A as ie,Q as T,S as ne,r as w,G as oe,o as M,J as ae,F as y,L as le,l as _,U as ce,T as F,w as O,k as V}from"./index-DjykrxEX.js";import{u as B,C as W}from"./dexie-react-hooks-BTWxocMR.js";import{m as $}from"./motion-CzsAcyyV.js";import{T as de,I as ue}from"./IconX-OcHtAN1e.js";function me(n,o){return typeof n=="boolean"?n:o.autoContrast}const[xe,G]=X("Progress.Root component was not found in tree");var N={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const fe={},I=P((n,o)=>{const{classNames:r,className:a,style:p,styles:l,vars:h,...u}=A("ProgressLabel",fe,n),x=G();return i.jsx(H,{ref:o,...x.getStyles("label",{className:a,style:p,classNames:r,styles:l}),...u})});I.classes=N;I.displayName="@mantine/core/ProgressLabel";const pe={},he=Z((n,{size:o,radius:r,transitionDuration:a})=>({root:{"--progress-size":ee(o,"progress-size"),"--progress-radius":r===void 0?void 0:te(r),"--progress-transition-duration":typeof a=="number"?`${a}ms`:void 0}})),C=P((n,o)=>{const r=A("ProgressRoot",pe,n),{classNames:a,className:p,style:l,styles:h,unstyled:u,vars:x,autoContrast:e,transitionDuration:t,...s}=r,c=K({name:"Progress",classes:N,props:r,className:p,style:l,classNames:a,styles:h,unstyled:u,vars:x,varsResolver:he});return i.jsx(xe,{value:{getStyles:c,autoContrast:e},children:i.jsx(H,{ref:o,...c("root"),...s})})});C.classes=N;C.displayName="@mantine/core/ProgressRoot";const ge={withAria:!0},L=P((n,o)=>{const{classNames:r,className:a,style:p,styles:l,vars:h,value:u,withAria:x,color:e,striped:t,animated:s,mod:c,...d}=A("ProgressSection",ge,n),f=G(),m=q(),g=x?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":u,"aria-valuetext":`${u}%`}:{};return i.jsx(H,{ref:o,...f.getStyles("section",{className:a,classNames:r,styles:l,style:p}),...d,...g,mod:[{striped:t||s,animated:s},c],__vars:{"--progress-section-width":`${u}%`,"--progress-section-color":se(e,m),"--progress-label-color":me(f.autoContrast,m)?re({color:e,theme:m}):void 0}})});L.classes=N;L.displayName="@mantine/core/ProgressSection";const ye={},j=P((n,o)=>{const r=A("Progress",ye,n),{value:a,classNames:p,styles:l,vars:h,color:u,striped:x,animated:e,"aria-label":t,...s}=r,{resolvedClassNames:c,resolvedStyles:d}=ie({classNames:p,styles:l,props:r});return i.jsx(C,{ref:o,classNames:c,styles:d,vars:h,...s,children:i.jsx(L,{value:a,color:u,striped:x,animated:e,"aria-label":t})})});j.classes=N;j.displayName="@mantine/core/Progress";j.Section=L;j.Root=C;j.Label=I;function ve(n){return new Promise(o=>{setTimeout(o,n)})}var we="_16rvb9k0",je="_16rvb9k1",Se="_16rvb9k2",be="_16rvb9k3",Q={exports:{}};(function(n,o){(function(r,a){n.exports=a()})(typeof T=="object"?T:T,function(){var r={alignVert:!1,alignHoriz:!1,multiLine:!1,detectMultiLine:!0,minFontSize:6,maxFontSize:80,reProcess:!0,widthOnly:!1,alignVertWithFlexbox:!1};return function(t,s){s||(s={});var c={};for(var d in r)s.hasOwnProperty(d)?c[d]=s[d]:c[d]=r[d];typeof t.toArray=="function"&&(t=t.toArray());var f=Object.prototype.toString.call(t);f!=="[object Array]"&&f!=="[object NodeList]"&&f!=="[object HTMLCollection]"&&(t=[t]);for(var m=0;m<t.length;m++)a(t[m],c)};function a(e,t){if(!h(e)||!t.reProcess&&e.getAttribute("textFitted"))return!1;t.reProcess||e.setAttribute("textFitted",1);var s,c,d,f,m,g,v;if(d=e.innerHTML,f=l(e),c=p(e),!f||!t.widthOnly&&!c)throw t.widthOnly?new Error("Set a static width on the target element "+e.outerHTML+" before using textFit!"):new Error("Set a static height and width on the target element "+e.outerHTML+" before using textFit!");d.indexOf("textFitted")===-1?(s=document.createElement("span"),s.className="textFitted",s.style.display="inline-block",s.innerHTML=d,e.innerHTML="",e.appendChild(s)):(s=e.querySelector("span.textFitted"),u(s,"textFitAlignVert")&&(s.className=s.className.replace("textFitAlignVert",""),s.style.height="",e.className.replace("textFitAlignVertFlex",""))),t.alignHoriz&&(e.style["text-align"]="center",s.style["text-align"]="center");var S=t.multiLine;t.detectMultiLine&&!S&&s.scrollHeight>=parseInt(window.getComputedStyle(s)["font-size"],10)*2&&(S=!0),S||(e.style["white-space"]="nowrap"),m=t.minFontSize,v=t.maxFontSize;for(var b=m;m<=v;)g=v+m>>1,s.style.fontSize=g+"px",s.scrollWidth<=f&&(t.widthOnly||s.scrollHeight<=c)?(b=g,m=g+1):v=g-1;if(s.style.fontSize!=b+"px"&&(s.style.fontSize=b+"px"),t.alignVert){x();var z=s.scrollHeight;window.getComputedStyle(e).position==="static"&&(e.style.position="relative"),u(s,"textFitAlignVert")||(s.className=s.className+" textFitAlignVert"),s.style.height=z+"px",t.alignVertWithFlexbox&&!u(e,"textFitAlignVertFlex")&&(e.className=e.className+" textFitAlignVertFlex")}}function p(e){var t=window.getComputedStyle(e,null);return e.clientHeight-parseInt(t.getPropertyValue("padding-top"),10)-parseInt(t.getPropertyValue("padding-bottom"),10)}function l(e){var t=window.getComputedStyle(e,null);return e.clientWidth-parseInt(t.getPropertyValue("padding-left"),10)-parseInt(t.getPropertyValue("padding-right"),10)}function h(e){return typeof HTMLElement=="object"?e instanceof HTMLElement:e&&typeof e=="object"&&e!==null&&e.nodeType===1&&typeof e.nodeName=="string"}function u(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1}function x(){if(!document.getElementById("textFitStyleSheet")){var e=[".textFitAlignVert{","position: absolute;","top: 0; right: 0; bottom: 0; left: 0;","margin: auto;","display: flex;","justify-content: center;","flex-direction: column;","}",".textFitAlignVertFlex{","display: flex;","}",".textFitAlignVertFlex .textFitAlignVert{","position: static;","}"].join(""),t=document.createElement("style");t.type="text/css",t.id="textFitStyleSheet",t.innerHTML=e,document.body.appendChild(t)}}})})(Q);var Fe=Q.exports;const Ne=ne(Fe);function D(n){const o=w.useRef(null);return w.useLayoutEffect(()=>{const r=()=>{o.current&&Ne(o.current,n)};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)}),[o]}function Te(){var R,E,k;const n=oe(),o=(R=B(()=>n.id?M.decks.where({id:n.id}).toArray():[],[n.id]))==null?void 0:R[0],r=B(async()=>n.id?(await M.noteCards.where({deckId:n.id}).toArray()).sort((Y,J)=>Y.order-J.order):[],[n.id]),a=q(),p=ae(),[l,h]=w.useState(0),u=(r&&r.length>0?l/r.length:0)*100,[x,e]=w.useState(!1),[t,s]=w.useState(!1),[c,d]=w.useState(!0),[f,m]=w.useState(!1),g=async()=>{r&&(r.length>l||f||(m(!0),await ve(1e3),b()))},v=()=>{r&&(l+1>r.length||(h(l+1),e(!1),d(!1)))},S=()=>{t||(e(!x),s(!0),d(!0))},b=()=>{p(-1)},[z]=D({alignVert:!0,multiLine:!0,minFontSize:16,maxFontSize:24}),[U]=D({alignVert:!0,multiLine:!0,minFontSize:16,maxFontSize:24});return i.jsxs(y,{component:$.div,initial:{opacity:0},animate:{opacity:1},direction:"column",mx:"auto",maw:a.breakpoints.xs,h:"100%",mah:"100%",children:[i.jsx(y,{h:64,style:{flexShrink:0},children:i.jsxs(y,{align:"center",gap:"xs",px:"md",w:"100%",h:"100%",children:[i.jsx(le,{onClick:b,size:48,variant:"subtle",children:i.jsx(de,{variant:"transparent",color:"gray",children:i.jsx(ue,{size:32})})}),i.jsx(j.Root,{size:"xl",style:{flex:1},transitionDuration:500,onTransitionEnd:g,children:i.jsx(j.Section,{value:u,color:"green"})}),i.jsx("div",{style:{width:48,height:48}})]})}),i.jsxs(y,{direction:"column",justify:"center",gap:"xl",px:"md",pb:64,h:"100%",mih:0,children:[i.jsxs(y,{direction:"column",children:[i.jsx(_,{order:6,c:"gray",children:"Collection"}),i.jsx(_,{order:4,className:ce,children:o==null?void 0:o.title})]}),i.jsx(y,{onClick:S,w:"100%",className:we,style:{aspectRatio:1},children:i.jsxs($.div,{initial:!1,animate:{rotateY:x?180:360},transition:{duration:c?.5:0,animationDirection:"normal"},onAnimationComplete:()=>s(!1),className:je,children:[i.jsx(W,{withBorder:!0,shadow:"xl",w:"100%",h:"100%",className:Se,children:i.jsx(y,{direction:"column",align:"center",justify:"center",w:"100%",h:"100%",children:i.jsx(F,{ref:z,ta:"center",w:"100%",h:"100%",mah:"100%",className:O,children:(E=r==null?void 0:r[l])==null?void 0:E.front})})}),i.jsx(W,{withBorder:!0,shadow:"xl",w:"100%",h:"100%",className:be,children:i.jsx(y,{direction:"column",align:"center",justify:"center",w:"100%",h:"100%",children:i.jsx(F,{ref:U,ta:"center",w:"100%",h:"100%",mah:"100%",className:O,children:(k=r==null?void 0:r[l])==null?void 0:k.back})})})]})}),i.jsxs(y,{justify:"space-between",gap:"xs",children:[i.jsx(V,{onClick:v,variant:"light",color:"red",px:0,miw:48,mih:48,style:{flex:1},children:i.jsx(F,{fw:600,children:"HARD"})}),i.jsx(V,{onClick:S,variant:"light",color:"gray",px:0,miw:48,mih:48,style:{flex:1},children:i.jsx(F,{fw:600,children:"FLIP"})}),i.jsx(V,{onClick:v,variant:"light",px:0,miw:48,mih:48,style:{flex:1},children:i.jsx(F,{fw:600,children:"EASY"})})]})]})]})}export{Te as default};
