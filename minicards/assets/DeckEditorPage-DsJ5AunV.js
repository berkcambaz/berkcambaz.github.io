import{r as l,j as y,b as Tr,f as Re,c as ee,e as Pe,h as Ee,i as rt,k as Ce,l as De,m as Nr,p as Bn,n as Fn,o as fn,q as Ar,s as Or,B as Ve,F as we,T as qe,w as Mr,R as P,t as je,M as kr,v as jr,d as Q,x as zr,y as Pr,P as Lr,A as _r,a as pn,g as $r}from"./index-DsSBX80C.js";import{C as Br,u as hn}from"./dexie-react-hooks-DS114KN0.js";import{m as Fr}from"./motion-C1-VN7ep.js";import{T as Wr,I as Hr}from"./IconX-BPTbTpoF.js";import{D as gn}from"./Divider-apC-_4mU.js";function Xr(e=null){const t=l.createContext(e);return[({children:o,value:s})=>y.jsx(t.Provider,{value:s,children:o}),()=>l.useContext(t)]}function vn(){if(typeof window>"u")return"undetermined";const{userAgent:e}=window.navigator,t=/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i,n=/(Win32)|(Win64)|(Windows)|(WinCE)/i,r=/(iPhone)|(iPad)|(iPod)/i;return t.test(e)?"macos":r.test(e)?"ios":n.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function Ur(e={getValueInEffect:!0}){const[t,n]=l.useState(e.getValueInEffect?"undetermined":vn());return Tr(()=>{e.getValueInEffect&&n(vn)},[]),t}function Yr(e=!1,t){const{onOpen:n,onClose:r}={},[o,s]=l.useState(e),i=l.useCallback(()=>{s(u=>u||(n==null||n(),!0))},[n]),a=l.useCallback(()=>{s(u=>u&&(r==null||r(),!1))},[r]),c=l.useCallback(()=>{o?a():i()},[a,i,o]);return[o,{open:i,close:a,toggle:c}]}var Kr={};function Vr(){return typeof process<"u"&&Kr?"production":"development"}const[qr,St]=Xr({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var ne={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const bn={},Gr=rt((e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Ce(t)} - ${De(2)})`}})),Ct=Re((e,t)=>{const n=ee("InputDescription",bn,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:c,size:u,__staticSelector:f,__inheritStyles:d=!0,variant:h,...p}=ee("InputDescription",bn,n),b=St(),g=Pe({name:["InputWrapper",f],props:n,classes:ne,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"description",vars:c,varsResolver:Gr}),v=d&&(b==null?void 0:b.getStyles)||g;return y.jsx(Ee,{component:"p",ref:t,variant:h,size:u,...v("description",b!=null&&b.getStyles?{className:o,style:s}:void 0),...p})});Ct.classes=ne;Ct.displayName="@mantine/core/InputDescription";const Jr={},Qr=rt((e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Ce(t)} - ${De(2)})`}})),Et=Re((e,t)=>{const n=ee("InputError",Jr,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:c,size:u,__staticSelector:f,__inheritStyles:d=!0,variant:h,...p}=n,b=Pe({name:["InputWrapper",f],props:n,classes:ne,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"error",vars:c,varsResolver:Qr}),g=St(),v=d&&(g==null?void 0:g.getStyles)||b;return y.jsx(Ee,{component:"p",ref:t,variant:h,size:u,...v("error",g!=null&&g.getStyles?{className:o,style:s}:void 0),...p})});Et.classes=ne;Et.displayName="@mantine/core/InputError";const mn={labelElement:"label"},Zr=rt((e,{size:t})=>({label:{"--input-label-size":Ce(t),"--input-asterisk-color":void 0}})),Dt=Re((e,t)=>{const n=ee("InputLabel",mn,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:c,labelElement:u,size:f,required:d,htmlFor:h,onMouseDown:p,children:b,__staticSelector:g,variant:v,mod:x,...w}=ee("InputLabel",mn,n),m=Pe({name:["InputWrapper",g],props:n,classes:ne,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"label",vars:c,varsResolver:Zr}),S=St(),D=(S==null?void 0:S.getStyles)||m;return y.jsxs(Ee,{...D("label",S!=null&&S.getStyles?{className:o,style:s}:void 0),component:u,variant:v,size:f,ref:t,htmlFor:u==="label"?h:void 0,mod:[{required:d},x],onMouseDown:C=>{p==null||p(C),!C.defaultPrevented&&C.detail>1&&C.preventDefault()},...w,children:[b,d&&y.jsx("span",{...D("required"),"aria-hidden":!0,children:" *"})]})});Dt.classes=ne;Dt.displayName="@mantine/core/InputLabel";const yn={},Xt=Re((e,t)=>{const n=ee("InputPlaceholder",yn,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:c,__staticSelector:u,variant:f,error:d,mod:h,...p}=ee("InputPlaceholder",yn,n),b=Pe({name:["InputPlaceholder",u],props:n,classes:ne,className:o,style:s,classNames:r,styles:i,unstyled:a,rootSelector:"placeholder"});return y.jsx(Ee,{...b("placeholder"),mod:[{error:!!d},h],component:"span",variant:f,ref:t,...p})});Xt.classes=ne;Xt.displayName="@mantine/core/InputPlaceholder";function eo(e,{hasDescription:t,hasError:n}){const r=e.findIndex(c=>c==="input"),o=e.slice(0,r),s=e.slice(r+1),i=t&&o.includes("description")||n&&o.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:i}}const to={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},no=rt((e,{size:t})=>({label:{"--input-label-size":Ce(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Ce(t)} - ${De(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Ce(t)} - ${De(2)})`}})),Ut=Re((e,t)=>{const n=ee("InputWrapper",to,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,vars:c,size:u,variant:f,__staticSelector:d,inputContainer:h,inputWrapperOrder:p,label:b,error:g,description:v,labelProps:x,descriptionProps:w,errorProps:m,labelElement:S,children:D,withAsterisk:C,id:E,required:R,__stylesApiProps:N,mod:A,...T}=n,L=Pe({name:["InputWrapper",d],props:N||n,classes:ne,className:o,style:s,classNames:r,styles:i,unstyled:a,vars:c,varsResolver:no}),M={size:u,variant:f,__staticSelector:d},z=Nr(E),k=typeof C=="boolean"?C:R,H=(m==null?void 0:m.id)||`${z}-error`,_=(w==null?void 0:w.id)||`${z}-description`,pe=z,j=!!g&&typeof g!="boolean",re=!!v,q=`${j?H:""} ${re?_:""}`,B=q.trim().length>0?q.trim():void 0,G=(x==null?void 0:x.id)||`${z}-label`,he=b&&y.jsx(Dt,{labelElement:S,id:G,htmlFor:pe,required:k,...M,...x,children:b},"label"),Se=re&&y.jsx(Ct,{...w,...M,size:(w==null?void 0:w.size)||M.size,id:(w==null?void 0:w.id)||_,children:v},"description"),Y=y.jsx(l.Fragment,{children:h(D)},"input"),Ie=j&&l.createElement(Et,{...m,...M,size:(m==null?void 0:m.size)||M.size,key:"error",id:(m==null?void 0:m.id)||H},g),ue=p.map(oe=>{switch(oe){case"label":return he;case"input":return Y;case"description":return Se;case"error":return Ie;default:return null}});return y.jsx(qr,{value:{getStyles:L,describedBy:B,inputId:pe,labelId:G,...eo(p,{hasDescription:re,hasError:j})},children:y.jsx(Ee,{ref:t,variant:f,size:u,mod:[{error:!!g},A],...L("root"),...T,children:ue})})});Ut.classes=ne;Ut.displayName="@mantine/core/InputWrapper";const ro={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},oo=rt((e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":fn(t.size,"input-height"),"--input-fz":Ce(t.size),"--input-radius":t.radius===void 0?void 0:Ar(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?De(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?De(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?fn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}})),ce=Bn((e,t)=>{const n=ee("Input",ro,e),{classNames:r,className:o,style:s,styles:i,unstyled:a,required:c,__staticSelector:u,__stylesApiProps:f,size:d,wrapperProps:h,error:p,disabled:b,leftSection:g,leftSectionProps:v,leftSectionWidth:x,rightSection:w,rightSectionProps:m,rightSectionWidth:S,rightSectionPointerEvents:D,leftSectionPointerEvents:C,variant:E,vars:R,pointer:N,multiline:A,radius:T,id:L,withAria:M,withErrorStyles:z,mod:k,...H}=n,{styleProps:_,rest:pe}=Fn(H),j=St(),re={offsetBottom:j==null?void 0:j.offsetBottom,offsetTop:j==null?void 0:j.offsetTop},q=Pe({name:["Input",u],props:f||n,classes:ne,className:o,style:s,classNames:r,styles:i,unstyled:a,stylesCtx:re,rootSelector:"wrapper",vars:R,varsResolver:oo}),B=M?{required:c,disabled:b,"aria-invalid":!!p,"aria-describedby":j==null?void 0:j.describedBy,id:(j==null?void 0:j.inputId)||L}:{};return y.jsxs(Ee,{...q("wrapper"),..._,...h,mod:[{error:!!p&&z,pointer:N,disabled:b,multiline:A,"data-with-right-section":!!w,"data-with-left-section":!!g},k],variant:E,size:d,children:[g&&y.jsx("div",{...v,"data-position":"left",...q("section",{className:v==null?void 0:v.className,style:v==null?void 0:v.style}),children:g}),y.jsx(Ee,{component:"input",...pe,...B,ref:t,required:c,mod:{disabled:b,error:!!p&&z},variant:E,...q("input")}),w&&y.jsx("div",{...m,"data-position":"right",...q("section",{className:m==null?void 0:m.className,style:m==null?void 0:m.style}),children:w})]})});ce.classes=ne;ce.Wrapper=Ut;ce.Label=Dt;ce.Error=Et;ce.Description=Ct;ce.Placeholder=Xt;ce.displayName="@mantine/core/Input";function so(e,t,n){const r=ee(e,t,n),{label:o,description:s,error:i,required:a,classNames:c,styles:u,className:f,unstyled:d,__staticSelector:h,__stylesApiProps:p,errorProps:b,labelProps:g,descriptionProps:v,wrapperProps:x,id:w,size:m,style:S,inputContainer:D,inputWrapperOrder:C,withAsterisk:E,variant:R,vars:N,mod:A,...T}=r,{styleProps:L,rest:M}=Fn(T),z={label:o,description:s,error:i,required:a,classNames:c,className:f,__staticSelector:h,__stylesApiProps:p||r,errorProps:b,labelProps:g,descriptionProps:v,unstyled:d,styles:u,size:m,style:S,inputContainer:D,inputWrapperOrder:C,withAsterisk:E,variant:R,id:w,mod:A,...x};return{...M,classNames:c,styles:u,unstyled:d,wrapperProps:{...z,...L},inputProps:{required:a,classNames:c,styles:u,unstyled:d,size:m,__staticSelector:h,__stylesApiProps:p||r,error:i,variant:R,id:w}}}const io={__staticSelector:"InputBase",withAria:!0},Le=Bn((e,t)=>{const{inputProps:n,wrapperProps:r,...o}=so("InputBase",io,e);return y.jsx(ce.Wrapper,{...r,children:y.jsx(ce,{...n,...o,ref:t})})});Le.classes={...ce.classes,...ce.Wrapper.classes};Le.displayName="@mantine/core/InputBase";function Bt(){return Bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bt.apply(this,arguments)}function ao(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var co=l.useLayoutEffect,lo=function(t){var n=l.useRef(t);return co(function(){n.current=t}),n},wn=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},uo=function(t,n){var r=l.useRef();return l.useCallback(function(o){t.current=o,r.current&&wn(r.current,null),r.current=n,n&&wn(n,o)},[n])},xn={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},fo=function(t){Object.keys(xn).forEach(function(n){t.style.setProperty(n,xn[n],"important")})},Sn=fo,X=null,Cn=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function po(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),X||(X=document.createElement("textarea"),X.setAttribute("tabindex","-1"),X.setAttribute("aria-hidden","true"),Sn(X)),X.parentNode===null&&document.body.appendChild(X);var o=e.paddingSize,s=e.borderSize,i=e.sizingStyle,a=i.boxSizing;Object.keys(i).forEach(function(h){var p=h;X.style[p]=i[p]}),Sn(X),X.value=t;var c=Cn(X,e);X.value=t,c=Cn(X,e),X.value="x";var u=X.scrollHeight-o,f=u*n;a==="border-box"&&(f=f+o+s),c=Math.max(f,c);var d=u*r;return a==="border-box"&&(d=d+o+s),c=Math.min(d,c),[c,u]}var En=function(){},ho=function(t,n){return t.reduce(function(r,o){return r[o]=n[o],r},{})},go=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],vo=!!document.documentElement.currentStyle,bo=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=ho(go,n),o=r.boxSizing;if(o==="")return null;vo&&o==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:i}},mo=bo;function Wn(e,t,n){var r=lo(n);l.useLayoutEffect(function(){var o=function(i){return r.current(i)};if(e)return e.addEventListener(t,o),function(){return e.removeEventListener(t,o)}},[])}var yo=function(t){Wn(window,"resize",t)},wo=function(t){Wn(document.fonts,"loadingdone",t)},xo=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],So=function(t,n){var r=t.cacheMeasurements,o=t.maxRows,s=t.minRows,i=t.onChange,a=i===void 0?En:i,c=t.onHeightChange,u=c===void 0?En:c,f=ao(t,xo),d=f.value!==void 0,h=l.useRef(null),p=uo(h,n),b=l.useRef(0),g=l.useRef(),v=function(){var m=h.current,S=r&&g.current?g.current:mo(m);if(S){g.current=S;var D=po(S,m.value||m.placeholder||"x",s,o),C=D[0],E=D[1];b.current!==C&&(b.current=C,m.style.setProperty("height",C+"px","important"),u(C,{rowHeight:E}))}},x=function(m){d||v(),a(m)};return l.useLayoutEffect(v),yo(v),wo(v),l.createElement("textarea",Bt({},f,{onChange:x,ref:p}))},Co=l.forwardRef(So);const Eo={},ht=Re((e,t)=>{const{autosize:n,maxRows:r,minRows:o,__staticSelector:s,resize:i,...a}=ee("Textarea",Eo,e),c=n&&Vr()!=="test",u=c?{maxRows:r,minRows:o}:{};return y.jsx(Le,{component:c?Co:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":i},...u})});ht.classes=Le.classes;ht.displayName="@mantine/core/Textarea";const Do={},gt=Re((e,t)=>{const n=ee("TextInput",Do,e);return y.jsx(Le,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});gt.classes=Le.classes;gt.displayName="@mantine/core/TextInput";/**
 * @license @tabler/icons-react v3.4.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ro=Or("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);const Io=l.forwardRef(({children:e,style:t,...n},r)=>y.jsx(Ve,{variant:"transparent",px:0,w:"100%",h:"100%",style:{...t,aspectRatio:"3 / 4"},styles:{root:{overflow:"visible"},label:{overflow:"visible",flex:1}},ref:r,...n,children:y.jsx(Br,{withBorder:!0,w:"100%",h:"100%",shadow:"xs",children:y.jsx(we,{align:"center",justify:"center",w:"100%",h:"100%",style:{display:"grid",gridTemplateColumns:"auto"},children:e})})})),Hn=Io,To=l.forwardRef(({deckCard:e,onClick:t,...n},r)=>y.jsx(Hn,{onClick:()=>t==null?void 0:t(e),ref:r,...n,children:y.jsx(qe,{lineClamp:6,className:Mr,children:e.front})})),Xn=To;function No(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const Rt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function _e(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Yt(e){return"nodeType"in e}function U(e){var t,n;return e?_e(e)?e:Yt(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function Kt(e){const{Document:t}=U(e);return e instanceof t}function ot(e){return _e(e)?!1:e instanceof U(e).HTMLElement}function Un(e){return e instanceof U(e).SVGElement}function $e(e){return e?_e(e)?e.document:Yt(e)?Kt(e)?e:ot(e)||Un(e)?e.ownerDocument:document:document:document}const te=Rt?l.useLayoutEffect:l.useEffect;function It(e){const t=l.useRef(e);return te(()=>{t.current=e}),l.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function Ao(){const e=l.useRef(null),t=l.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=l.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function et(e,t){t===void 0&&(t=[e]);const n=l.useRef(e);return te(()=>{n.current!==e&&(n.current=e)},t),n}function st(e,t){const n=l.useRef();return l.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function vt(e){const t=It(e),n=l.useRef(null),r=l.useCallback(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,r]}function bt(e){const t=l.useRef();return l.useEffect(()=>{t.current=e},[e]),t.current}let jt={};function it(e,t){return l.useMemo(()=>{if(t)return t;const n=jt[e]==null?0:jt[e]+1;return jt[e]=n,e+"-"+n},[e,t])}function Yn(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((s,i)=>{const a=Object.entries(i);for(const[c,u]of a){const f=s[c];f!=null&&(s[c]=f+e*u)}return s},{...t})}}const ze=Yn(1),tt=Yn(-1);function Oo(e){return"clientX"in e&&"clientY"in e}function Tt(e){if(!e)return!1;const{KeyboardEvent:t}=U(e.target);return t&&e instanceof t}function Mo(e){if(!e)return!1;const{TouchEvent:t}=U(e.target);return t&&e instanceof t}function mt(e){if(Mo(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Oo(e)?{x:e.clientX,y:e.clientY}:null}const xe=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[xe.Translate.toString(e),xe.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),Dn="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function ko(e){return e.matches(Dn)?e:e.querySelector(Dn)}const jo={display:"none"};function zo(e){let{id:t,value:n}=e;return P.createElement("div",{id:t,style:jo},n)}function Po(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return P.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function Lo(){const[e,t]=l.useState("");return{announce:l.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Kn=l.createContext(null);function _o(e){const t=l.useContext(Kn);l.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function $o(){const[e]=l.useState(()=>new Set),t=l.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[l.useCallback(r=>{let{type:o,event:s}=r;e.forEach(i=>{var a;return(a=i[o])==null?void 0:a.call(i,s)})},[e]),t]}const Bo={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Fo={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Wo(e){let{announcements:t=Fo,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=Bo}=e;const{announce:s,announcement:i}=Lo(),a=it("DndLiveRegion"),[c,u]=l.useState(!1);if(l.useEffect(()=>{u(!0)},[]),_o(l.useMemo(()=>({onDragStart(d){let{active:h}=d;s(t.onDragStart({active:h}))},onDragMove(d){let{active:h,over:p}=d;t.onDragMove&&s(t.onDragMove({active:h,over:p}))},onDragOver(d){let{active:h,over:p}=d;s(t.onDragOver({active:h,over:p}))},onDragEnd(d){let{active:h,over:p}=d;s(t.onDragEnd({active:h,over:p}))},onDragCancel(d){let{active:h,over:p}=d;s(t.onDragCancel({active:h,over:p}))}}),[s,t])),!c)return null;const f=P.createElement(P.Fragment,null,P.createElement(zo,{id:r,value:o.draggable}),P.createElement(Po,{id:a,announcement:i}));return n?je.createPortal(f,n):f}var $;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})($||($={}));function yt(){}function Rn(e,t){return l.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Ho(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const le=Object.freeze({x:0,y:0});function Vn(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Xo(e,t){const n=mt(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function qn(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Uo(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function In(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function Gn(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Tn(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Yo=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=Tn(t,t.left,t.top),s=[];for(const i of r){const{id:a}=i,c=n.get(a);if(c){const u=Vn(Tn(c),o);s.push({id:a,data:{droppableContainer:i,value:u}})}}return s.sort(qn)},Ko=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=In(t),s=[];for(const i of r){const{id:a}=i,c=n.get(a);if(c){const u=In(c),f=o.reduce((h,p,b)=>h+Vn(u[b],p),0),d=Number((f/4).toFixed(4));s.push({id:a,data:{droppableContainer:i,value:d}})}}return s.sort(qn)};function Vo(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),i=o-r,a=s-n;if(r<o&&n<s){const c=t.width*t.height,u=e.width*e.height,f=i*a,d=f/(c+u-f);return Number(d.toFixed(4))}return 0}const qo=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const s of r){const{id:i}=s,a=n.get(i);if(a){const c=Vo(a,t);c>0&&o.push({id:i,data:{droppableContainer:s,value:c}})}}return o.sort(Uo)};function Go(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Jn(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:le}function Jo(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return o.reduce((i,a)=>({...i,top:i.top+e*a.y,bottom:i.bottom+e*a.y,left:i.left+e*a.x,right:i.right+e*a.x}),{...n})}}const Qo=Jo(1);function Qn(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Zo(e,t,n){const r=Qn(t);if(!r)return e;const{scaleX:o,scaleY:s,x:i,y:a}=r,c=e.left-i-(1-o)*parseFloat(n),u=e.top-a-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),f=o?e.width/o:e.width,d=s?e.height/s:e.height;return{width:f,height:d,top:u,right:c+f,bottom:u+d,left:c}}const es={ignoreTransform:!1};function Be(e,t){t===void 0&&(t=es);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=U(e).getComputedStyle(e);u&&(n=Zo(n,u,f))}const{top:r,left:o,width:s,height:i,bottom:a,right:c}=n;return{top:r,left:o,width:s,height:i,bottom:a,right:c}}function Nn(e){return Be(e,{ignoreTransform:!0})}function ts(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function ns(e,t){return t===void 0&&(t=U(e).getComputedStyle(e)),t.position==="fixed"}function rs(e,t){t===void 0&&(t=U(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const s=t[o];return typeof s=="string"?n.test(s):!1})}function Nt(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(Kt(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!ot(o)||Un(o)||n.includes(o))return n;const s=U(e).getComputedStyle(o);return o!==e&&rs(o,s)&&n.push(o),ns(o,s)?n:r(o.parentNode)}return e?r(e):n}function Zn(e){const[t]=Nt(e,1);return t??null}function zt(e){return!Rt||!e?null:_e(e)?e:Yt(e)?Kt(e)||e===$e(e).scrollingElement?window:ot(e)?e:null:null}function er(e){return _e(e)?e.scrollX:e.scrollLeft}function tr(e){return _e(e)?e.scrollY:e.scrollTop}function Ft(e){return{x:er(e),y:tr(e)}}var F;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(F||(F={}));function nr(e){return!Rt||!e?!1:e===document.scrollingElement}function rr(e){const t={x:0,y:0},n=nr(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,s=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,a=e.scrollLeft>=r.x;return{isTop:o,isLeft:s,isBottom:i,isRight:a,maxScroll:r,minScroll:t}}const os={x:.2,y:.2};function ss(e,t,n,r,o){let{top:s,left:i,right:a,bottom:c}=n;r===void 0&&(r=10),o===void 0&&(o=os);const{isTop:u,isBottom:f,isLeft:d,isRight:h}=rr(e),p={x:0,y:0},b={x:0,y:0},g={height:t.height*o.y,width:t.width*o.x};return!u&&s<=t.top+g.height?(p.y=F.Backward,b.y=r*Math.abs((t.top+g.height-s)/g.height)):!f&&c>=t.bottom-g.height&&(p.y=F.Forward,b.y=r*Math.abs((t.bottom-g.height-c)/g.height)),!h&&a>=t.right-g.width?(p.x=F.Forward,b.x=r*Math.abs((t.right-g.width-a)/g.width)):!d&&i<=t.left+g.width&&(p.x=F.Backward,b.x=r*Math.abs((t.left+g.width-i)/g.width)),{direction:p,speed:b}}function is(e){if(e===document.scrollingElement){const{innerWidth:s,innerHeight:i}=window;return{top:0,left:0,right:s,bottom:i,width:s,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function or(e){return e.reduce((t,n)=>ze(t,Ft(n)),le)}function as(e){return e.reduce((t,n)=>t+er(n),0)}function cs(e){return e.reduce((t,n)=>t+tr(n),0)}function sr(e,t){if(t===void 0&&(t=Be),!e)return;const{top:n,left:r,bottom:o,right:s}=t(e);Zn(e)&&(o<=0||s<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const ls=[["x",["left","right"],as],["y",["top","bottom"],cs]];class Vt{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Nt(n),o=or(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[s,i,a]of ls)for(const c of i)Object.defineProperty(this,c,{get:()=>{const u=a(r),f=o[s]-u;return this.rect[c]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Ge{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function us(e){const{EventTarget:t}=U(e);return e instanceof t?e:$e(e)}function Pt(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Z;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Z||(Z={}));function An(e){e.preventDefault()}function ds(e){e.stopPropagation()}var I;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter"})(I||(I={}));const ir={start:[I.Space,I.Enter],cancel:[I.Esc],end:[I.Space,I.Enter]},fs=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case I.Right:return{...n,x:n.x+25};case I.Left:return{...n,x:n.x-25};case I.Down:return{...n,y:n.y+25};case I.Up:return{...n,y:n.y-25}}};class qt{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Ge($e(n)),this.windowListeners=new Ge(U(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Z.Resize,this.handleCancel),this.windowListeners.add(Z.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Z.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&sr(r),n(le)}handleKeyDown(t){if(Tt(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:s=ir,coordinateGetter:i=fs,scrollBehavior:a="smooth"}=o,{code:c}=t;if(s.end.includes(c)){this.handleEnd(t);return}if(s.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,f=u?{x:u.left,y:u.top}:le;this.referenceCoordinates||(this.referenceCoordinates=f);const d=i(t,{active:n,context:r.current,currentCoordinates:f});if(d){const h=tt(d,f),p={x:0,y:0},{scrollableAncestors:b}=r.current;for(const g of b){const v=t.code,{isTop:x,isRight:w,isLeft:m,isBottom:S,maxScroll:D,minScroll:C}=rr(g),E=is(g),R={x:Math.min(v===I.Right?E.right-E.width/2:E.right,Math.max(v===I.Right?E.left:E.left+E.width/2,d.x)),y:Math.min(v===I.Down?E.bottom-E.height/2:E.bottom,Math.max(v===I.Down?E.top:E.top+E.height/2,d.y))},N=v===I.Right&&!w||v===I.Left&&!m,A=v===I.Down&&!S||v===I.Up&&!x;if(N&&R.x!==d.x){const T=g.scrollLeft+h.x,L=v===I.Right&&T<=D.x||v===I.Left&&T>=C.x;if(L&&!h.y){g.scrollTo({left:T,behavior:a});return}L?p.x=g.scrollLeft-T:p.x=v===I.Right?g.scrollLeft-D.x:g.scrollLeft-C.x,p.x&&g.scrollBy({left:-p.x,behavior:a});break}else if(A&&R.y!==d.y){const T=g.scrollTop+h.y,L=v===I.Down&&T<=D.y||v===I.Up&&T>=C.y;if(L&&!h.x){g.scrollTo({top:T,behavior:a});return}L?p.y=g.scrollTop-T:p.y=v===I.Down?g.scrollTop-D.y:g.scrollTop-C.y,p.y&&g.scrollBy({top:-p.y,behavior:a});break}}this.handleMove(t,ze(tt(d,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}qt.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=ir,onActivation:o}=t,{active:s}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const a=s.activatorNode.current;return a&&e.target!==a?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function On(e){return!!(e&&"distance"in e)}function Mn(e){return!!(e&&"delay"in e)}class Gt{constructor(t,n,r){var o;r===void 0&&(r=us(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:s}=t,{target:i}=s;this.props=t,this.events=n,this.document=$e(i),this.documentListeners=new Ge(this.document),this.listeners=new Ge(r),this.windowListeners=new Ge(U(i)),this.initialCoordinates=(o=mt(s))!=null?o:le,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),this.windowListeners.add(Z.Resize,this.handleCancel),this.windowListeners.add(Z.DragStart,An),this.windowListeners.add(Z.VisibilityChange,this.handleCancel),this.windowListeners.add(Z.ContextMenu,An),this.documentListeners.add(Z.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Mn(n)){this.timeoutId=setTimeout(this.handleStart,n.delay);return}if(On(n))return}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Z.Click,ds,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Z.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:s}=this,{onMove:i,options:{activationConstraint:a}}=s;if(!o)return;const c=(n=mt(t))!=null?n:le,u=tt(o,c);if(!r&&a){if(On(a)){if(a.tolerance!=null&&Pt(u,a.tolerance))return this.handleCancel();if(Pt(u,a.distance))return this.handleStart()}return Mn(a)&&Pt(u,a.tolerance)?this.handleCancel():void 0}t.cancelable&&t.preventDefault(),i(c)}handleEnd(){const{onEnd:t}=this.props;this.detach(),t()}handleCancel(){const{onCancel:t}=this.props;this.detach(),t()}handleKeydown(t){t.code===I.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const ps={move:{name:"pointermove"},end:{name:"pointerup"}};class Jt extends Gt{constructor(t){const{event:n}=t,r=$e(n.target);super(t,ps,r)}}Jt.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const hs={move:{name:"mousemove"},end:{name:"mouseup"}};var Wt;(function(e){e[e.RightClick=2]="RightClick"})(Wt||(Wt={}));class gs extends Gt{constructor(t){super(t,hs,$e(t.event.target))}}gs.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===Wt.RightClick?!1:(r==null||r({event:n}),!0)}}];const Lt={move:{name:"touchmove"},end:{name:"touchend"}};class ar extends Gt{constructor(t){super(t,Lt)}static setup(){return window.addEventListener(Lt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Lt.move.name,t)};function t(){}}}ar.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r==null||r({event:n}),!0)}}];var Je;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Je||(Je={}));var wt;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(wt||(wt={}));function vs(e){let{acceleration:t,activator:n=Je.Pointer,canScroll:r,draggingRect:o,enabled:s,interval:i=5,order:a=wt.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:f,delta:d,threshold:h}=e;const p=ms({delta:d,disabled:!s}),[b,g]=Ao(),v=l.useRef({x:0,y:0}),x=l.useRef({x:0,y:0}),w=l.useMemo(()=>{switch(n){case Je.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Je.DraggableRect:return o}},[n,o,c]),m=l.useRef(null),S=l.useCallback(()=>{const C=m.current;if(!C)return;const E=v.current.x*x.current.x,R=v.current.y*x.current.y;C.scrollBy(E,R)},[]),D=l.useMemo(()=>a===wt.TreeOrder?[...u].reverse():u,[a,u]);l.useEffect(()=>{if(!s||!u.length||!w){g();return}for(const C of D){if((r==null?void 0:r(C))===!1)continue;const E=u.indexOf(C),R=f[E];if(!R)continue;const{direction:N,speed:A}=ss(C,R,w,t,h);for(const T of["x","y"])p[T][N[T]]||(A[T]=0,N[T]=0);if(A.x>0||A.y>0){g(),m.current=C,b(S,i),v.current=A,x.current=N;return}}v.current={x:0,y:0},x.current={x:0,y:0},g()},[t,S,r,g,s,i,JSON.stringify(w),JSON.stringify(p),b,u,D,f,JSON.stringify(h)])}const bs={x:{[F.Backward]:!1,[F.Forward]:!1},y:{[F.Backward]:!1,[F.Forward]:!1}};function ms(e){let{delta:t,disabled:n}=e;const r=bt(t);return st(o=>{if(n||!r||!o)return bs;const s={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[F.Backward]:o.x[F.Backward]||s.x===-1,[F.Forward]:o.x[F.Forward]||s.x===1},y:{[F.Backward]:o.y[F.Backward]||s.y===-1,[F.Forward]:o.y[F.Forward]||s.y===1}}},[n,t,r])}function ys(e,t){const n=t!==null?e.get(t):void 0,r=n?n.node.current:null;return st(o=>{var s;return t===null?null:(s=r??o)!=null?s:null},[r,t])}function ws(e,t){return l.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,s=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...s]},[]),[e,t])}var nt;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(nt||(nt={}));var Ht;(function(e){e.Optimized="optimized"})(Ht||(Ht={}));const kn=new Map;function xs(e,t){let{dragging:n,dependencies:r,config:o}=t;const[s,i]=l.useState(null),{frequency:a,measure:c,strategy:u}=o,f=l.useRef(e),d=v(),h=et(d),p=l.useCallback(function(x){x===void 0&&(x=[]),!h.current&&i(w=>w===null?x:w.concat(x.filter(m=>!w.includes(m))))},[h]),b=l.useRef(null),g=st(x=>{if(d&&!n)return kn;if(!x||x===kn||f.current!==e||s!=null){const w=new Map;for(let m of e){if(!m)continue;if(s&&s.length>0&&!s.includes(m.id)&&m.rect.current){w.set(m.id,m.rect.current);continue}const S=m.node.current,D=S?new Vt(c(S),S):null;m.rect.current=D,D&&w.set(m.id,D)}return w}return x},[e,s,n,d,c]);return l.useEffect(()=>{f.current=e},[e]),l.useEffect(()=>{d||p()},[n,d]),l.useEffect(()=>{s&&s.length>0&&i(null)},[JSON.stringify(s)]),l.useEffect(()=>{d||typeof a!="number"||b.current!==null||(b.current=setTimeout(()=>{p(),b.current=null},a))},[a,d,p,...r]),{droppableRects:g,measureDroppableContainers:p,measuringScheduled:s!=null};function v(){switch(u){case nt.Always:return!1;case nt.BeforeDragging:return n;default:return!n}}}function Qt(e,t){return st(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ss(e,t){return Qt(e,t)}function Cs(e){let{callback:t,disabled:n}=e;const r=It(t),o=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:s}=window;return new s(r)},[r,n]);return l.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function At(e){let{callback:t,disabled:n}=e;const r=It(t),o=l.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:s}=window;return new s(r)},[n]);return l.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function Es(e){return new Vt(Be(e),e)}function jn(e,t,n){t===void 0&&(t=Es);const[r,o]=l.useReducer(a,null),s=Cs({callback(c){if(e)for(const u of c){const{type:f,target:d}=u;if(f==="childList"&&d instanceof HTMLElement&&d.contains(e)){o();break}}}}),i=At({callback:o});return te(()=>{o(),e?(i==null||i.observe(e),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(i==null||i.disconnect(),s==null||s.disconnect())},[e]),r;function a(c){if(!e)return null;if(e.isConnected===!1){var u;return(u=c??n)!=null?u:null}const f=t(e);return JSON.stringify(c)===JSON.stringify(f)?c:f}}function Ds(e){const t=Qt(e);return Jn(e,t)}const zn=[];function Rs(e){const t=l.useRef(e),n=st(r=>e?r&&r!==zn&&e&&t.current&&e.parentNode===t.current.parentNode?r:Nt(e):zn,[e]);return l.useEffect(()=>{t.current=e},[e]),n}function Is(e){const[t,n]=l.useState(null),r=l.useRef(e),o=l.useCallback(s=>{const i=zt(s.target);i&&n(a=>a?(a.set(i,Ft(i)),new Map(a)):null)},[]);return l.useEffect(()=>{const s=r.current;if(e!==s){i(s);const a=e.map(c=>{const u=zt(c);return u?(u.addEventListener("scroll",o,{passive:!0}),[u,Ft(u)]):null}).filter(c=>c!=null);n(a.length?new Map(a):null),r.current=e}return()=>{i(e),i(s)};function i(a){a.forEach(c=>{const u=zt(c);u==null||u.removeEventListener("scroll",o)})}},[o,e]),l.useMemo(()=>e.length?t?Array.from(t.values()).reduce((s,i)=>ze(s,i),le):or(e):le,[e,t])}function Pn(e,t){t===void 0&&(t=[]);const n=l.useRef(null);return l.useEffect(()=>{n.current=null},t),l.useEffect(()=>{const r=e!==le;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?tt(e,n.current):le}function Ts(e){l.useEffect(()=>{if(!Rt)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Ns(e,t){return l.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:s}=r;return n[o]=i=>{s(i,t)},n},{}),[e,t])}function cr(e){return l.useMemo(()=>e?ts(e):null,[e])}const _t=[];function As(e,t){t===void 0&&(t=Be);const[n]=e,r=cr(n?U(n):null),[o,s]=l.useReducer(a,_t),i=At({callback:s});return e.length>0&&o===_t&&s(),te(()=>{e.length?e.forEach(c=>i==null?void 0:i.observe(c)):(i==null||i.disconnect(),s())},[e]),o;function a(){return e.length?e.map(c=>nr(c)?r:new Vt(t(c),c)):_t}}function lr(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return ot(t)?t:e}function Os(e){let{measure:t}=e;const[n,r]=l.useState(null),o=l.useCallback(u=>{for(const{target:f}of u)if(ot(f)){r(d=>{const h=t(f);return d?{...d,width:h.width,height:h.height}:h});break}},[t]),s=At({callback:o}),i=l.useCallback(u=>{const f=lr(u);s==null||s.disconnect(),f&&(s==null||s.observe(f)),r(f?t(f):null)},[t,s]),[a,c]=vt(i);return l.useMemo(()=>({nodeRef:a,rect:n,setRef:c}),[n,a,c])}const Ms=[{sensor:Jt,options:{}},{sensor:qt,options:{}}],ks={current:{}},pt={draggable:{measure:Nn},droppable:{measure:Nn,strategy:nt.WhileDragging,frequency:Ht.Optimized},dragOverlay:{measure:Be}};class Qe extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const js={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Qe,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:yt},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:pt,measureDroppableContainers:yt,windowRect:null,measuringScheduled:!1},ur={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:yt,draggableNodes:new Map,over:null,measureDroppableContainers:yt},at=l.createContext(ur),dr=l.createContext(js);function zs(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Qe}}}function Ps(e,t){switch(t.type){case $.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case $.DragMove:return e.draggable.active?{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}}:e;case $.DragEnd:case $.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case $.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Qe(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case $.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const i=new Qe(e.droppable.containers);return i.set(n,{...s,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case $.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const s=new Qe(e.droppable.containers);return s.delete(n),{...e,droppable:{...e.droppable,containers:s}}}default:return e}}function Ls(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=l.useContext(at),s=bt(r),i=bt(n==null?void 0:n.id);return l.useEffect(()=>{if(!t&&!r&&s&&i!=null){if(!Tt(s)||document.activeElement===s.target)return;const a=o.get(i);if(!a)return;const{activatorNode:c,node:u}=a;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[c.current,u.current]){if(!f)continue;const d=ko(f);if(d){d.focus();break}}})}},[r,t,o,i,s]),null}function fr(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,s)=>s({transform:o,...r}),n):n}function _s(e){return l.useMemo(()=>({draggable:{...pt.draggable,...e==null?void 0:e.draggable},droppable:{...pt.droppable,...e==null?void 0:e.droppable},dragOverlay:{...pt.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function $s(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const s=l.useRef(!1),{x:i,y:a}=typeof o=="boolean"?{x:o,y:o}:o;te(()=>{if(!i&&!a||!t){s.current=!1;return}if(s.current||!r)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const f=n(u),d=Jn(f,r);if(i||(d.x=0),a||(d.y=0),s.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const h=Zn(u);h&&h.scrollBy({top:d.y,left:d.x})}},[t,i,a,r,n])}const Ot=l.createContext({...le,scaleX:1,scaleY:1});var ye;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ye||(ye={}));const Bs=l.memo(function(t){var n,r,o,s;let{id:i,accessibility:a,autoScroll:c=!0,children:u,sensors:f=Ms,collisionDetection:d=qo,measuring:h,modifiers:p,...b}=t;const g=l.useReducer(Ps,void 0,zs),[v,x]=g,[w,m]=$o(),[S,D]=l.useState(ye.Uninitialized),C=S===ye.Initialized,{draggable:{active:E,nodes:R,translate:N},droppable:{containers:A}}=v,T=E?R.get(E):null,L=l.useRef({initial:null,translated:null}),M=l.useMemo(()=>{var W;return E!=null?{id:E,data:(W=T==null?void 0:T.data)!=null?W:ks,rect:L}:null},[E,T]),z=l.useRef(null),[k,H]=l.useState(null),[_,pe]=l.useState(null),j=et(b,Object.values(b)),re=it("DndDescribedBy",i),q=l.useMemo(()=>A.getEnabled(),[A]),B=_s(h),{droppableRects:G,measureDroppableContainers:he,measuringScheduled:Se}=xs(q,{dragging:C,dependencies:[N.x,N.y],config:B.droppable}),Y=ys(R,E),Ie=l.useMemo(()=>_?mt(_):null,[_]),ue=Ir(),oe=Ss(Y,B.draggable.measure);$s({activeNode:E?R.get(E):null,config:ue.layoutShiftCompensation,initialRect:oe,measure:B.draggable.measure});const O=jn(Y,B.draggable.measure,oe),Fe=jn(Y?Y.parentElement:null),de=l.useRef({activatorEvent:null,active:null,activeNode:Y,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:R,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Te=A.getNodeFor((n=de.current.over)==null?void 0:n.id),ge=Os({measure:B.dragOverlay.measure}),Ne=(r=ge.nodeRef.current)!=null?r:Y,Ae=C?(o=ge.rect)!=null?o:O:null,nn=!!(ge.nodeRef.current&&ge.rect),rn=Ds(nn?null:O),Mt=cr(Ne?U(Ne):null),ve=Rs(C?Te??Y:null),ct=As(ve),lt=fr(p,{transform:{x:N.x-rn.x,y:N.y-rn.y,scaleX:1,scaleY:1},activatorEvent:_,active:M,activeNodeRect:O,containerNodeRect:Fe,draggingNodeRect:Ae,over:de.current.over,overlayNodeRect:ge.rect,scrollableAncestors:ve,scrollableAncestorRects:ct,windowRect:Mt}),on=Ie?ze(Ie,N):null,sn=Is(ve),wr=Pn(sn),xr=Pn(sn,[O]),Oe=ze(lt,wr),Me=Ae?Qo(Ae,lt):null,We=M&&Me?d({active:M,collisionRect:Me,droppableRects:G,droppableContainers:q,pointerCoordinates:on}):null,an=Gn(We,"id"),[be,cn]=l.useState(null),Sr=nn?lt:ze(lt,xr),Cr=Go(Sr,(s=be==null?void 0:be.rect)!=null?s:null,O),ln=l.useCallback((W,K)=>{let{sensor:V,options:me}=K;if(z.current==null)return;const J=R.get(z.current);if(!J)return;const se=W.nativeEvent,fe=new V({active:z.current,activeNode:J,event:se,options:me,context:de,onStart(ie){const He=z.current;if(He==null)return;const Xe=R.get(He);if(!Xe)return;const{onDragStart:ut}=j.current,dt={active:{id:He,data:Xe.data,rect:L}};je.unstable_batchedUpdates(()=>{ut==null||ut(dt),D(ye.Initializing),x({type:$.DragStart,initialCoordinates:ie,active:He}),w({type:"onDragStart",event:dt})})},onMove(ie){x({type:$.DragMove,coordinates:ie})},onEnd:ke($.DragEnd),onCancel:ke($.DragCancel)});je.unstable_batchedUpdates(()=>{H(fe),pe(W.nativeEvent)});function ke(ie){return async function(){const{active:Xe,collisions:ut,over:dt,scrollAdjustedTranslate:dn}=de.current;let Ue=null;if(Xe&&dn){const{cancelDrop:Ye}=j.current;Ue={activatorEvent:se,active:Xe,collisions:ut,delta:dn,over:dt},ie===$.DragEnd&&typeof Ye=="function"&&await Promise.resolve(Ye(Ue))&&(ie=$.DragCancel)}z.current=null,je.unstable_batchedUpdates(()=>{x({type:ie}),D(ye.Uninitialized),cn(null),H(null),pe(null);const Ye=ie===$.DragEnd?"onDragEnd":"onDragCancel";if(Ue){const kt=j.current[Ye];kt==null||kt(Ue),w({type:Ye,event:Ue})}})}}},[R]),Er=l.useCallback((W,K)=>(V,me)=>{const J=V.nativeEvent,se=R.get(me);if(z.current!==null||!se||J.dndKit||J.defaultPrevented)return;const fe={active:se};W(V,K.options,fe)===!0&&(J.dndKit={capturedBy:K.sensor},z.current=me,ln(V,K))},[R,ln]),un=ws(f,Er);Ts(f),te(()=>{O&&S===ye.Initializing&&D(ye.Initialized)},[O,S]),l.useEffect(()=>{const{onDragMove:W}=j.current,{active:K,activatorEvent:V,collisions:me,over:J}=de.current;if(!K||!V)return;const se={active:K,activatorEvent:V,collisions:me,delta:{x:Oe.x,y:Oe.y},over:J};je.unstable_batchedUpdates(()=>{W==null||W(se),w({type:"onDragMove",event:se})})},[Oe.x,Oe.y]),l.useEffect(()=>{const{active:W,activatorEvent:K,collisions:V,droppableContainers:me,scrollAdjustedTranslate:J}=de.current;if(!W||z.current==null||!K||!J)return;const{onDragOver:se}=j.current,fe=me.get(an),ke=fe&&fe.rect.current?{id:fe.id,rect:fe.rect.current,data:fe.data,disabled:fe.disabled}:null,ie={active:W,activatorEvent:K,collisions:V,delta:{x:J.x,y:J.y},over:ke};je.unstable_batchedUpdates(()=>{cn(ke),se==null||se(ie),w({type:"onDragOver",event:ie})})},[an]),te(()=>{de.current={activatorEvent:_,active:M,activeNode:Y,collisionRect:Me,collisions:We,droppableRects:G,draggableNodes:R,draggingNode:Ne,draggingNodeRect:Ae,droppableContainers:A,over:be,scrollableAncestors:ve,scrollAdjustedTranslate:Oe},L.current={initial:Ae,translated:Me}},[M,Y,We,Me,R,Ne,Ae,G,A,be,ve,Oe]),vs({...ue,delta:N,draggingRect:Me,pointerCoordinates:on,scrollableAncestors:ve,scrollableAncestorRects:ct});const Dr=l.useMemo(()=>({active:M,activeNode:Y,activeNodeRect:O,activatorEvent:_,collisions:We,containerNodeRect:Fe,dragOverlay:ge,draggableNodes:R,droppableContainers:A,droppableRects:G,over:be,measureDroppableContainers:he,scrollableAncestors:ve,scrollableAncestorRects:ct,measuringConfiguration:B,measuringScheduled:Se,windowRect:Mt}),[M,Y,O,_,We,Fe,ge,R,A,G,be,he,ve,ct,B,Se,Mt]),Rr=l.useMemo(()=>({activatorEvent:_,activators:un,active:M,activeNodeRect:O,ariaDescribedById:{draggable:re},dispatch:x,draggableNodes:R,over:be,measureDroppableContainers:he}),[_,un,M,O,x,re,R,be,he]);return P.createElement(Kn.Provider,{value:m},P.createElement(at.Provider,{value:Rr},P.createElement(dr.Provider,{value:Dr},P.createElement(Ot.Provider,{value:Cr},u)),P.createElement(Ls,{disabled:(a==null?void 0:a.restoreFocus)===!1})),P.createElement(Wo,{...a,hiddenTextDescribedById:re}));function Ir(){const W=(k==null?void 0:k.autoScrollEnabled)===!1,K=typeof c=="object"?c.enabled===!1:c===!1,V=C&&!W&&!K;return typeof c=="object"?{...c,enabled:V}:{enabled:V}}}),Fs=l.createContext(null),Ln="button",Ws="Droppable";function Hs(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const s=it(Ws),{activators:i,activatorEvent:a,active:c,activeNodeRect:u,ariaDescribedById:f,draggableNodes:d,over:h}=l.useContext(at),{role:p=Ln,roleDescription:b="draggable",tabIndex:g=0}=o??{},v=(c==null?void 0:c.id)===t,x=l.useContext(v?Ot:Fs),[w,m]=vt(),[S,D]=vt(),C=Ns(i,t),E=et(n);te(()=>(d.set(t,{id:t,key:s,node:w,activatorNode:S,data:E}),()=>{const N=d.get(t);N&&N.key===s&&d.delete(t)}),[d,t]);const R=l.useMemo(()=>({role:p,tabIndex:g,"aria-disabled":r,"aria-pressed":v&&p===Ln?!0:void 0,"aria-roledescription":b,"aria-describedby":f.draggable}),[r,p,g,v,b,f.draggable]);return{active:c,activatorEvent:a,activeNodeRect:u,attributes:R,isDragging:v,listeners:r?void 0:C,node:w,over:h,setNodeRef:m,setActivatorNodeRef:D,transform:x}}function pr(){return l.useContext(dr)}const Xs="Droppable",Us={timeout:25};function Ys(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const s=it(Xs),{active:i,dispatch:a,over:c,measureDroppableContainers:u}=l.useContext(at),f=l.useRef({disabled:n}),d=l.useRef(!1),h=l.useRef(null),p=l.useRef(null),{disabled:b,updateMeasurementsFor:g,timeout:v}={...Us,...o},x=et(g??r),w=l.useCallback(()=>{if(!d.current){d.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),p.current=null},v)},[v]),m=At({callback:w,disabled:b||!i}),S=l.useCallback((R,N)=>{m&&(N&&(m.unobserve(N),d.current=!1),R&&m.observe(R))},[m]),[D,C]=vt(S),E=et(t);return l.useEffect(()=>{!m||!D.current||(m.disconnect(),d.current=!1,m.observe(D.current))},[D,m]),te(()=>(a({type:$.RegisterDroppable,element:{id:r,key:s,disabled:n,node:D,rect:h,data:E}}),()=>a({type:$.UnregisterDroppable,key:s,id:r})),[r]),l.useEffect(()=>{n!==f.current.disabled&&(a({type:$.SetDroppableDisabled,id:r,key:s,disabled:n}),f.current.disabled=n)},[r,s,n,a]),{active:i,rect:h,isOver:(c==null?void 0:c.id)===r,node:D,over:c,setNodeRef:C}}function Ks(e){let{animation:t,children:n}=e;const[r,o]=l.useState(null),[s,i]=l.useState(null),a=bt(n);return!n&&!r&&a&&o(a),te(()=>{if(!s)return;const c=r==null?void 0:r.key,u=r==null?void 0:r.props.id;if(c==null||u==null){o(null);return}Promise.resolve(t(u,s)).then(()=>{o(null)})},[t,r,s]),P.createElement(P.Fragment,null,n,r?l.cloneElement(r,{ref:i}):null)}const Vs={x:0,y:0,scaleX:1,scaleY:1};function qs(e){let{children:t}=e;return P.createElement(at.Provider,{value:ur},P.createElement(Ot.Provider,{value:Vs},t))}const Gs={position:"fixed",touchAction:"none"},Js=e=>Tt(e)?"transform 250ms ease":void 0,Qs=l.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:s,className:i,rect:a,style:c,transform:u,transition:f=Js}=e;if(!a)return null;const d=o?u:{...u,scaleX:1,scaleY:1},h={...Gs,width:a.width,height:a.height,top:a.top,left:a.left,transform:xe.Transform.toString(d),transformOrigin:o&&r?Xo(r,a):void 0,transition:typeof f=="function"?f(r):f,...c};return P.createElement(n,{className:i,style:h,ref:t},s)}),Zs=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:s,className:i}=e;if(s!=null&&s.active)for(const[a,c]of Object.entries(s.active))c!==void 0&&(o[a]=n.node.style.getPropertyValue(a),n.node.style.setProperty(a,c));if(s!=null&&s.dragOverlay)for(const[a,c]of Object.entries(s.dragOverlay))c!==void 0&&r.node.style.setProperty(a,c);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[c,u]of Object.entries(o))n.node.style.setProperty(c,u);i!=null&&i.active&&n.node.classList.remove(i.active)}},ei=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:xe.Transform.toString(t)},{transform:xe.Transform.toString(n)}]},ti={duration:250,easing:"ease",keyframes:ei,sideEffects:Zs({styles:{active:{opacity:"0"}}})};function ni(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return It((s,i)=>{if(t===null)return;const a=n.get(s);if(!a)return;const c=a.node.current;if(!c)return;const u=lr(i);if(!u)return;const{transform:f}=U(i).getComputedStyle(i),d=Qn(f);if(!d)return;const h=typeof t=="function"?t:ri(t);return sr(c,o.draggable.measure),h({active:{id:s,data:a.data,node:c,rect:o.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:i,rect:o.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:o,transform:d})})}function ri(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...ti,...e};return s=>{let{active:i,dragOverlay:a,transform:c,...u}=s;if(!t)return;const f={x:a.rect.left-i.rect.left,y:a.rect.top-i.rect.top},d={scaleX:c.scaleX!==1?i.rect.width*c.scaleX/a.rect.width:1,scaleY:c.scaleY!==1?i.rect.height*c.scaleY/a.rect.height:1},h={x:c.x-f.x,y:c.y-f.y,...d},p=o({...u,active:i,dragOverlay:a,transform:{initial:c,final:h}}),[b]=p,g=p[p.length-1];if(JSON.stringify(b)===JSON.stringify(g))return;const v=r==null?void 0:r({active:i,dragOverlay:a,...u}),x=a.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(w=>{x.onfinish=()=>{v==null||v(),w()}})}}let _n=0;function oi(e){return l.useMemo(()=>{if(e!=null)return _n++,_n},[e])}const si=P.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:s,modifiers:i,wrapperElement:a="div",className:c,zIndex:u=999}=e;const{activatorEvent:f,active:d,activeNodeRect:h,containerNodeRect:p,draggableNodes:b,droppableContainers:g,dragOverlay:v,over:x,measuringConfiguration:w,scrollableAncestors:m,scrollableAncestorRects:S,windowRect:D}=pr(),C=l.useContext(Ot),E=oi(d==null?void 0:d.id),R=fr(i,{activatorEvent:f,active:d,activeNodeRect:h,containerNodeRect:p,draggingNodeRect:v.rect,over:x,overlayNodeRect:v.rect,scrollableAncestors:m,scrollableAncestorRects:S,transform:C,windowRect:D}),N=Qt(h),A=ni({config:r,draggableNodes:b,droppableContainers:g,measuringConfiguration:w}),T=N?v.setRef:void 0;return P.createElement(qs,null,P.createElement(Ks,{animation:A},d&&E?P.createElement(Qs,{key:E,id:d.id,ref:T,as:a,activatorEvent:f,adjustScale:t,className:c,transition:s,rect:N,style:{zIndex:u,...o},transform:R},n):null))});function Zt(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function ii(e,t){return e.reduce((n,r,o)=>{const s=t.get(r);return s&&(n[o]=s),n},Array(e.length))}function ft(e){return e!==null&&e>=0}function ai(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ci(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const en=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const s=Zt(t,r,n),i=t[o],a=s[o];return!a||!i?null:{x:a.left-i.left,y:a.top-i.top,scaleX:a.width/i.width,scaleY:a.height/i.height}},hr="Sortable",gr=P.createContext({activeIndex:-1,containerId:hr,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:en,disabled:{draggable:!1,droppable:!1}});function li(e){let{children:t,id:n,items:r,strategy:o=en,disabled:s=!1}=e;const{active:i,dragOverlay:a,droppableRects:c,over:u,measureDroppableContainers:f}=pr(),d=it(hr,n),h=a.rect!==null,p=l.useMemo(()=>r.map(C=>typeof C=="object"&&"id"in C?C.id:C),[r]),b=i!=null,g=i?p.indexOf(i.id):-1,v=u?p.indexOf(u.id):-1,x=l.useRef(p),w=!ai(p,x.current),m=v!==-1&&g===-1||w,S=ci(s);te(()=>{w&&b&&f(p)},[w,p,b,f]),l.useEffect(()=>{x.current=p},[p]);const D=l.useMemo(()=>({activeIndex:g,containerId:d,disabled:S,disableTransforms:m,items:p,overIndex:v,useDragOverlay:h,sortedRects:ii(p,c),strategy:o}),[g,d,S.draggable,S.droppable,m,p,v,c,h,o]);return P.createElement(gr.Provider,{value:D},t)}const ui=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Zt(n,r,o).indexOf(t)},di=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:s,newIndex:i,previousItems:a,previousContainerId:c,transition:u}=e;return!u||!r||a!==s&&o===i?!1:n?!0:i!==o&&t===c},fi={duration:200,easing:"ease"},vr="transform",pi=xe.Transition.toString({property:vr,duration:0,easing:"linear"}),hi={roleDescription:"sortable"};function gi(e){let{disabled:t,index:n,node:r,rect:o}=e;const[s,i]=l.useState(null),a=l.useRef(n);return te(()=>{if(!t&&n!==a.current&&r.current){const c=o.current;if(c){const u=Be(r.current,{ignoreTransform:!0}),f={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(f.x||f.y)&&i(f)}}n!==a.current&&(a.current=n)},[t,n,r,o]),l.useEffect(()=>{s&&i(null)},[s]),s}function vi(e){let{animateLayoutChanges:t=di,attributes:n,disabled:r,data:o,getNewIndex:s=ui,id:i,strategy:a,resizeObserverConfig:c,transition:u=fi}=e;const{items:f,containerId:d,activeIndex:h,disabled:p,disableTransforms:b,sortedRects:g,overIndex:v,useDragOverlay:x,strategy:w}=l.useContext(gr),m=bi(r,p),S=f.indexOf(i),D=l.useMemo(()=>({sortable:{containerId:d,index:S,items:f},...o}),[d,o,S,f]),C=l.useMemo(()=>f.slice(f.indexOf(i)),[f,i]),{rect:E,node:R,isOver:N,setNodeRef:A}=Ys({id:i,data:D,disabled:m.droppable,resizeObserverConfig:{updateMeasurementsFor:C,...c}}),{active:T,activatorEvent:L,activeNodeRect:M,attributes:z,setNodeRef:k,listeners:H,isDragging:_,over:pe,setActivatorNodeRef:j,transform:re}=Hs({id:i,data:D,attributes:{...hi,...n},disabled:m.draggable}),q=No(A,k),B=!!T,G=B&&!b&&ft(h)&&ft(v),he=!x&&_,Se=he&&G?re:null,Ie=G?Se??(a??w)({rects:g,activeNodeRect:M,activeIndex:h,overIndex:v,index:S}):null,ue=ft(h)&&ft(v)?s({id:i,items:f,activeIndex:h,overIndex:v}):S,oe=T==null?void 0:T.id,O=l.useRef({activeId:oe,items:f,newIndex:ue,containerId:d}),Fe=f!==O.current.items,de=t({active:T,containerId:d,isDragging:_,isSorting:B,id:i,index:S,items:f,newIndex:O.current.newIndex,previousItems:O.current.items,previousContainerId:O.current.containerId,transition:u,wasDragging:O.current.activeId!=null}),Te=gi({disabled:!de,index:S,node:R,rect:E});return l.useEffect(()=>{B&&O.current.newIndex!==ue&&(O.current.newIndex=ue),d!==O.current.containerId&&(O.current.containerId=d),f!==O.current.items&&(O.current.items=f)},[B,ue,d,f]),l.useEffect(()=>{if(oe===O.current.activeId)return;if(oe&&!O.current.activeId){O.current.activeId=oe;return}const Ne=setTimeout(()=>{O.current.activeId=oe},50);return()=>clearTimeout(Ne)},[oe]),{active:T,activeIndex:h,attributes:z,data:D,rect:E,index:S,newIndex:ue,items:f,isOver:N,isSorting:B,isDragging:_,listeners:H,node:R,overIndex:v,over:pe,setNodeRef:q,setActivatorNodeRef:j,setDroppableNodeRef:A,setDraggableNodeRef:k,transform:Te??Ie,transition:ge()};function ge(){if(Te||Fe&&O.current.newIndex===S)return pi;if(!(he&&!Tt(L)||!u)&&(B||de))return xe.Transition.toString({...u,property:vr})}}function bi(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function xt(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const mi=[I.Down,I.Right,I.Up,I.Left],yi=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:s,over:i,scrollableAncestors:a}}=t;if(mi.includes(e.code)){if(e.preventDefault(),!n||!r)return;const c=[];s.getEnabled().forEach(d=>{if(!d||d!=null&&d.disabled)return;const h=o.get(d.id);if(h)switch(e.code){case I.Down:r.top<h.top&&c.push(d);break;case I.Up:r.top>h.top&&c.push(d);break;case I.Left:r.left>h.left&&c.push(d);break;case I.Right:r.left<h.left&&c.push(d);break}});const u=Ko({active:n,collisionRect:r,droppableRects:o,droppableContainers:c,pointerCoordinates:null});let f=Gn(u,"id");if(f===(i==null?void 0:i.id)&&u.length>1&&(f=u[1].id),f!=null){const d=s.get(n.id),h=s.get(f),p=h?o.get(h.id):null,b=h==null?void 0:h.node.current;if(b&&p&&d&&h){const v=Nt(b).some((C,E)=>a[E]!==C),x=br(d,h),w=wi(d,h),m=v||!x?{x:0,y:0}:{x:w?r.width-p.width:0,y:w?r.height-p.height:0},S={x:p.left,y:p.top};return m.x&&m.y?S:tt(S,m)}}}};function br(e,t){return!xt(e)||!xt(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function wi(e,t){return!xt(e)||!xt(t)||!br(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function xi({deckCard:e,onClick:t}){const{attributes:n,listeners:r,setNodeRef:o,transform:s,transition:i,isDragging:a}=vi({id:e.id}),c={transform:xe.Transform.toString(s),transition:i,zIndex:a?"100":"auto",opacity:a?.5:1};return y.jsx(Xn,{ref:o,style:c,...r,...n,deckCard:e,onClick:t})}function Si({onClick:e}){return y.jsx(Hn,{onClick:e,children:y.jsx(Ro,{size:32})})}function Ci({opened:e,onClose:t,deckCard:n,onCreate:r,onUpdate:o,onDelete:s}){const[i,a]=l.useState(""),[c,u]=l.useState(""),f=l.useRef(null),d=h=>{var p;h.preventDefault(),(p=f.current)==null||p.focus(),r(i,c),a(""),u("")};return l.useEffect(()=>{e&&(a((n==null?void 0:n.front)??""),u((n==null?void 0:n.back)??""))},[e]),l.useEffect(()=>{if(!e)return;const h=setTimeout(()=>{var p;(p=f.current)==null||p.focus()},200);return()=>clearTimeout(h)},[e]),y.jsx(kr,{opened:e,onClose:t,title:"Deck Editor",size:360,lockScroll:!1,children:y.jsxs(we,{direction:"column",gap:"md",children:[y.jsx(ht,{ref:f,value:i,onChange:h=>a(h.currentTarget.value),placeholder:"Front...",variant:"filled",autosize:!0,minRows:2}),y.jsx(ht,{value:c,onChange:h=>u(h.currentTarget.value),placeholder:"Back...",variant:"filled",autosize:!0,minRows:3}),y.jsxs(we,{gap:"xs",children:[n&&y.jsxs(y.Fragment,{children:[y.jsx(Ve,{onClick:()=>s(n.id),variant:"light",color:"red",mih:48,children:y.jsx(qe,{fw:600,children:"DELETE"})}),y.jsx(Ve,{onClick:()=>o(n.id,i,c),mih:48,style:{flex:1},children:y.jsx(qe,{fw:600,children:"UPDATE"})})]}),!n&&y.jsx(Ve,{onClick:d,mih:48,style:{flex:1},children:y.jsx(qe,{fw:600,children:"CREATE"})})]})]})})}function $t(e){if(!tn(e))throw new Error("Parameter was not an error")}function tn(e){return Ei(e)==="[object Error]"||e instanceof Error}function Ei(e){return Object.prototype.toString.call(e)}function Di(e){let t,n="";if(e.length===0)t={};else if(tn(e[0]))t={cause:e[0]},n=e.slice(1).join(" ")||"";else if(e[0]&&typeof e[0]=="object")t=Object.assign({},e[0]),n=e.slice(1).join(" ")||"";else if(typeof e[0]=="string")t={},n=n=e.join(" ")||"";else throw new Error("Invalid arguments passed to Layerr");return{options:t,shortMessage:n}}class ae extends Error{constructor(t,n){const r=[...arguments],{options:o,shortMessage:s}=Di(r);let i=s;if(o.cause&&(i=`${i}: ${o.cause.message}`),super(i),this.message=i,o.name&&typeof o.name=="string"?this.name=o.name:this.name="Layerr",o.cause&&Object.defineProperty(this,"_cause",{value:o.cause}),Object.defineProperty(this,"_info",{value:{}}),o.info&&typeof o.info=="object"&&Object.assign(this._info,o.info),Error.captureStackTrace){const a=o.constructorOpt||this.constructor;Error.captureStackTrace(this,a)}}static cause(t){return $t(t),t._cause&&tn(t._cause)?t._cause:null}static fullStack(t){$t(t);const n=ae.cause(t);return n?`${t.stack}
caused by: ${ae.fullStack(n)}`:t.stack}static info(t){$t(t);const n={},r=ae.cause(t);return r&&Object.assign(n,ae.info(r)),t._info&&Object.assign(n,t._info),n}cause(){return ae.cause(this)}toString(){let t=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(t=`${t}: ${this.message}`),t}}const mr="0123456789ABCDEFGHJKMNPQRSTVWXYZ",Ze=32,$n=0xffffffffffff,Ri=10,Ii=16,Ke=Object.freeze({source:"ulid"});function Ti(e){const t=Ni(),n=t&&(t.crypto||t.msCrypto)||null;if(typeof(n==null?void 0:n.getRandomValues)=="function")return()=>{const r=new Uint8Array(1);return n.getRandomValues(r),r[0]/255};if(typeof(n==null?void 0:n.randomBytes)=="function")return()=>n.randomBytes(1).readUInt8()/255;throw new ae({info:{code:"PRNG_DETECT",...Ke}},"Failed to find a reliable PRNG")}function Ni(){return Mi()?self:typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:null}function Ai(e,t){let n="";for(;e>0;e--)n=ki(t)+n;return n}function Oi(e,t){if(isNaN(e))throw new ae({info:{code:"ENC_TIME_NAN",...Ke}},`Time must be a number: ${e}`);if(e>$n)throw new ae({info:{code:"ENC_TIME_SIZE_EXCEED",...Ke}},`Cannot encode a time larger than ${$n}: ${e}`);if(e<0)throw new ae({info:{code:"ENC_TIME_NEG",...Ke}},`Time must be positive: ${e}`);if(Number.isInteger(e)===!1)throw new ae({info:{code:"ENC_TIME_TYPE",...Ke}},`Time must be an integer: ${e}`);let n,r="";for(let o=t;o>0;o--)n=e%Ze,r=mr.charAt(n)+r,e=(e-n)/Ze;return r}function Mi(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function ki(e){let t=Math.floor(e()*Ze);return t===Ze&&(t=Ze-1),mr.charAt(t)}function yr(e,t){const n=Ti(),r=isNaN(e)?Date.now():e;return Oi(r,Ri)+Ai(Ii,n)}function ji(e,t){const n=Ur(),[r,o]=l.useState(void 0),s=Ho(Rn(n==="android"||n==="ios"?ar:Jt,{activationConstraint:{delay:250,tolerance:5}}),Rn(qt,{coordinateGetter:yi}));return{active:r,sensors:s,handleDragStart:c=>{o(e.find(u=>u.id===c.active.id))},handleDragEnd:c=>{const{active:u,over:f}=c;u.id!==f.id&&t(d=>{const h=e.findIndex(b=>b.id===u.id),p=d.findIndex(b=>b.id===f.id);return Zt(e,h,p)})}}}function zi(e,t,n){const[r,{open:o,close:s}]=Yr(),[i,a]=l.useState(void 0);return{opened:r,open:o,close:s,deckEditorData:i,setDeckEditorData:a,onDeckEditorCreate:(d,h)=>{const p=[...t],b={id:yr(),deckId:e,createdAt:`${Date.now()}`,front:d,back:h,order:0};p.push(b),n(p)},onDeckEditorUpdate:(d,h,p)=>{const b=[...t],g=b.find(v=>v.id===d);g&&(g.front=h,g.back=p),n(b),s()},onDeckEditorDelete:d=>{const h=[...t],p=h.findIndex(b=>b.id===d);p!==-1&&h.splice(p,1),n(h),s()}}}function Fi(){var z;const e=jr(),t=(z=hn(()=>e.id?Q.decks.where({id:e.id}).toArray():[],[e.id]))==null?void 0:z[0],n=hn(async()=>e.id?(await Q.deckCards.where({deckId:e.id}).toArray()).sort((H,_)=>H.order-_.order):[],[e.id]),r=zr(),o=Pr(),[s,i]=l.useState(yr()),[a,c]=l.useState(""),[u,f]=l.useState(""),[d,h]=l.useState([]),{active:p,sensors:b,handleDragStart:g,handleDragEnd:v}=ji(d,h),{opened:x,open:w,close:m,deckEditorData:S,setDeckEditorData:D,onDeckEditorCreate:C,onDeckEditorUpdate:E,onDeckEditorDelete:R}=zi(s,d,h),N=()=>{D(void 0),w()},A=k=>{D(k),w()},T=()=>{Q.transaction("rw",Q.decks,Q.deckCards,async()=>{d.forEach((k,H)=>{k.order=H}),await Q.decks.add({id:s,title:a,description:u,createdAt:`${Date.now()}`,cardCount:d.length}),await Q.deckCards.bulkPut(d)}),M()},L=()=>{t&&(Q.transaction("rw",Q.decks,Q.deckCards,async()=>{d.forEach((k,H)=>{k.order=H}),await Q.decks.put({id:t.id,createdAt:t.createdAt,title:a,description:u,cardCount:d.length}),await Q.deckCards.bulkPut(d)}),M())},M=()=>{o(-1)};return l.useEffect(()=>{t&&(i(t.id),c(t.title),f(t.description))},[t]),l.useEffect(()=>{n&&h(JSON.parse(JSON.stringify(n)))},[n]),y.jsxs(y.Fragment,{children:[y.jsxs(Fr.div,{initial:{opacity:0},animate:{opacity:1},children:[y.jsxs(we,{direction:"column",h:64,pos:"fixed",top:0,left:0,right:0,style:{zIndex:100},children:[y.jsx(Lr,{maw:r.breakpoints.xs,w:"100%",h:"100%",mx:"auto",children:y.jsxs(we,{align:"center",px:"md",h:"100%",children:[y.jsx(_r,{onClick:M,size:48,variant:"subtle",children:y.jsx(Wr,{variant:"transparent",color:"gray",children:y.jsx(Hr,{size:32})})}),y.jsx(pn,{order:4,ta:"center",style:{flex:1},children:e.id?"Update Deck":"Create Deck"}),y.jsx("div",{style:{width:48,height:48}})]})}),y.jsx(gn,{size:"md"})]}),y.jsxs(we,{direction:"column",mx:"auto",maw:r.breakpoints.xs,px:"md",pt:80,pb:80,children:[y.jsxs(we,{direction:"column",gap:"xs",mx:"auto",w:"100%",maw:240,children:[y.jsx(gt,{value:a,onChange:k=>c(k.currentTarget.value),placeholder:"Title",variant:"filled"}),y.jsx(gt,{value:u,onChange:k=>f(k.currentTarget.value),placeholder:"Description (Optional)",variant:"filled"})]}),y.jsx(pn,{order:4,pt:"md",children:"Cards"}),y.jsx(gn,{pb:"xs"}),y.jsx(Bs,{sensors:b,collisionDetection:Yo,onDragEnd:v,onDragStart:g,children:y.jsx(li,{items:d,strategy:en,children:y.jsxs(we,{wrap:"wrap",gap:"xs",className:$r,children:[y.jsx(Si,{onClick:N}),d.map(k=>y.jsx(xi,{deckCard:k,onClick:()=>A(k)},k.id)),y.jsx(si,{children:p&&y.jsx(Xn,{deckCard:p})})]})})})]}),y.jsx(Ve,{onClick:e.id?L:T,mx:"auto",maw:De(r.breakpoints.xs),mih:48,pos:"fixed",bottom:r.spacing.md,left:r.spacing.md,right:r.spacing.md,children:y.jsx(qe,{fw:600,children:e.id?"UPDATE DECK":"CREATE DECK"})})]}),y.jsx(Ci,{opened:x,onClose:m,onCreate:C,onUpdate:E,onDelete:R,deckCard:S})]})}export{Fi as default};
