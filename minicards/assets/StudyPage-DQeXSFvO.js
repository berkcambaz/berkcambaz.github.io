import{z as Q,f as b,c as P,j as e,h as R,e as U,i as X,o as G,q as J,x as Y,C as K,D as O,E as W,v as Z,d as L,y as ee,r as v,F as m,A as se,a as $,T as y,B as A}from"./index-DqUeWvLL.js";import{u as E,C as D}from"./dexie-react-hooks-DWRr50IS.js";import{m as V}from"./motion-BvF88_zi.js";import{T as te,I as re}from"./IconX-DiZk64u8.js";function oe(t,r){return typeof t=="boolean"?t:r.autoContrast}const[ae,q]=Q("Progress.Root component was not found in tree");var j={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const ne={},k=b((t,r)=>{const{classNames:s,className:a,style:l,styles:o,vars:h,...n}=P("ProgressLabel",ne,t),i=q();return e.jsx(R,{ref:r,...i.getStyles("label",{className:a,style:l,classNames:s,styles:o}),...n})});k.classes=j;k.displayName="@mantine/core/ProgressLabel";const ie={},le=X((t,{size:r,radius:s,transitionDuration:a})=>({root:{"--progress-size":G(r,"progress-size"),"--progress-radius":s===void 0?void 0:J(s),"--progress-transition-duration":typeof a=="number"?`${a}ms`:void 0}})),C=b((t,r)=>{const s=P("ProgressRoot",ie,t),{classNames:a,className:l,style:o,styles:h,unstyled:n,vars:i,autoContrast:c,transitionDuration:p,...d}=s,u=U({name:"Progress",classes:j,props:s,className:l,style:o,classNames:a,styles:h,unstyled:n,vars:i,varsResolver:le});return e.jsx(ae,{value:{getStyles:u,autoContrast:c},children:e.jsx(R,{ref:r,...u("root"),...d})})});C.classes=j;C.displayName="@mantine/core/ProgressRoot";const ce={withAria:!0},S=b((t,r)=>{const{classNames:s,className:a,style:l,styles:o,vars:h,value:n,withAria:i,color:c,striped:p,animated:d,mod:u,...g}=P("ProgressSection",ce,t),w=q(),f=Y(),N=i?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":n,"aria-valuetext":`${n}%`}:{};return e.jsx(R,{ref:r,...w.getStyles("section",{className:a,classNames:s,styles:o,style:l}),...g,...N,mod:[{striped:p||d,animated:d},u],__vars:{"--progress-section-width":`${n}%`,"--progress-section-color":K(c,f),"--progress-label-color":oe(w.autoContrast,f)?O({color:c,theme:f}):void 0}})});S.classes=j;S.displayName="@mantine/core/ProgressSection";const de={},x=b((t,r)=>{const s=P("Progress",de,t),{value:a,classNames:l,styles:o,vars:h,color:n,striped:i,animated:c,"aria-label":p,...d}=s,{resolvedClassNames:u,resolvedStyles:g}=W({classNames:l,styles:o,props:s});return e.jsx(C,{ref:r,classNames:u,styles:g,vars:h,...d,children:e.jsx(S,{value:a,color:n,striped:i,animated:c,"aria-label":p})})});x.classes=j;x.displayName="@mantine/core/Progress";x.Section=S;x.Root=C;x.Label=k;function me(t){return new Promise(r=>{setTimeout(r,t)})}var ue="_16rvb9k0",he="_16rvb9k1",xe="_16rvb9k2",pe="_16rvb9k3";function we(){var z,F,B;const t=Z(),r=(z=E(()=>t.id?L.decks.where({id:t.id}).toArray():[],[t.id]))==null?void 0:z[0],s=E(async()=>t.id?(await L.deckCards.where({deckId:t.id}).toArray()).sort((H,M)=>H.order-M.order):[],[t.id]),a=Y(),l=ee(),[o,h]=v.useState(0),n=(s&&s.length>0?o/s.length:0)*100,[i,c]=v.useState(!1),[p,d]=v.useState(!1),[u,g]=v.useState(!0),[w,f]=v.useState(!1),N=async()=>{s&&(s.length>o||w||(f(!0),await me(1e3),T()))},I=()=>{s&&(o+1>s.length||(h(o+1),c(!1),g(!1)))},_=()=>{p||(c(!i),d(!0),g(!0))},T=()=>{l(-1)};return e.jsxs(m,{component:V.div,initial:{opacity:0},animate:{opacity:1},direction:"column",mx:"auto",maw:a.breakpoints.xs,h:"100%",mah:"100%",children:[e.jsx(m,{h:64,style:{flexShrink:0},children:e.jsxs(m,{align:"center",gap:"xs",px:"md",w:"100%",h:"100%",children:[e.jsx(se,{onClick:T,size:48,variant:"subtle",children:e.jsx(te,{variant:"transparent",color:"gray",children:e.jsx(re,{size:32})})}),e.jsx(x.Root,{size:"xl",style:{flex:1},transitionDuration:500,onTransitionEnd:N,children:e.jsx(x.Section,{value:n,color:"green"})}),e.jsx("div",{style:{width:48,height:48}})]})}),e.jsxs(m,{direction:"column",justify:"center",gap:"xl",px:"md",pb:64,h:"100%",mih:0,children:[e.jsxs(m,{direction:"column",children:[e.jsx($,{order:6,c:"gray",children:"Collection"}),e.jsx($,{order:4,children:r==null?void 0:r.title})]}),e.jsx(m,{onClick:_,w:"100%",className:ue,style:{aspectRatio:1},children:e.jsxs(V.div,{initial:!1,animate:{rotateY:i?180:360},transition:{duration:u?.5:0,animationDirection:"normal"},onAnimationComplete:()=>d(!1),className:he,children:[e.jsx(D,{withBorder:!0,shadow:"xl",w:"100%",h:"100%",className:xe,children:e.jsx(m,{direction:"column",align:"center",justify:"center",w:"100%",h:"100%",children:e.jsx(y,{ta:"center",children:(F=s==null?void 0:s[o])==null?void 0:F.front})})}),e.jsx(D,{withBorder:!0,shadow:"xl",w:"100%",h:"100%",className:pe,children:e.jsx(m,{direction:"column",align:"center",justify:"center",w:"100%",h:"100%",children:e.jsx(y,{ta:"center",children:(B=s==null?void 0:s[o])==null?void 0:B.back})})})]})}),e.jsxs(m,{justify:"space-between",gap:"xs",children:[e.jsx(A,{onClick:I,variant:"light",color:"red",px:0,miw:48,mih:48,style:{flex:1},children:e.jsx(y,{fw:600,children:"HARD"})}),e.jsx(A,{onClick:_,variant:"light",color:"gray",px:0,miw:48,mih:48,style:{flex:1},children:e.jsx(y,{fw:600,children:"FLIP"})}),e.jsx(A,{onClick:I,variant:"light",px:0,miw:48,mih:48,style:{flex:1},children:e.jsx(y,{fw:600,children:"EASY"})})]})]})]})}export{we as default};
