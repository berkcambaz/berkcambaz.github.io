import{r as b,R as D,D as p,G as x,T as ri,Q as ti,K as se,L as ke,M as oi,E as K,S as fe,d as J,H as $,I as Z}from"./index-6ea61882.js";import{c as F,a as Y,g as T,B as q,A as ai}from"./game-5941f576.js";var si=Object.defineProperty,li=Object.defineProperties,ui=Object.getOwnPropertyDescriptors,ye=Object.getOwnPropertySymbols,di=Object.prototype.hasOwnProperty,fi=Object.prototype.propertyIsEnumerable,Pe=(e,r,i)=>r in e?si(e,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[r]=i,vi=(e,r)=>{for(var i in r||(r={}))di.call(r,i)&&Pe(e,i,r[i]);if(ye)for(var i of ye(r))fi.call(r,i)&&Pe(e,i,r[i]);return e},pi=(e,r)=>li(e,ui(r));function mi(e){const r=e.toLowerCase().split("+").map(o=>o.trim()),i={alt:r.includes("alt"),ctrl:r.includes("ctrl"),meta:r.includes("meta"),mod:r.includes("mod"),shift:r.includes("shift")},n=["alt","ctrl","meta","shift","mod"],t=r.find(o=>!n.includes(o));return pi(vi({},i),{key:t})}function ci(e,r){const{alt:i,ctrl:n,meta:t,mod:o,shift:a,key:s}=e,{altKey:l,ctrlKey:f,metaKey:u,shiftKey:v,key:d}=r;if(i!==l)return!1;if(o){if(!f&&!u)return!1}else if(n!==f||t!==u)return!1;return a!==v?!1:!!(s&&(d.toLowerCase()===s.toLowerCase()||r.code.replace("Key","").toLowerCase()===s.toLowerCase()))}function hi(e){return r=>ci(mi(e),r)}function gi(e,r,i=!1){return e.target instanceof HTMLElement?(i||!e.target.isContentEditable)&&!r.includes(e.target.tagName):!0}function Si(e,r=["INPUT","TEXTAREA","SELECT"],i=!1){b.useEffect(()=>{const n=t=>{e.forEach(([o,a,s={preventDefault:!0}])=>{hi(o)(t)&&gi(t,r,i)&&(s.preventDefault&&t.preventDefault(),a(t))})};return document.documentElement.addEventListener("keydown",n),()=>document.documentElement.removeEventListener("keydown",n)},[e])}function bi(){const[e,r]=b.useState(!1),i=b.useRef(null),n=b.useCallback(()=>r(!0),[]),t=b.useCallback(()=>r(!1),[]);return b.useEffect(()=>{if(i.current)return i.current.addEventListener("mouseenter",n),i.current.addEventListener("mouseleave",t),()=>{var o,a;(o=i.current)==null||o.removeEventListener("mouseenter",n),(a=i.current)==null||a.removeEventListener("mouseleave",t)}},[]),{ref:i,hovered:e}}var wi=F("arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]),yi=F("arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]),Pi=F("menu-2","IconMenu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]),Ci=F("message-circle-2","IconMessageCircle2",[["path",{d:"M3 20l1.3 -3.9a9 8 0 1 1 3.4 2.9l-4.7 1",key:"svg-0"}]]),Ti=F("refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]),A=function(e,r){return Number(e.toFixed(r))},Yi=function(e,r){return typeof e=="number"?e:r},y=function(e,r,i){i&&typeof i=="function"&&i(e,r)},Ei=function(e){return-Math.cos(e*Math.PI)/2+.5},Ai=function(e){return e},Xi=function(e){return e*e},zi=function(e){return e*(2-e)},_i=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},ki=function(e){return e*e*e},Mi=function(e){return--e*e*e+1},Ni=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},ji=function(e){return e*e*e*e},Di=function(e){return 1- --e*e*e*e},Oi=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},Wi=function(e){return e*e*e*e*e},Bi=function(e){return 1+--e*e*e*e*e},Li=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},Me={easeOut:Ei,linear:Ai,easeInQuad:Xi,easeOutQuad:zi,easeInOutQuad:_i,easeInCubic:ki,easeOutCubic:Mi,easeInOutCubic:Ni,easeInQuart:ji,easeOutQuart:Di,easeInOutQuart:Oi,easeInQuint:Wi,easeOutQuint:Bi,easeInOutQuint:Li},Ne=function(e){typeof e=="number"&&cancelAnimationFrame(e)},_=function(e){e.mounted&&(Ne(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function je(e,r,i,n){if(e.mounted){var t=new Date().getTime(),o=1;_(e),e.animation=function(){if(!e.mounted)return Ne(e.animation);var a=new Date().getTime()-t,s=a/i,l=Me[r],f=l(s);a>=i?(n(o),e.animation=null):e.animation&&(n(f),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function Zi(e){var r=e.scale,i=e.positionX,n=e.positionY;return!(Number.isNaN(r)||Number.isNaN(i)||Number.isNaN(n))}function N(e,r,i,n){var t=Zi(r);if(!(!e.mounted||!t)){var o=e.setTransformState,a=e.transformState,s=a.scale,l=a.positionX,f=a.positionY,u=r.scale-s,v=r.positionX-l,d=r.positionY-f;i===0?o(r.scale,r.positionX,r.positionY):je(e,n,i,function(m){var c=s+u*m,g=l+v*m,w=f+d*m;o(c,g,w)})}}function Hi(e,r,i){var n=e.offsetWidth,t=e.offsetHeight,o=r.offsetWidth,a=r.offsetHeight,s=o*i,l=a*i,f=n-s,u=t-l;return{wrapperWidth:n,wrapperHeight:t,newContentWidth:s,newDiffWidth:f,newContentHeight:l,newDiffHeight:u}}var Ki=function(e,r,i,n,t,o,a){var s=e>r?i*(a?1:.5):0,l=n>t?o*(a?1:.5):0,f=e-r-s,u=s,v=n-t-l,d=l;return{minPositionX:f,maxPositionX:u,minPositionY:v,maxPositionY:d}},ve=function(e,r){var i=e.wrapperComponent,n=e.contentComponent,t=e.setup.centerZoomedOut;if(!i||!n)throw new Error("Components are not mounted");var o=Hi(i,n,r),a=o.wrapperWidth,s=o.wrapperHeight,l=o.newContentWidth,f=o.newDiffWidth,u=o.newContentHeight,v=o.newDiffHeight,d=Ki(a,l,f,s,u,v,!!t);return d},le=function(e,r,i,n){return n?e<r?A(r,2):e>i?A(i,2):A(e,2):A(e,2)},B=function(e,r){var i=ve(e,r);return e.bounds=i,i};function I(e,r,i,n,t,o,a){var s=i.minPositionX,l=i.minPositionY,f=i.maxPositionX,u=i.maxPositionY,v=0,d=0;a&&(v=t,d=o);var m=le(e,s-v,f+v,n),c=le(r,l-d,u+d,n);return{x:m,y:c}}function ee(e,r,i,n,t,o){var a=e.transformState,s=a.scale,l=a.positionX,f=a.positionY,u=n-s;if(typeof r!="number"||typeof i!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:f};var v=l-r*u,d=f-i*u,m=I(v,d,t,o,0,0,null);return m}function V(e,r,i,n,t){var o=t?n:0,a=r-o;return!Number.isNaN(i)&&e>=i?i:!Number.isNaN(r)&&e<=a?a:e}var Ce=function(e,r){var i=e.setup.panning.excluded,n=e.isInitialized,t=e.wrapperComponent,o=r.target,a=t==null?void 0:t.contains(o),s=n&&o&&a;if(!s)return!1;var l=ie(o,i);return!l},Te=function(e){var r=e.isInitialized,i=e.isPanning,n=e.setup,t=n.panning.disabled,o=r&&i&&!t;return!!o},xi=function(e,r){var i=e.transformState,n=i.positionX,t=i.positionY;e.isPanning=!0;var o=r.clientX,a=r.clientY;e.startCoords={x:o-n,y:a-t}},Ri=function(e,r){var i=r.touches,n=e.transformState,t=n.positionX,o=n.positionY;e.isPanning=!0;var a=i.length===1;if(a){var s=i[0].clientX,l=i[0].clientY;e.startCoords={x:s-t,y:l-o}}};function Fi(e){var r=e.transformState,i=r.positionX,n=r.positionY,t=r.scale,o=e.setup,a=o.disabled,s=o.limitToBounds,l=o.centerZoomedOut,f=e.wrapperComponent;if(!(a||!f||!e.bounds)){var u=e.bounds,v=u.maxPositionX,d=u.minPositionX,m=u.maxPositionY,c=u.minPositionY,g=i>v||i<d,w=n>m||n<c,C=i>v?f.offsetWidth:e.setup.minPositionX||0,h=n>m?f.offsetHeight:e.setup.minPositionY||0,P=ee(e,C,h,t,e.bounds,s||l),X=P.x,E=P.y;return{scale:t,positionX:g?X:i,positionY:w?E:n}}}function Vi(e,r,i,n,t){var o=e.setup.limitToBounds,a=e.wrapperComponent,s=e.bounds,l=e.transformState,f=l.scale,u=l.positionX,v=l.positionY;if(!(a===null||s===null||r===u&&i===v)){var d=I(r,i,s,o,n,t,a),m=d.x,c=d.y;e.setTransformState(f,m,c)}}var Qi=function(e,r,i){var n=e.startCoords,t=e.transformState,o=e.setup.panning,a=o.lockAxisX,s=o.lockAxisY,l=t.positionX,f=t.positionY;if(!n)return{x:l,y:f};var u=r-n.x,v=i-n.y,d=a?l:u,m=s?f:v;return{x:d,y:m}},G=function(e,r){var i=e.setup,n=e.transformState,t=n.scale,o=i.minScale,a=i.disablePadding;return r>0&&t>=o&&!a?r:0},$i=function(e){var r=e.mounted,i=e.setup,n=i.disabled,t=i.velocityAnimation,o=e.transformState.scale,a=t.disabled,s=!a||o>1||!n||r;return!!s},qi=function(e){var r=e.mounted,i=e.velocity,n=e.bounds,t=e.setup,o=t.disabled,a=t.velocityAnimation,s=e.transformState.scale,l=a.disabled,f=!l||s>1||!o||r;return!(!f||!i||!n)};function Ui(e,r){var i=e.setup.velocityAnimation,n=i.equalToMove,t=i.animationTime,o=i.sensitivity;return n?t*r*o:t}function Ye(e,r,i,n,t,o,a,s,l,f){if(t){if(r>a&&i>a){var u=a+(e-a)*f;return u>l?l:u<a?a:u}if(r<o&&i<o){var u=o+(e-o)*f;return u<s?s:u>o?o:u}}return n?r:le(e,o,a,t)}function Gi(e,r){var i=1;return r?Math.min(i,e.offsetWidth/window.innerWidth):i}function Ji(e,r){var i=$i(e);if(i){var n=e.lastMousePosition,t=e.velocityTime,o=e.setup,a=e.wrapperComponent,s=o.velocityAnimation.equalToMove,l=Date.now();if(n&&t&&a){var f=Gi(a,s),u=r.x-n.x,v=r.y-n.y,d=u/f,m=v/f,c=l-t,g=u*u+v*v,w=Math.sqrt(g)/c;e.velocity={velocityX:d,velocityY:m,total:w}}e.lastMousePosition=r,e.velocityTime=l}}function Ii(e){var r=e.velocity,i=e.bounds,n=e.setup,t=e.wrapperComponent,o=qi(e);if(!(!o||!r||!i||!t)){var a=r.velocityX,s=r.velocityY,l=r.total,f=i.maxPositionX,u=i.minPositionX,v=i.maxPositionY,d=i.minPositionY,m=n.limitToBounds,c=n.alignmentAnimation,g=n.zoomAnimation,w=n.panning,C=w.lockAxisY,h=w.lockAxisX,P=g.animationType,X=c.sizeX,E=c.sizeY,k=c.velocityAlignmentTime,z=k,j=Ui(e,l),O=Math.max(j,z),W=G(e,X),L=G(e,E),Q=W*t.offsetWidth/100,ce=L*t.offsetHeight/100,Fe=f+Q,Ve=u-Q,Qe=v+ce,$e=d-ce,he=e.transformState,qe=new Date().getTime();je(e,P,O,function(Ue){var ne=e.transformState,Ge=ne.scale,re=ne.positionX,te=ne.positionY,Je=new Date().getTime()-qe,Ie=Je/z,ei=Me[c.animationType],ge=1-ei(Math.min(1,Ie)),Se=1-Ue,be=re+a*Se,we=te+s*Se,ii=Ye(be,he.positionX,re,h,m,u,f,Ve,Fe,ge),ni=Ye(we,he.positionY,te,C,m,d,v,$e,Qe,ge);(re!==be||te!==we)&&e.setTransformState(Ge,ii,ni)})}}function Ee(e,r){var i=e.transformState.scale;_(e),B(e,i),window.TouchEvent!==void 0&&r instanceof TouchEvent?Ri(e,r):xi(e,r)}function De(e){var r=e.transformState.scale,i=e.setup,n=i.minScale,t=i.alignmentAnimation,o=t.disabled,a=t.sizeX,s=t.sizeY,l=t.animationTime,f=t.animationType,u=o||r<n||!a&&!s;if(!u){var v=Fi(e);v&&N(e,v,l,f)}}function Ae(e,r,i){var n=e.startCoords,t=e.setup,o=t.alignmentAnimation,a=o.sizeX,s=o.sizeY;if(n){var l=Qi(e,r,i),f=l.x,u=l.y,v=G(e,a),d=G(e,s);Ji(e,{x:f,y:u}),Vi(e,f,u,v,d)}}function en(e){if(e.isPanning){var r=e.setup.panning.velocityDisabled,i=e.velocity,n=e.wrapperComponent,t=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var o=n==null?void 0:n.getBoundingClientRect(),a=t==null?void 0:t.getBoundingClientRect(),s=(o==null?void 0:o.width)||0,l=(o==null?void 0:o.height)||0,f=(a==null?void 0:a.width)||0,u=(a==null?void 0:a.height)||0,v=s<f||l<u,d=!r&&i&&(i==null?void 0:i.total)>.1&&v;d?Ii(e):De(e)}}function pe(e,r,i,n){var t=e.setup,o=t.minScale,a=t.maxScale,s=t.limitToBounds,l=V(A(r,2),o,a,0,!1),f=B(e,l),u=ee(e,i,n,l,f,s),v=u.x,d=u.y;return{scale:l,positionX:v,positionY:d}}function Oe(e,r,i){var n=e.transformState.scale,t=e.wrapperComponent,o=e.setup,a=o.minScale,s=o.limitToBounds,l=o.zoomAnimation,f=l.disabled,u=l.animationTime,v=l.animationType,d=f||n>=a;if((n>=1||s)&&De(e),!(d||!t||!e.mounted)){var m=r||t.offsetWidth/2,c=i||t.offsetHeight/2,g=pe(e,a,m,c);g&&N(e,g,u,v)}}var M=function(){return M=Object.assign||function(r){for(var i,n=1,t=arguments.length;n<t;n++){i=arguments[n];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])}return r},M.apply(this,arguments)};function Xe(e,r,i){if(i||arguments.length===2)for(var n=0,t=r.length,o;n<t;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))}var U={previousScale:1,scale:1,positionX:0,positionY:0},H={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},We=function(e){var r,i,n,t;return{previousScale:(r=e.initialScale)!==null&&r!==void 0?r:U.scale,scale:(i=e.initialScale)!==null&&i!==void 0?i:U.scale,positionX:(n=e.initialPositionX)!==null&&n!==void 0?n:U.positionX,positionY:(t=e.initialPositionY)!==null&&t!==void 0?t:U.positionY}},ze=function(e){var r=M({},H);return Object.keys(e).forEach(function(i){var n=typeof e[i]<"u",t=typeof H[i]<"u";if(t&&n){var o=Object.prototype.toString.call(H[i]),a=o==="[object Object]",s=o==="[object Array]";a?r[i]=M(M({},H[i]),e[i]):s?r[i]=Xe(Xe([],H[i],!0),e[i],!0):r[i]=e[i]}}),r},Be=function(e,r,i){var n=e.transformState.scale,t=e.wrapperComponent,o=e.setup,a=o.maxScale,s=o.minScale,l=o.zoomAnimation,f=o.smooth,u=l.size;if(!t)throw new Error("Wrapper is not mounted");var v=f?n*Math.exp(r*i):n+r*i,d=V(A(v,3),s,a,u,!1);return d};function Le(e,r,i,n,t){var o=e.wrapperComponent,a=e.transformState,s=a.scale,l=a.positionX,f=a.positionY;if(!o)return console.error("No WrapperComponent found");var u=o.offsetWidth,v=o.offsetHeight,d=(u/2-l)/s,m=(v/2-f)/s,c=Be(e,r,i),g=pe(e,c,d,m);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");N(e,g,n,t)}function Ze(e,r,i,n){var t=e.setup,o=e.wrapperComponent,a=t.limitToBounds,s=We(e.props),l=e.transformState,f=l.scale,u=l.positionX,v=l.positionY;if(o){var d=ve(e,s.scale),m=I(s.positionX,s.positionY,d,a,0,0,o),c={scale:s.scale,positionX:m.x,positionY:m.y};f===s.scale&&u===s.positionX&&v===s.positionY||(n==null||n(),N(e,c,r,i))}}function nn(e,r,i,n){var t=e.getBoundingClientRect(),o=r.getBoundingClientRect(),a=i.getBoundingClientRect(),s=o.x*n.scale,l=o.y*n.scale;return{x:(t.x-a.x+s)/n.scale,y:(t.y-a.y+l)/n.scale}}function rn(e,r,i){var n=e.wrapperComponent,t=e.contentComponent,o=e.transformState,a=e.setup,s=a.limitToBounds,l=a.minScale,f=a.maxScale;if(!n||!t)return o;var u=n.getBoundingClientRect(),v=r.getBoundingClientRect(),d=nn(r,n,t,o),m=d.x,c=d.y,g=v.width/o.scale,w=v.height/o.scale,C=n.offsetWidth/g,h=n.offsetHeight/w,P=V(i||Math.min(C,h),l,f,0,!1),X=(u.width-g*P)/2,E=(u.height-w*P)/2,k=(u.left-m)*P+X,z=(u.top-c)*P+E,j=ve(e,P),O=I(k,z,j,s,0,0,n),W=O.x,L=O.y;return{positionX:W,positionY:L,scale:P}}var tn=function(e){return function(r,i,n){r===void 0&&(r=.5),i===void 0&&(i=300),n===void 0&&(n="easeOut"),Le(e,1,r,i,n)}},on=function(e){return function(r,i,n){r===void 0&&(r=.5),i===void 0&&(i=300),n===void 0&&(n="easeOut"),Le(e,-1,r,i,n)}},an=function(e){return function(r,i,n,t,o){t===void 0&&(t=300),o===void 0&&(o="easeOut");var a=e.transformState,s=a.positionX,l=a.positionY,f=a.scale,u=e.wrapperComponent,v=e.contentComponent,d=e.setup.disabled;if(!(d||!u||!v)){var m={positionX:Number.isNaN(r)?s:r,positionY:Number.isNaN(i)?l:i,scale:Number.isNaN(n)?f:n};N(e,m,t,o)}}},sn=function(e){return function(r,i){r===void 0&&(r=200),i===void 0&&(i="easeOut"),Ze(e,r,i)}},ln=function(e){return function(r,i,n){i===void 0&&(i=200),n===void 0&&(n="easeOut");var t=e.transformState,o=e.wrapperComponent,a=e.contentComponent;if(o&&a){var s=He(r||t.scale,o,a);N(e,s,i,n)}}},un=function(e){return function(r,i,n,t){n===void 0&&(n=600),t===void 0&&(t="easeOut"),_(e);var o=e.wrapperComponent,a=typeof r=="string"?document.getElementById(r):r;if(o&&a&&o.contains(a)){var s=rn(e,a,i);N(e,s,n,t)}}},ue=function(e){return{instance:e,zoomIn:tn(e),zoomOut:on(e),setTransform:an(e),resetTransform:sn(e),centerView:ln(e),zoomToElement:un(e)}},dn=function(e){return{instance:e,state:e.transformState}},S=function(e){var r={};return Object.assign(r,dn(e)),Object.assign(r,ue(e)),r},oe=!1;function ae(){try{var e={get passive(){return oe=!0,!1}};return e}catch{return oe=!1,oe}}var ie=function(e,r){var i=e.tagName.toUpperCase(),n=r.find(function(o){return o.toUpperCase()===i});if(n)return!0;var t=r.find(function(o){return e.classList.contains(o)});return!!t},de=function(e){e&&clearTimeout(e)},fn=function(e,r,i){return"translate(".concat(e,"px, ").concat(r,"px) scale(").concat(i,")")},He=function(e,r,i){var n=i.offsetWidth*e,t=i.offsetHeight*e,o=(r.offsetWidth-n)/2,a=(r.offsetHeight-t)/2;return{scale:e,positionX:o,positionY:a}};function vn(e){return function(r){e.forEach(function(i){typeof i=="function"?i(r):i!=null&&(i.current=r)})}}var pn=function(e,r){var i=e.setup.wheel,n=i.disabled,t=i.wheelDisabled,o=i.touchPadDisabled,a=i.excluded,s=e.isInitialized,l=e.isPanning,f=r.target,u=s&&!l&&!n&&f;if(!u||t&&!r.ctrlKey||o&&r.ctrlKey)return!1;var v=ie(f,a);return!v},mn=function(e){return e?e.deltaY<0?1:-1:0};function cn(e,r){var i=mn(e),n=Yi(r,i);return n}function Ke(e,r,i){var n=r.getBoundingClientRect(),t=0,o=0;if("clientX"in e)t=(e.clientX-n.left)/i,o=(e.clientY-n.top)/i;else{var a=e.touches[0];t=(a.clientX-n.left)/i,o=(a.clientY-n.top)/i}return(Number.isNaN(t)||Number.isNaN(o))&&console.error("No mouse or touch offset found"),{x:t,y:o}}var hn=function(e,r,i,n,t){var o=e.transformState.scale,a=e.wrapperComponent,s=e.setup,l=s.maxScale,f=s.minScale,u=s.zoomAnimation,v=s.disablePadding,d=u.size,m=u.disabled;if(!a)throw new Error("Wrapper is not mounted");var c=o+r*i;if(t)return c;var g=n?!1:!m,w=V(A(c,3),f,l,d,g&&!v);return w},gn=function(e,r){var i=e.previousWheelEvent,n=e.transformState.scale,t=e.setup,o=t.maxScale,a=t.minScale;return i?n<o||n>a||Math.sign(i.deltaY)!==Math.sign(r.deltaY)||i.deltaY>0&&i.deltaY<r.deltaY||i.deltaY<0&&i.deltaY>r.deltaY||Math.sign(i.deltaY)!==Math.sign(r.deltaY):!1},Sn=function(e,r){var i=e.setup.pinch,n=i.disabled,t=i.excluded,o=e.isInitialized,a=r.target,s=o&&!n&&a;if(!s)return!1;var l=ie(a,t);return!l},bn=function(e){var r=e.setup.pinch.disabled,i=e.isInitialized,n=e.pinchStartDistance,t=i&&!r&&n;return!!t},wn=function(e,r,i){var n=i.getBoundingClientRect(),t=e.touches,o=A(t[0].clientX-n.left,5),a=A(t[0].clientY-n.top,5),s=A(t[1].clientX-n.left,5),l=A(t[1].clientY-n.top,5);return{x:(o+s)/2/r,y:(a+l)/2/r}},xe=function(e){return Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))},yn=function(e,r){var i=e.pinchStartScale,n=e.pinchStartDistance,t=e.setup,o=t.maxScale,a=t.minScale,s=t.zoomAnimation,l=t.disablePadding,f=s.size,u=s.disabled;if(!i||n===null||!r)throw new Error("Pinch touches distance was not provided");if(r<0)return e.transformState.scale;var v=r/n,d=v*i;return V(A(d,2),a,o,f,!u&&!l)},Pn=160,Cn=100,Tn=function(e,r){var i=e.props,n=i.onWheelStart,t=i.onZoomStart;e.wheelStopEventTimer||(_(e),y(S(e),r,n),y(S(e),r,t))},Yn=function(e,r){var i=e.props,n=i.onWheel,t=i.onZoom,o=e.contentComponent,a=e.setup,s=e.transformState,l=s.scale,f=a.limitToBounds,u=a.centerZoomedOut,v=a.zoomAnimation,d=a.wheel,m=a.disablePadding,c=a.smooth,g=v.size,w=v.disabled,C=d.step,h=d.smoothStep;if(!o)throw new Error("Component not mounted");r.preventDefault(),r.stopPropagation();var P=cn(r,null),X=c?h*Math.abs(r.deltaY):C,E=hn(e,P,X,!r.ctrlKey);if(l!==E){var k=B(e,E),z=Ke(r,o,l),j=w||g===0||u||m,O=f&&j,W=ee(e,z.x,z.y,E,k,O),L=W.x,Q=W.y;e.previousWheelEvent=r,e.setTransformState(E,L,Q),y(S(e),r,n),y(S(e),r,t)}},En=function(e,r){var i=e.props,n=i.onWheelStop,t=i.onZoomStop;de(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout(function(){e.mounted&&(Oe(e,r.x,r.y),e.wheelAnimationTimer=null)},Cn);var o=gn(e,r);o&&(de(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout(function(){e.mounted&&(e.wheelStopEventTimer=null,y(S(e),r,n),y(S(e),r,t))},Pn))},An=function(e,r){var i=xe(r);e.pinchStartDistance=i,e.lastDistance=i,e.pinchStartScale=e.transformState.scale,e.isPanning=!1,_(e)},Xn=function(e,r){var i=e.contentComponent,n=e.pinchStartDistance,t=e.transformState.scale,o=e.setup,a=o.limitToBounds,s=o.centerZoomedOut,l=o.zoomAnimation,f=l.disabled,u=l.size;if(!(n===null||!i)){var v=wn(r,t,i);if(!(!Number.isFinite(v.x)||!Number.isFinite(v.y))){var d=xe(r),m=yn(e,d);if(m!==t){var c=B(e,m),g=f||u===0||s,w=a&&g,C=ee(e,v.x,v.y,m,c,w),h=C.x,P=C.y;e.pinchMidpoint=v,e.lastDistance=d,e.setTransformState(m,h,P)}}}},zn=function(e){var r=e.pinchMidpoint;e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,Oe(e,r==null?void 0:r.x,r==null?void 0:r.y)},Re=function(e,r){var i=e.props.onZoomStop,n=e.setup.doubleClick.animationTime;de(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout(function(){e.doubleClickStopEventTimer=null,y(S(e),r,i)},n)},_n=function(e,r){var i=e.props,n=i.onZoomStart,t=i.onZoom,o=e.setup.doubleClick,a=o.animationTime,s=o.animationType;y(S(e),r,n),Ze(e,a,s,function(){return y(S(e),r,t)}),Re(e,r)};function kn(e,r){var i=e.setup,n=e.doubleClickStopEventTimer,t=e.transformState,o=e.contentComponent,a=t.scale,s=e.props,l=s.onZoomStart,f=s.onZoom,u=i.doubleClick,v=u.disabled,d=u.mode,m=u.step,c=u.animationTime,g=u.animationType;if(!v&&!n){if(d==="reset")return _n(e,r);if(!o)return console.error("No ContentComponent found");var w=d==="zoomOut"?-1:1,C=Be(e,w,m);if(a!==C){y(S(e),r,l);var h=Ke(r,o,a),P=pe(e,C,h.x,h.y);if(!P)return console.error("Error during zoom event. New transformation state was not calculated.");y(S(e),r,f),N(e,P,c,g),Re(e,r)}}}var Mn=function(e,r){var i=e.isInitialized,n=e.setup,t=e.wrapperComponent,o=n.doubleClick,a=o.disabled,s=o.excluded,l=r.target,f=t==null?void 0:t.contains(l),u=i&&l&&f&&!a;if(!u)return!1;var v=ie(l,s);return!v},Nn=function(){function e(r){var i=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){i.initializeWindowEvents()},this.unmount=function(){i.cleanupWindowEvents()},this.update=function(n){B(i,i.transformState.scale),i.setup=ze(n)},this.initializeWindowEvents=function(){var n,t=ae(),o=(n=i.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,a=o==null?void 0:o.defaultView;a==null||a.addEventListener("mousedown",i.onPanningStart,t),a==null||a.addEventListener("mousemove",i.onPanning,t),a==null||a.addEventListener("mouseup",i.onPanningStop,t),o==null||o.addEventListener("mouseleave",i.clearPanning,t),a==null||a.addEventListener("keyup",i.setKeyUnPressed,t),a==null||a.addEventListener("keydown",i.setKeyPressed,t)},this.cleanupWindowEvents=function(){var n,t,o=ae(),a=(n=i.wrapperComponent)===null||n===void 0?void 0:n.ownerDocument,s=a==null?void 0:a.defaultView;s==null||s.removeEventListener("mousedown",i.onPanningStart,o),s==null||s.removeEventListener("mousemove",i.onPanning,o),s==null||s.removeEventListener("mouseup",i.onPanningStop,o),a==null||a.removeEventListener("mouseleave",i.clearPanning,o),s==null||s.removeEventListener("keyup",i.setKeyUnPressed,o),s==null||s.removeEventListener("keydown",i.setKeyPressed,o),document.removeEventListener("mouseleave",i.clearPanning,o),_(i),(t=i.observer)===null||t===void 0||t.disconnect()},this.handleInitializeWrapperEvents=function(n){var t=ae();n.addEventListener("wheel",i.onWheelZoom,t),n.addEventListener("dblclick",i.onDoubleClick,t),n.addEventListener("touchstart",i.onTouchPanningStart,t),n.addEventListener("touchmove",i.onTouchPanning,t),n.addEventListener("touchend",i.onTouchPanningStop,t)},this.handleInitialize=function(n){var t=i.setup.centerOnInit;i.applyTransformation(),i.onInitCallbacks.forEach(function(o){return o(S(i))}),t&&(i.setCenter(),i.observer=new ResizeObserver(function(){var o;i.onInitCallbacks.forEach(function(a){return a(S(i))}),i.setCenter(),(o=i.observer)===null||o===void 0||o.disconnect()}),i.observer.observe(n))},this.onWheelZoom=function(n){var t=i.setup.disabled;if(!t){var o=pn(i,n);if(o){var a=i.isPressingKeys(i.setup.wheel.activationKeys);a&&(Tn(i,n),Yn(i,n),En(i,n))}}},this.onPanningStart=function(n){var t=i.setup.disabled,o=i.props.onPanningStart;if(!t){var a=Ce(i,n);if(a){var s=i.isPressingKeys(i.setup.panning.activationKeys);s&&(n.preventDefault(),n.stopPropagation(),_(i),Ee(i,n),y(S(i),n,o))}}},this.onPanning=function(n){var t=i.setup.disabled,o=i.props.onPanning;if(!t){var a=Te(i);if(a){var s=i.isPressingKeys(i.setup.panning.activationKeys);s&&(n.preventDefault(),n.stopPropagation(),Ae(i,n.clientX,n.clientY),y(S(i),n,o))}}},this.onPanningStop=function(n){var t=i.props.onPanningStop;i.isPanning&&(en(i),y(S(i),n,t))},this.onPinchStart=function(n){var t=i.setup.disabled,o=i.props,a=o.onPinchingStart,s=o.onZoomStart;if(!t){var l=Sn(i,n);l&&(An(i,n),_(i),y(S(i),n,a),y(S(i),n,s))}},this.onPinch=function(n){var t=i.setup.disabled,o=i.props,a=o.onPinching,s=o.onZoom;if(!t){var l=bn(i);l&&(n.preventDefault(),n.stopPropagation(),Xn(i,n),y(S(i),n,a),y(S(i),n,s))}},this.onPinchStop=function(n){var t=i.props,o=t.onPinchingStop,a=t.onZoomStop;i.pinchStartScale&&(zn(i),y(S(i),n,o),y(S(i),n,a))},this.onTouchPanningStart=function(n){var t=i.setup.disabled,o=i.props.onPanningStart;if(!t){var a=Ce(i,n);if(a){var s=i.lastTouch&&+new Date-i.lastTouch<200;if(s&&n.touches.length===1)i.onDoubleClick(n);else{i.lastTouch=+new Date,_(i);var l=n.touches,f=l.length===1,u=l.length===2;f&&(_(i),Ee(i,n),y(S(i),n,o)),u&&i.onPinchStart(n)}}}},this.onTouchPanning=function(n){var t=i.setup.disabled,o=i.props.onPanning;if(i.isPanning&&n.touches.length===1){if(t)return;var a=Te(i);if(!a)return;n.preventDefault(),n.stopPropagation();var s=n.touches[0];Ae(i,s.clientX,s.clientY),y(S(i),n,o)}else n.touches.length>1&&i.onPinch(n)},this.onTouchPanningStop=function(n){i.onPanningStop(n),i.onPinchStop(n)},this.onDoubleClick=function(n){var t=i.setup.disabled;if(!t){var o=Mn(i,n);o&&kn(i,n)}},this.clearPanning=function(n){i.isPanning&&i.onPanningStop(n)},this.setKeyPressed=function(n){i.pressedKeys[n.key]=!0},this.setKeyUnPressed=function(n){i.pressedKeys[n.key]=!1},this.isPressingKeys=function(n){return n.length?!!n.find(function(t){return i.pressedKeys[t]}):!0},this.setTransformState=function(n,t,o){var a=i.props.onTransformed;if(!Number.isNaN(n)&&!Number.isNaN(t)&&!Number.isNaN(o)){n!==i.transformState.scale&&(i.transformState.previousScale=i.transformState.scale,i.transformState.scale=n),i.transformState.positionX=t,i.transformState.positionY=o,i.applyTransformation();var s=S(i);i.onChangeCallbacks.forEach(function(l){return l(s)}),y(s,{scale:n,positionX:t,positionY:o},a)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(i.wrapperComponent&&i.contentComponent){var n=He(i.transformState.scale,i.wrapperComponent,i.contentComponent);i.setTransformState(n.scale,n.positionX,n.positionY)}},this.handleTransformStyles=function(n,t,o){return i.props.customTransform?i.props.customTransform(n,t,o):fn(n,t,o)},this.applyTransformation=function(){if(!(!i.mounted||!i.contentComponent)){var n=i.transformState,t=n.scale,o=n.positionX,a=n.positionY,s=i.handleTransformStyles(o,a,t);i.contentComponent.style.transform=s}},this.getContext=function(){return S(i)},this.onChange=function(n){return i.onChangeCallbacks.has(n)||i.onChangeCallbacks.add(n),function(){i.onChangeCallbacks.delete(n)}},this.onInit=function(n){return i.onInitCallbacks.has(n)||i.onInitCallbacks.add(n),function(){i.onInitCallbacks.delete(n)}},this.init=function(n,t){i.cleanupWindowEvents(),i.wrapperComponent=n,i.contentComponent=t,B(i,i.transformState.scale),i.handleInitializeWrapperEvents(n),i.handleInitialize(t),i.initializeWindowEvents(),i.isInitialized=!0;var o=S(i);y(o,void 0,i.props.onInit)},this.props=r,this.setup=ze(this.props),this.transformState=We(this.props)}return e}(),me=D.createContext(null),jn=function(e,r){return typeof e=="function"?e(r):e},Dn=D.forwardRef(function(e,r){var i=b.useRef(new Nn(e)).current,n=jn(e.children,ue(i));return b.useImperativeHandle(r,function(){return ue(i)},[i]),b.useEffect(function(){i.update(e)},[i,e]),D.createElement(me.Provider,{value:i},n)});D.forwardRef(function(e,r){var i=b.useRef(null),n=b.useContext(me);return b.useEffect(function(){return n.onChange(function(t){if(i.current){var o=0,a=0;i.current.style.transform=n.handleTransformStyles(o,a,1/t.instance.transformState.scale)}})},[n]),D.createElement("div",M({},e,{ref:vn([i,r])}))});function On(e,r){r===void 0&&(r={});var i=r.insertAt;if(!(!e||typeof document>"u")){var n=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",i==="top"&&n.firstChild?n.insertBefore(t,n.firstChild):n.appendChild(t),t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}}var Wn=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,_e={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};On(Wn);var Bn=function(e){var r=e.children,i=e.wrapperClass,n=i===void 0?"":i,t=e.contentClass,o=t===void 0?"":t,a=e.wrapperStyle,s=e.contentStyle,l=e.wrapperProps,f=l===void 0?{}:l,u=e.contentProps,v=u===void 0?{}:u,d=b.useContext(me).init,m=b.useRef(null),c=b.useRef(null);return b.useEffect(function(){var g=m.current,w=c.current;g!==null&&w!==null&&d&&d(g,w)},[]),D.createElement("div",M({},f,{ref:m,className:"react-transform-wrapper ".concat(_e.wrapper," ").concat(n),style:a}),D.createElement("div",M({},v,{ref:c,className:"react-transform-component ".concat(_e.content," ").concat(o),style:s}),r))};function R({tile:e}){var a;const r=Y(s=>s.data),i=b.useMemo(()=>new Intl.NumberFormat("en",{signDisplay:"exceptZero"}),[]),n=(a=r.match)==null?void 0:a.players.filter(s=>{var l;return s.id===((l=e.unit)==null?void 0:l.owner)})[0],t=e.unit&&!!T.units[e.unit.id].getActableTiles(r,e).length,o=b.useMemo(()=>t?void 0:"brightness(50%)",[t]);return e.unit?p.jsxs(p.Fragment,{children:[p.jsx("img",{src:x.units[e.unit.id],width:128,style:{position:"absolute",transform:"translate(0px, 0px) scale(0.5)",zIndex:2,filter:o}}),p.jsx("div",{style:{position:"absolute",width:128,zIndex:3,textShadow:"-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000"},children:p.jsx(ri,{align:"center",weight:800,size:32,color:n==null?void 0:n.color,children:i.format(T.units[e.unit.id].getBonus(r,e))})})]}):null}function Ln({tile:e}){var c,g,w,C;const r=Y(h=>h.data),i=r.animations[0],n=(c=r.match)==null?void 0:c.players.filter(h=>h.id===e.owner)[0],t=r.match&&T.util.getAdjacent4Tiles(r.match,e.pos),o=b.useMemo(()=>{var X,E,k,z;const h=r.match.players.filter(j=>j.id===e.owner)[0];if(!h)return{};const P=`5px dashed ${h.color}`;return{borderTop:((X=t.n)==null?void 0:X.owner)!==h.id?P:void 0,borderRight:((E=t.e)==null?void 0:E.owner)!==h.id?P:void 0,borderBottom:((k=t.s)==null?void 0:k.owner)!==h.id?P:void 0,borderLeft:((z=t.w)==null?void 0:z.owner)!==h.id?P:void 0}},[t,e.owner]),{hovered:a,ref:s}=bi();b.useEffect(()=>{a&&Y.setState(h=>{h.data.hoveredTile=e.pos})},[a]);const l=()=>{Y.setState(h=>{h.data.match&&T.events.selectTile.act(h.data,{player:h.data.match.turn.player,pos:e.pos})})},{onClick:f,onMouseDown:u,onMouseMove:v,onTouchStart:d,onTouchMove:m}=ti(l);return p.jsxs("div",{onClick:f,onMouseDown:u,onMouseMove:v,onTouchStart:d,onTouchMove:m,ref:s,style:{position:"absolute",left:e.pos.x*128,top:e.pos.y*128,width:128,height:128,backgroundColor:T.util.comparePos(e.pos,r.hoveredTile)?"rgba(255,255,255,0.5)":void 0,borderRadius:6},children:[p.jsx("div",{style:{position:"absolute",top:0,left:0,width:128,height:128,...o}}),p.jsx("img",{src:x.tileTypes[e.type],width:128,height:128,style:{position:"absolute",transform:"translate(0px, 0px)",zIndex:0}}),p.jsx("img",{src:e.landmark&&x.landmarks[e.landmark.id],width:128,style:{position:"absolute",transform:"translate(0px, 0px)",zIndex:1}}),!T.util.isUnitAnimating(r,e)&&p.jsx(R,{tile:e}),r.match.running&&n&&((w=(g=T.landmarks[n.banner]).canCreate)==null?void 0:w.call(g,r,e))&&p.jsx("img",{src:x.landmarks[n.banner],width:128,style:{position:"absolute",transform:"translate(0px, 0px)",zIndex:1,filter:"brightness(0.5)"}}),!i&&!!((C=r==null?void 0:r.highlightedTiles)!=null&&C.filter(h=>T.util.comparePos(h,e.pos)).length)&&p.jsx("div",{style:{position:"absolute",transform:"translate(0px, 0px)",zIndex:3,width:128,height:128,backgroundColor:"rgba(0, 0, 0, 0.375)"}})]})}function Zn(){const e=se(s=>s.modals.gameMenu),r=()=>{se.setState(s=>{s.modals.gameMenu.opened=!1})},i=ke(),n=()=>{r()},t=()=>{r()},o=()=>{r()},a=()=>{Y.setState(s=>{T.events.createMatch.act(s.data,{...s.lobby})}),i("/home"),r()};return p.jsx(oi,{opened:e.opened,onClose:r,title:"Menu",centered:!0,size:240,children:p.jsxs(K,{direction:"column",gap:"md",children:[p.jsx(q,{onClick:n,children:"Continue"}),p.jsx(q,{variant:"default",onClick:t,children:"Game Settings"}),p.jsx(q,{variant:"default",onClick:o,children:"Lobby Settings"}),p.jsx(q,{color:"red",onClick:a,children:"Quit"})]})})}function Hn(){const e=Y(n=>n.data);function r(n){Y.setState(t=>{T.events.removeAnimation.act(t.data,{animationId:n})})}return b.useMemo(()=>{const n=[];for(let t=0;t<e.animations.length;++t){const o=e.animations[t];if(!o)continue;const a=`${o==null?void 0:o.type}${o==null?void 0:o.from.pos.x}:${o==null?void 0:o.from.pos.y}`;switch(o==null?void 0:o.type){case"move":n.push(p.jsx(Kn,{animation:o,end:r},a));break;case"spawn":n.push(p.jsx(xn,{animation:o,end:r},a));break;case"death":n.push(p.jsx(Rn,{animation:o,end:r},a));break}if(!o.async)break}return p.jsx(p.Fragment,{children:n})},[e.animations])}function Kn({animation:e,end:r}){const i=b.useMemo(()=>{if(!e.to)return;const t=fe({"0%":{transform:`translate(${e.from.pos.x*128}px, ${e.from.pos.y*128}px)`},"100%":{transform:`translate(${e.to.pos.x*128}px, ${e.to.pos.y*128}px)`}});return J(o=>({container:{animation:`${t} 0.25s 1 forwards`}}))},[]);if(!i||!e.to)return null;const{classes:n}=i();return p.jsx(p.Fragment,{children:p.jsx("div",{className:n.container,style:{position:"absolute",zIndex:3},onAnimationEnd:()=>r(e.id),children:p.jsx(R,{tile:e.to})})})}function xn({animation:e,end:r}){const i=b.useMemo(()=>{const t=fe({"0%":{transform:"scale(0)"},"75%":{transform:"scale(1.25)"},"100%":{transform:"scale(1)"}});return J(o=>({container:{animation:`${t} 0.5s 1 forwards`}}))},[]);if(!i)return null;const{classes:n}=i();return p.jsx(p.Fragment,{children:p.jsx("div",{className:n.container,style:{position:"absolute",left:e.from.pos.x*128,top:e.from.pos.y*128,zIndex:3,transformOrigin:"64px 64px"},onAnimationEnd:()=>r(e.id),children:p.jsx(R,{tile:e.from})})})}function Rn({animation:e,end:r}){const i=b.useMemo(()=>{const t=fe({"0%":{transform:"scale(1)"},"25%":{transform:"scale(1.25)"},"100%":{transform:"scale(0)"}});return J(o=>({container:{animation:`${t} 0.5s 1 forwards`}}))},[]);if(!i||!e.to)return null;const{classes:n}=i();return p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{position:"absolute",left:e.from.pos.x*128,top:e.from.pos.y*128,zIndex:3,transformOrigin:"64px 64px"},children:p.jsx(R,{tile:e.from})}),p.jsx("div",{className:n.container,style:{position:"absolute",left:e.to.pos.x*128,top:e.to.pos.y*128,zIndex:3,transformOrigin:"64px 64px"},onAnimationEnd:()=>r(e.id),children:p.jsx(R,{tile:e.to})})]})}const Fn=J(e=>({header:{position:"absolute",top:0,left:0,right:0,height:"64px",padding:`0 ${e.spacing.md}`,zIndex:1,pointerEvents:"none",backgroundImage:"linear-gradient(0deg, rgba(0, 0, 0, 0),  rgba(0, 0, 0, 0.75))"},footer:{position:"absolute",bottom:0,left:0,right:0,height:"64px",padding:`0 ${e.spacing.md}`,zIndex:1,pointerEvents:"none",backgroundImage:"linear-gradient(0deg, rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0))"},button:{pointerEvents:"all"}}));function $n(){const e=ke(),{classes:r}=Fn(),[i,n]=b.useState({x:innerWidth,y:innerHeight}),t=Y(d=>d.preview),o=Y(d=>d.data.match),a=o.players.filter(d=>d.id===o.turn.player)[0],s=()=>{se.setState(d=>{d.modals.gameMenu.opened=!0})},l=()=>{Y.setState(d=>{d.preview=!1}),e("/home")},f=()=>{},u=()=>{Y.setState(d=>{T.events.nextTurn.act(d.data,{})})},v=()=>{Y.setState(d=>{d.lobby.seed=Date.now(),T.events.createMatch.act(d.data,{...d.lobby})})};return b.useEffect(()=>{t?o.tiles.length===0&&Y.setState(m=>{T.events.createMatch.act(m.data,{...m.lobby})}):Y.setState(m=>{T.events.createMatch.act(m.data,{...m.lobby}),T.events.startMatch.act(m.data,{})});const d=()=>{n({x:innerWidth,y:innerHeight})};return window.addEventListener("resize",d),()=>window.removeEventListener("resize",d)},[]),Si([["1",t?l:s],["2",f],["3",t?v:u]]),p.jsxs(p.Fragment,{children:[p.jsx(Zn,{}),p.jsxs(K,{className:r.header,align:"center",justify:"center",gap:"md",children:[p.jsx(ai,{src:a&&x.avatars[a.avatar]}),p.jsxs(K,{direction:"column",align:"center",children:[p.jsx($,{order:5,children:"Banners"}),p.jsx($,{order:5,children:(a==null?void 0:a.banners)??0})]}),p.jsxs(K,{direction:"column",align:"center",children:[p.jsx($,{order:5,children:"Turn"}),p.jsx($,{order:5,children:o.turn.count})]})]}),p.jsxs(K,{className:r.footer,align:"center",justify:"center",gap:"md",children:[t?p.jsx(Z,{className:r.button,variant:"filled",size:32,onClick:l,children:p.jsx(wi,{})}):p.jsx(Z,{className:r.button,variant:"filled",size:32,onClick:s,children:p.jsx(Pi,{})}),p.jsx(Z,{className:r.button,variant:"filled",size:32,onClick:f,children:p.jsx(Ci,{})}),t?p.jsx(Z,{className:r.button,variant:"filled",size:32,onClick:v,children:p.jsx(Ti,{})}):p.jsx(Z,{className:r.button,variant:"filled",size:32,onClick:u,children:p.jsx(yi,{})})]}),p.jsx(Dn,{initialPositionX:0,initialPositionY:0,initialScale:1,maxScale:1,minScale:.25,limitToBounds:!1,doubleClick:{disabled:!0},panning:{velocityDisabled:!0},children:p.jsxs(Bn,{wrapperStyle:{width:`${i.x}px`,height:`${i.y}px`},children:[p.jsx("div",{children:o.tiles.map(d=>p.jsx(Ln,{tile:d},`${d.pos.x}:${d.pos.y}`))}),p.jsx(Hn,{})]})})]})}export{$n as default};
