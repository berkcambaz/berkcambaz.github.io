import{r as u,u as Z,a as c,c as Re,b as je,d as Oe,e as Ce,f as Pe,R as _,g as Ee,B as G,h as H,j as n,F as x,I as y,i as v,T as q}from"./index-7b5acefe.js";import{u as j,g as O}from"./game-f5e190a9.js";import{g as $}from"./get-styles-ref-1f22bf7e.js";import{u as Ie,D as R,S as U}from"./SimpleGrid-a3eef13c.js";import{B as Ne}from"./Button-2e435760.js";const Ae={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function ze(){const e=u.useRef(0),r=u.useRef(null),[a,o]=u.useState(Ae),s=u.useMemo(()=>typeof window<"u"?new ResizeObserver(i=>{const d=i[0];d&&(cancelAnimationFrame(e.current),e.current=requestAnimationFrame(()=>{r.current&&o(d.contentRect)}))}):null,[]);return Z(()=>(r.current&&(s.observe(r.current),o(r.current.getBoundingClientRect())),()=>{s.disconnect(),e.current&&cancelAnimationFrame(e.current)}),[r.current]),[r,a]}var Te=Object.defineProperty,Be=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Me=Object.prototype.propertyIsEnumerable,K=(e,r,a)=>r in e?Te(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,P=(e,r)=>{for(var a in r||(r={}))De.call(r,a)&&K(e,a,r[a]);if(J)for(var a of J(r))Me.call(r,a)&&K(e,a,r[a]);return e},Ve=(e,r)=>Be(e,Fe(r));const E=4,Q={xs:`${c(3)} ${c(6)}`,sm:`${c(5)} ${c(10)}`,md:`${c(7)} ${c(14)}`,lg:`${c(9)} ${c(16)}`,xl:`${c(12)} ${c(20)}`};var Le=Re((e,{fullWidth:r,color:a,radius:o,shouldAnimate:s,transitionDuration:i,transitionTimingFunction:d,orientation:S},{size:f})=>{const p=S==="vertical",l=e.fn.variant({variant:"filled",color:a});return{label:Ve(P(P({ref:$("label")},e.fn.focusStyles()),e.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",borderRadius:e.fn.radius(o),fontWeight:500,fontSize:f in e.fontSizes?e.fontSizes[f]:e.fontSizes.sm,cursor:"pointer",display:"block",textAlign:"center",padding:Q[f in Q?f:"sm"],whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",userSelect:"none",color:e.colorScheme==="dark"?e.colors.dark[1]:e.colors.gray[7],transition:`color ${s?0:i}ms ${d||e.transitionTimingFunction}`,"&:hover":{color:e.colorScheme==="dark"?e.colors.dark[0]:e.black},"&[data-disabled]":{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed",pointerEvents:"none"}},"&[data-active]":{"&, &:hover":{color:a||e.colorScheme==="dark"?e.white:e.black}}}),control:{ref:$("control"),position:"relative",boxSizing:"border-box",flex:1,zIndex:2,transition:`border-left-color ${s?0:i}ms ${d||e.transitionTimingFunction}`,"&:not(:first-of-type)":{borderStyle:"solid",borderWidth:p?`${c(1)} 0 0 0`:`0 0 0 ${c(1)}`,borderColor:e.colorScheme==="dark"?e.colors.dark[4]:e.colors.gray[3]}},input:{height:0,width:0,position:"absolute",overflow:"hidden",whiteSpace:"nowrap",opacity:0,"&:focus":{outline:"none",[`& + .${$("label")}`]:P({},e.focusRing==="always"||e.focusRing==="auto"?e.focusRingStyles.styles(e):e.focusRingStyles.resetStyles(e)),"&:focus:not(:focus-visible)":{[`& + .${$("label")}`]:P({},e.focusRing==="auto"||e.focusRing==="never"?e.focusRingStyles.resetStyles(e):null)}},"&:disabled + label":{"&, &:hover":{color:e.colorScheme==="dark"?e.colors.dark[3]:e.colors.gray[5],cursor:"not-allowed",pointerEvents:"none"}}},root:{position:"relative",display:r||p?"flex":"inline-flex",width:p&&!r?"max-content":"auto",flexDirection:p?"column":"row",backgroundColor:e.colorScheme==="dark"?e.colors.dark[8]:e.colors.gray[1],borderRadius:e.fn.radius(o),overflow:"hidden",padding:E},controlActive:{borderLeftColor:"transparent !important",borderTopColor:"transparent !important",[`& + .${$("control")}`]:{[p?"borderTopColor":"borderLeftColor"]:"transparent !important"},borderRadius:e.fn.radius(o),boxShadow:s?a||e.colorScheme==="dark"?"none":e.shadows.xs:void 0,backgroundColor:s?a?l.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white:void 0},indicator:{boxSizing:"border-box",borderRadius:e.fn.radius(o),position:"absolute",zIndex:1,boxShadow:a||e.colorScheme==="dark"?"none":e.shadows.xs,transition:`transform ${s?0:i}ms ${e.transitionTimingFunction}, width ${s?0:i/2}ms ${d||e.transitionTimingFunction}`,backgroundColor:a?l.background:e.colorScheme==="dark"?e.colors.dark[5]:e.white}}});const We=Le;var Ge=Object.defineProperty,I=Object.getOwnPropertySymbols,ee=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable,X=(e,r,a)=>r in e?Ge(e,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[r]=a,He=(e,r)=>{for(var a in r||(r={}))ee.call(r,a)&&X(e,a,r[a]);if(I)for(var a of I(r))re.call(r,a)&&X(e,a,r[a]);return e},qe=(e,r)=>{var a={};for(var o in e)ee.call(e,o)&&r.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&I)for(var o of I(e))r.indexOf(o)<0&&re.call(e,o)&&(a[o]=e[o]);return a};const Ue={disabled:!1,size:"sm",transitionDuration:200},ae=u.forwardRef((e,r)=>{var a,o,s,i;const d=je("SegmentedControl",Ue,e),{className:S,disabled:f,data:p,name:l,value:b,onChange:w,color:te,fullWidth:oe,radius:ne,size:se,transitionDuration:le,transitionTimingFunction:ce,classNames:ie,styles:de,defaultValue:ue,orientation:fe,unstyled:pe,variant:ve,readOnly:ge}=d,be=qe(d,["className","disabled","data","name","value","onChange","color","fullWidth","radius","size","transitionDuration","transitionTimingFunction","classNames","styles","defaultValue","orientation","unstyled","variant","readOnly"]),z=Oe(),he=Ce(),xe=z.respectReducedMotion?he:!1,m=p.map(t=>typeof t=="string"?{label:t,value:t}:t),T=u.useRef(),[B,F]=u.useState(!1),[g,ye]=Ie({value:b,defaultValue:ue,finalValue:Array.isArray(m)&&(i=(s=(a=m.find(t=>!t.disabled))==null?void 0:a.value)!=null?s:(o=m[0])==null?void 0:o.value)!=null?i:null,onChange:w}),{classes:h,cx:D}=We({fullWidth:oe,color:te,radius:ne,shouldAnimate:xe||!B,transitionDuration:le,transitionTimingFunction:ce,orientation:fe},{name:"SegmentedControl",classNames:ie,styles:de,unstyled:pe,variant:ve,size:se}),[C,Se]=u.useState({width:0,height:0,translate:[0,0]}),N=Pe(l),A=u.useRef({}),[M,V]=ze();Z(()=>{T.current?F(!0):(T.current=!0,F(!1))}),u.useEffect(()=>{if(g in A.current&&M.current){const t=A.current[g],k=t.getBoundingClientRect(),L=t.offsetWidth/k.width,W=k.width*L||0,ke=k.height*L||0,_e=V.width-t.parentElement.offsetLeft+E-W,$e=t.parentElement.offsetLeft-E;Se({width:W,height:ke,translate:[z.dir==="rtl"?_e:$e,t.parentElement.offsetTop-E]})}},[g,V]);const we=m.map(t=>_.createElement("div",{className:D(h.control,{[h.controlActive]:g===t.value}),key:t.value},_.createElement("input",{className:h.input,disabled:f||t.disabled,type:"radio",name:N,value:t.value,id:`${N}-${t.value}`,checked:g===t.value,onChange:()=>!ge&&ye(t.value)}),_.createElement("label",{className:h.label,"data-active":g===t.value&&!(f||t.disabled)||void 0,"data-disabled":f||t.disabled||void 0,htmlFor:`${N}-${t.value}`,ref:k=>{A.current[t.value]=k}},t.label))),me=Ee(M,r);return m.length===0?null:_.createElement(G,He({className:D(h.root,S),ref:me},be),typeof g=="string"&&B&&_.createElement(G,{component:"span",className:h.indicator,sx:{width:C.width,height:C.height,transform:`translate(${C.translate[0]}px, ${C.translate[1]}px)`}}),we)});ae.displayName="@mantine/core/SegmentedControl";function Ze(){const e=j(l=>l.data.player),r=H(l=>l.segments.backpack),a=l=>{H.setState(b=>{b.segments.backpack=l})},o=Object.keys(O[r]),{unlockedItems:s,lockedItems:i}=u.useMemo(()=>{const l=[],b=[];return o.forEach(w=>{e[r].includes(w)?l.push(w):b.push(w)}),{unlockedItems:l,lockedItems:b}},[e,r]),d=o.length,S=(e==null?void 0:e[r].length)??0,f=()=>{switch(r){case"heroes":return"Heroes";case"characters":return"Characters";case"banners":return"Banners";case"avatars":return"Avatars";default:return}},p=()=>{switch(r){case"avatars":return v.avatars[e.avatar];case"banners":return v.banners[e.banner];case"characters":return v.characters[e.character];case"heroes":return v.heroes[e.hero]}};return n.jsxs(x,{direction:"column",gap:"xs",w:"100%",children:[n.jsx(ae,{value:r,onChange:a,data:[{label:n.jsx(y,{src:v.heroes.evil,width:32}),value:"heroes"},{label:n.jsx(y,{src:v.characters.face3,width:32}),value:"characters"},{label:n.jsx(y,{src:v.banners.hut,width:32}),value:"banners"},{label:n.jsx(y,{src:v.avatars.baby,width:32}),value:"avatars"}],styles:{label:{display:"flex",justifyContent:"center"}}}),n.jsxs(x,{direction:"column",align:"center",gap:"xs",children:[n.jsx(y,{src:p(),width:64,height:64}),n.jsx(R,{w:64})]}),n.jsxs(x,{align:"center",gap:"md",children:[n.jsx(R,{style:{flex:1}}),n.jsx(q,{order:5,children:`${f()} ${S}/${d}`}),n.jsx(R,{style:{flex:1}})]}),n.jsx(x,{direction:"column",align:"center",children:n.jsx(U,{cols:3,children:s.map(l=>n.jsx(Y,{id:l,segment:r,unlocked:!0},l))})}),n.jsxs(x,{align:"center",gap:"md",children:[n.jsx(R,{style:{flex:1}}),n.jsx(q,{order:5,children:"Locked"}),n.jsx(R,{style:{flex:1}})]}),n.jsx(x,{direction:"column",align:"center",children:n.jsx(U,{cols:3,children:i.map(l=>n.jsx(Y,{id:l,segment:r},l))})})]})}function Y({id:e,segment:r,unlocked:a}){const o=()=>{switch(r){case"avatars":j.setState(s=>{O.events.changeAvatar.act(s.data,{avatar:e})});break;case"banners":j.setState(s=>{O.events.changeBanner.act(s.data,{banner:e})});break;case"characters":j.setState(s=>{O.events.changeCharacter.act(s.data,{character:e})});break;case"heroes":j.setState(s=>{O.events.changeHero.act(s.data,{hero:e})});break}};return n.jsx(Ne,{variant:"default",h:"auto",p:"md",onClick:o,children:n.jsx(y,{src:v[r][e],width:48,height:48,style:{filter:`grayscale(${a?0:1})`}})})}export{Ze as default};
