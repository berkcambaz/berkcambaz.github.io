import{r as b,R as D,j as p,i as x,o as ni,L as oi,h as se,k as ke,M as ti,F as H,N as fe,c as G,T as Q,A as oe}from"./index-7b5acefe.js";import{u as E,g as A}from"./game-f5e190a9.js";import{B as $}from"./Button-2e435760.js";import{A as ai}from"./Avatar-0512ac96.js";import{c as R}from"./createReactComponent-e05d64ef.js";var si=Object.defineProperty,li=Object.defineProperties,ui=Object.getOwnPropertyDescriptors,ye=Object.getOwnPropertySymbols,di=Object.prototype.hasOwnProperty,fi=Object.prototype.propertyIsEnumerable,Pe=(e,n,i)=>n in e?si(e,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[n]=i,vi=(e,n)=>{for(var i in n||(n={}))di.call(n,i)&&Pe(e,i,n[i]);if(ye)for(var i of ye(n))fi.call(n,i)&&Pe(e,i,n[i]);return e},pi=(e,n)=>li(e,ui(n));function mi(e){const n=e.toLowerCase().split("+").map(t=>t.trim()),i={alt:n.includes("alt"),ctrl:n.includes("ctrl"),meta:n.includes("meta"),mod:n.includes("mod"),shift:n.includes("shift")},r=["alt","ctrl","meta","shift","mod"],o=n.find(t=>!r.includes(t));return pi(vi({},i),{key:o})}function ci(e,n){const{alt:i,ctrl:r,meta:o,mod:t,shift:a,key:s}=e,{altKey:l,ctrlKey:d,metaKey:u,shiftKey:v,key:f}=n;if(i!==l)return!1;if(t){if(!d&&!u)return!1}else if(r!==d||o!==u)return!1;return a!==v?!1:!!(s&&(f.toLowerCase()===s.toLowerCase()||n.code.replace("Key","").toLowerCase()===s.toLowerCase()))}function hi(e){return n=>ci(mi(e),n)}function gi(e,n,i=!1){return e.target instanceof HTMLElement?(i||!e.target.isContentEditable)&&!n.includes(e.target.tagName):!0}function Si(e,n=["INPUT","TEXTAREA","SELECT"],i=!1){b.useEffect(()=>{const r=o=>{e.forEach(([t,a,s={preventDefault:!0}])=>{hi(t)(o)&&gi(o,n,i)&&(s.preventDefault&&o.preventDefault(),a(o))})};return document.documentElement.addEventListener("keydown",r),()=>document.documentElement.removeEventListener("keydown",r)},[e])}function bi(){const[e,n]=b.useState(!1),i=b.useRef(null),r=b.useCallback(()=>n(!0),[]),o=b.useCallback(()=>n(!1),[]);return b.useEffect(()=>{if(i.current)return i.current.addEventListener("mouseenter",r),i.current.addEventListener("mouseleave",o),()=>{var t,a;(t=i.current)==null||t.removeEventListener("mouseenter",r),(a=i.current)==null||a.removeEventListener("mouseleave",o)}},[]),{ref:i,hovered:e}}var wi=R("arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]),yi=R("arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]),Pi=R("menu-2","IconMenu2",[["path",{d:"M4 6l16 0",key:"svg-0"}],["path",{d:"M4 12l16 0",key:"svg-1"}],["path",{d:"M4 18l16 0",key:"svg-2"}]]),Ci=R("message-circle-2","IconMessageCircle2",[["path",{d:"M3 20l1.3 -3.9a9 8 0 1 1 3.4 2.9l-4.7 1",key:"svg-0"}]]),Ti=R("refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]),Y=function(e,n){return Number(e.toFixed(n))},Yi=function(e,n){return typeof e=="number"?e:n},y=function(e,n,i){i&&typeof i=="function"&&i(e,n)},Ai=function(e){return-Math.cos(e*Math.PI)/2+.5},Ei=function(e){return e},Xi=function(e){return e*e},zi=function(e){return e*(2-e)},_i=function(e){return e<.5?2*e*e:-1+(4-2*e)*e},ki=function(e){return e*e*e},Mi=function(e){return--e*e*e+1},Ni=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},ji=function(e){return e*e*e*e},Di=function(e){return 1- --e*e*e*e},Oi=function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},Wi=function(e){return e*e*e*e*e},Bi=function(e){return 1+--e*e*e*e*e},Li=function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e},Me={easeOut:Ai,linear:Ei,easeInQuad:Xi,easeOutQuad:zi,easeInOutQuad:_i,easeInCubic:ki,easeOutCubic:Mi,easeInOutCubic:Ni,easeInQuart:ji,easeOutQuart:Di,easeInOutQuart:Oi,easeInQuint:Wi,easeOutQuint:Bi,easeInOutQuint:Li},Ne=function(e){typeof e=="number"&&cancelAnimationFrame(e)},_=function(e){e.mounted&&(Ne(e.animation),e.animate=!1,e.animation=null,e.velocity=null)};function je(e,n,i,r){if(e.mounted){var o=new Date().getTime(),t=1;_(e),e.animation=function(){if(!e.mounted)return Ne(e.animation);var a=new Date().getTime()-o,s=a/i,l=Me[n],d=l(s);a>=i?(r(t),e.animation=null):e.animation&&(r(d),requestAnimationFrame(e.animation))},requestAnimationFrame(e.animation)}}function Zi(e){var n=e.scale,i=e.positionX,r=e.positionY;return!(Number.isNaN(n)||Number.isNaN(i)||Number.isNaN(r))}function N(e,n,i,r){var o=Zi(n);if(!(!e.mounted||!o)){var t=e.setTransformState,a=e.transformState,s=a.scale,l=a.positionX,d=a.positionY,u=n.scale-s,v=n.positionX-l,f=n.positionY-d;i===0?t(n.scale,n.positionX,n.positionY):je(e,r,i,function(m){var c=s+u*m,g=l+v*m,w=d+f*m;t(c,g,w)})}}function Hi(e,n,i){var r=e.offsetWidth,o=e.offsetHeight,t=n.offsetWidth,a=n.offsetHeight,s=t*i,l=a*i,d=r-s,u=o-l;return{wrapperWidth:r,wrapperHeight:o,newContentWidth:s,newDiffWidth:d,newContentHeight:l,newDiffHeight:u}}var xi=function(e,n,i,r,o,t,a){var s=e>n?i*(a?1:.5):0,l=r>o?t*(a?1:.5):0,d=e-n-s,u=s,v=r-o-l,f=l;return{minPositionX:d,maxPositionX:u,minPositionY:v,maxPositionY:f}},ve=function(e,n){var i=e.wrapperComponent,r=e.contentComponent,o=e.setup.centerZoomedOut;if(!i||!r)throw new Error("Components are not mounted");var t=Hi(i,r,n),a=t.wrapperWidth,s=t.wrapperHeight,l=t.newContentWidth,d=t.newDiffWidth,u=t.newContentHeight,v=t.newDiffHeight,f=xi(a,l,d,s,u,v,!!o);return f},le=function(e,n,i,r){return r?e<n?Y(n,2):e>i?Y(i,2):Y(e,2):Y(e,2)},B=function(e,n){var i=ve(e,n);return e.bounds=i,i};function J(e,n,i,r,o,t,a){var s=i.minPositionX,l=i.minPositionY,d=i.maxPositionX,u=i.maxPositionY,v=0,f=0;a&&(v=o,f=t);var m=le(e,s-v,d+v,r),c=le(n,l-f,u+f,r);return{x:m,y:c}}function I(e,n,i,r,o,t){var a=e.transformState,s=a.scale,l=a.positionX,d=a.positionY,u=r-s;if(typeof n!="number"||typeof i!="number")return console.error("Mouse X and Y position were not provided!"),{x:l,y:d};var v=l-n*u,f=d-i*u,m=J(v,f,o,t,0,0,null);return m}function F(e,n,i,r,o){var t=o?r:0,a=n-t;return!Number.isNaN(i)&&e>=i?i:!Number.isNaN(n)&&e<=a?a:e}var Ce=function(e,n){var i=e.setup.panning.excluded,r=e.isInitialized,o=e.wrapperComponent,t=n.target,a=o==null?void 0:o.contains(t),s=r&&t&&a;if(!s)return!1;var l=ee(t,i);return!l},Te=function(e){var n=e.isInitialized,i=e.isPanning,r=e.setup,o=r.panning.disabled,t=n&&i&&!o;return!!t},Ki=function(e,n){var i=e.transformState,r=i.positionX,o=i.positionY;e.isPanning=!0;var t=n.clientX,a=n.clientY;e.startCoords={x:t-r,y:a-o}},Ri=function(e,n){var i=n.touches,r=e.transformState,o=r.positionX,t=r.positionY;e.isPanning=!0;var a=i.length===1;if(a){var s=i[0].clientX,l=i[0].clientY;e.startCoords={x:s-o,y:l-t}}};function Fi(e){var n=e.transformState,i=n.positionX,r=n.positionY,o=n.scale,t=e.setup,a=t.disabled,s=t.limitToBounds,l=t.centerZoomedOut,d=e.wrapperComponent;if(!(a||!d||!e.bounds)){var u=e.bounds,v=u.maxPositionX,f=u.minPositionX,m=u.maxPositionY,c=u.minPositionY,g=i>v||i<f,w=r>m||r<c,C=i>v?d.offsetWidth:e.setup.minPositionX||0,h=r>m?d.offsetHeight:e.setup.minPositionY||0,P=I(e,C,h,o,e.bounds,s||l),X=P.x,T=P.y;return{scale:o,positionX:g?X:i,positionY:w?T:r}}}function Vi(e,n,i,r,o){var t=e.setup.limitToBounds,a=e.wrapperComponent,s=e.bounds,l=e.transformState,d=l.scale,u=l.positionX,v=l.positionY;if(!(a===null||s===null||n===u&&i===v)){var f=J(n,i,s,t,r,o,a),m=f.x,c=f.y;e.setTransformState(d,m,c)}}var Qi=function(e,n,i){var r=e.startCoords,o=e.transformState,t=e.setup.panning,a=t.lockAxisX,s=t.lockAxisY,l=o.positionX,d=o.positionY;if(!r)return{x:l,y:d};var u=n-r.x,v=i-r.y,f=a?l:u,m=s?d:v;return{x:f,y:m}},U=function(e,n){var i=e.setup,r=e.transformState,o=r.scale,t=i.minScale,a=i.disablePadding;return n>0&&o>=t&&!a?n:0},$i=function(e){var n=e.mounted,i=e.setup,r=i.disabled,o=i.velocityAnimation,t=e.transformState.scale,a=o.disabled,s=!a||t>1||!r||n;return!!s},qi=function(e){var n=e.mounted,i=e.velocity,r=e.bounds,o=e.setup,t=o.disabled,a=o.velocityAnimation,s=e.transformState.scale,l=a.disabled,d=!l||s>1||!t||n;return!(!d||!i||!r)};function Ui(e,n){var i=e.setup.velocityAnimation,r=i.equalToMove,o=i.animationTime,t=i.sensitivity;return r?o*n*t:o}function Ye(e,n,i,r,o,t,a,s,l,d){if(o){if(n>a&&i>a){var u=a+(e-a)*d;return u>l?l:u<a?a:u}if(n<t&&i<t){var u=t+(e-t)*d;return u<s?s:u>t?t:u}}return r?n:le(e,t,a,o)}function Gi(e,n){var i=1;return n?Math.min(i,e.offsetWidth/window.innerWidth):i}function Ji(e,n){var i=$i(e);if(i){var r=e.lastMousePosition,o=e.velocityTime,t=e.setup,a=e.wrapperComponent,s=t.velocityAnimation.equalToMove,l=Date.now();if(r&&o&&a){var d=Gi(a,s),u=n.x-r.x,v=n.y-r.y,f=u/d,m=v/d,c=l-o,g=u*u+v*v,w=Math.sqrt(g)/c;e.velocity={velocityX:f,velocityY:m,total:w}}e.lastMousePosition=n,e.velocityTime=l}}function Ii(e){var n=e.velocity,i=e.bounds,r=e.setup,o=e.wrapperComponent,t=qi(e);if(!(!t||!n||!i||!o)){var a=n.velocityX,s=n.velocityY,l=n.total,d=i.maxPositionX,u=i.minPositionX,v=i.maxPositionY,f=i.minPositionY,m=r.limitToBounds,c=r.alignmentAnimation,g=r.zoomAnimation,w=r.panning,C=w.lockAxisY,h=w.lockAxisX,P=g.animationType,X=c.sizeX,T=c.sizeY,k=c.velocityAlignmentTime,z=k,j=Ui(e,l),O=Math.max(j,z),W=U(e,X),L=U(e,T),V=W*o.offsetWidth/100,ce=L*o.offsetHeight/100,Fe=d+V,Ve=u-V,Qe=v+ce,$e=f-ce,he=e.transformState,qe=new Date().getTime();je(e,P,O,function(Ue){var ie=e.transformState,Ge=ie.scale,re=ie.positionX,ne=ie.positionY,Je=new Date().getTime()-qe,Ie=Je/z,ei=Me[c.animationType],ge=1-ei(Math.min(1,Ie)),Se=1-Ue,be=re+a*Se,we=ne+s*Se,ii=Ye(be,he.positionX,re,h,m,u,d,Ve,Fe,ge),ri=Ye(we,he.positionY,ne,C,m,f,v,$e,Qe,ge);(re!==be||ne!==we)&&e.setTransformState(Ge,ii,ri)})}}function Ae(e,n){var i=e.transformState.scale;_(e),B(e,i),window.TouchEvent!==void 0&&n instanceof TouchEvent?Ri(e,n):Ki(e,n)}function De(e){var n=e.transformState.scale,i=e.setup,r=i.minScale,o=i.alignmentAnimation,t=o.disabled,a=o.sizeX,s=o.sizeY,l=o.animationTime,d=o.animationType,u=t||n<r||!a&&!s;if(!u){var v=Fi(e);v&&N(e,v,l,d)}}function Ee(e,n,i){var r=e.startCoords,o=e.setup,t=o.alignmentAnimation,a=t.sizeX,s=t.sizeY;if(r){var l=Qi(e,n,i),d=l.x,u=l.y,v=U(e,a),f=U(e,s);Ji(e,{x:d,y:u}),Vi(e,d,u,v,f)}}function er(e){if(e.isPanning){var n=e.setup.panning.velocityDisabled,i=e.velocity,r=e.wrapperComponent,o=e.contentComponent;e.isPanning=!1,e.animate=!1,e.animation=null;var t=r==null?void 0:r.getBoundingClientRect(),a=o==null?void 0:o.getBoundingClientRect(),s=(t==null?void 0:t.width)||0,l=(t==null?void 0:t.height)||0,d=(a==null?void 0:a.width)||0,u=(a==null?void 0:a.height)||0,v=s<d||l<u,f=!n&&i&&(i==null?void 0:i.total)>.1&&v;f?Ii(e):De(e)}}function pe(e,n,i,r){var o=e.setup,t=o.minScale,a=o.maxScale,s=o.limitToBounds,l=F(Y(n,2),t,a,0,!1),d=B(e,l),u=I(e,i,r,l,d,s),v=u.x,f=u.y;return{scale:l,positionX:v,positionY:f}}function Oe(e,n,i){var r=e.transformState.scale,o=e.wrapperComponent,t=e.setup,a=t.minScale,s=t.limitToBounds,l=t.zoomAnimation,d=l.disabled,u=l.animationTime,v=l.animationType,f=d||r>=a;if((r>=1||s)&&De(e),!(f||!o||!e.mounted)){var m=n||o.offsetWidth/2,c=i||o.offsetHeight/2,g=pe(e,a,m,c);g&&N(e,g,u,v)}}var M=function(){return M=Object.assign||function(n){for(var i,r=1,o=arguments.length;r<o;r++){i=arguments[r];for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},M.apply(this,arguments)};function Xe(e,n,i){if(i||arguments.length===2)for(var r=0,o=n.length,t;r<o;r++)(t||!(r in n))&&(t||(t=Array.prototype.slice.call(n,0,r)),t[r]=n[r]);return e.concat(t||Array.prototype.slice.call(n))}var q={previousScale:1,scale:1,positionX:0,positionY:0},Z={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},We=function(e){var n,i,r,o;return{previousScale:(n=e.initialScale)!==null&&n!==void 0?n:q.scale,scale:(i=e.initialScale)!==null&&i!==void 0?i:q.scale,positionX:(r=e.initialPositionX)!==null&&r!==void 0?r:q.positionX,positionY:(o=e.initialPositionY)!==null&&o!==void 0?o:q.positionY}},ze=function(e){var n=M({},Z);return Object.keys(e).forEach(function(i){var r=typeof e[i]<"u",o=typeof Z[i]<"u";if(o&&r){var t=Object.prototype.toString.call(Z[i]),a=t==="[object Object]",s=t==="[object Array]";a?n[i]=M(M({},Z[i]),e[i]):s?n[i]=Xe(Xe([],Z[i],!0),e[i],!0):n[i]=e[i]}}),n},Be=function(e,n,i){var r=e.transformState.scale,o=e.wrapperComponent,t=e.setup,a=t.maxScale,s=t.minScale,l=t.zoomAnimation,d=t.smooth,u=l.size;if(!o)throw new Error("Wrapper is not mounted");var v=d?r*Math.exp(n*i):r+n*i,f=F(Y(v,3),s,a,u,!1);return f};function Le(e,n,i,r,o){var t=e.wrapperComponent,a=e.transformState,s=a.scale,l=a.positionX,d=a.positionY;if(!t)return console.error("No WrapperComponent found");var u=t.offsetWidth,v=t.offsetHeight,f=(u/2-l)/s,m=(v/2-d)/s,c=Be(e,n,i),g=pe(e,c,f,m);if(!g)return console.error("Error during zoom event. New transformation state was not calculated.");N(e,g,r,o)}function Ze(e,n,i,r){var o=e.setup,t=e.wrapperComponent,a=o.limitToBounds,s=We(e.props),l=e.transformState,d=l.scale,u=l.positionX,v=l.positionY;if(t){var f=ve(e,s.scale),m=J(s.positionX,s.positionY,f,a,0,0,t),c={scale:s.scale,positionX:m.x,positionY:m.y};d===s.scale&&u===s.positionX&&v===s.positionY||(r==null||r(),N(e,c,n,i))}}function ir(e,n,i,r){var o=e.getBoundingClientRect(),t=n.getBoundingClientRect(),a=i.getBoundingClientRect(),s=t.x*r.scale,l=t.y*r.scale;return{x:(o.x-a.x+s)/r.scale,y:(o.y-a.y+l)/r.scale}}function rr(e,n,i){var r=e.wrapperComponent,o=e.contentComponent,t=e.transformState,a=e.setup,s=a.limitToBounds,l=a.minScale,d=a.maxScale;if(!r||!o)return t;var u=r.getBoundingClientRect(),v=n.getBoundingClientRect(),f=ir(n,r,o,t),m=f.x,c=f.y,g=v.width/t.scale,w=v.height/t.scale,C=r.offsetWidth/g,h=r.offsetHeight/w,P=F(i||Math.min(C,h),l,d,0,!1),X=(u.width-g*P)/2,T=(u.height-w*P)/2,k=(u.left-m)*P+X,z=(u.top-c)*P+T,j=ve(e,P),O=J(k,z,j,s,0,0,r),W=O.x,L=O.y;return{positionX:W,positionY:L,scale:P}}var nr=function(e){return function(n,i,r){n===void 0&&(n=.5),i===void 0&&(i=300),r===void 0&&(r="easeOut"),Le(e,1,n,i,r)}},or=function(e){return function(n,i,r){n===void 0&&(n=.5),i===void 0&&(i=300),r===void 0&&(r="easeOut"),Le(e,-1,n,i,r)}},tr=function(e){return function(n,i,r,o,t){o===void 0&&(o=300),t===void 0&&(t="easeOut");var a=e.transformState,s=a.positionX,l=a.positionY,d=a.scale,u=e.wrapperComponent,v=e.contentComponent,f=e.setup.disabled;if(!(f||!u||!v)){var m={positionX:Number.isNaN(n)?s:n,positionY:Number.isNaN(i)?l:i,scale:Number.isNaN(r)?d:r};N(e,m,o,t)}}},ar=function(e){return function(n,i){n===void 0&&(n=200),i===void 0&&(i="easeOut"),Ze(e,n,i)}},sr=function(e){return function(n,i,r){i===void 0&&(i=200),r===void 0&&(r="easeOut");var o=e.transformState,t=e.wrapperComponent,a=e.contentComponent;if(t&&a){var s=He(n||o.scale,t,a);N(e,s,i,r)}}},lr=function(e){return function(n,i,r,o){r===void 0&&(r=600),o===void 0&&(o="easeOut"),_(e);var t=e.wrapperComponent,a=typeof n=="string"?document.getElementById(n):n;if(t&&a&&t.contains(a)){var s=rr(e,a,i);N(e,s,r,o)}}},ue=function(e){return{instance:e,zoomIn:nr(e),zoomOut:or(e),setTransform:tr(e),resetTransform:ar(e),centerView:sr(e),zoomToElement:lr(e)}},ur=function(e){return{instance:e,state:e.transformState}},S=function(e){var n={};return Object.assign(n,ur(e)),Object.assign(n,ue(e)),n},te=!1;function ae(){try{var e={get passive(){return te=!0,!1}};return e}catch{return te=!1,te}}var ee=function(e,n){var i=e.tagName.toUpperCase(),r=n.find(function(t){return t.toUpperCase()===i});if(r)return!0;var o=n.find(function(t){return e.classList.contains(t)});return!!o},de=function(e){e&&clearTimeout(e)},dr=function(e,n,i){return"translate(".concat(e,"px, ").concat(n,"px) scale(").concat(i,")")},He=function(e,n,i){var r=i.offsetWidth*e,o=i.offsetHeight*e,t=(n.offsetWidth-r)/2,a=(n.offsetHeight-o)/2;return{scale:e,positionX:t,positionY:a}};function fr(e){return function(n){e.forEach(function(i){typeof i=="function"?i(n):i!=null&&(i.current=n)})}}var vr=function(e,n){var i=e.setup.wheel,r=i.disabled,o=i.wheelDisabled,t=i.touchPadDisabled,a=i.excluded,s=e.isInitialized,l=e.isPanning,d=n.target,u=s&&!l&&!r&&d;if(!u||o&&!n.ctrlKey||t&&n.ctrlKey)return!1;var v=ee(d,a);return!v},pr=function(e){return e?e.deltaY<0?1:-1:0};function mr(e,n){var i=pr(e),r=Yi(n,i);return r}function xe(e,n,i){var r=n.getBoundingClientRect(),o=0,t=0;if("clientX"in e)o=(e.clientX-r.left)/i,t=(e.clientY-r.top)/i;else{var a=e.touches[0];o=(a.clientX-r.left)/i,t=(a.clientY-r.top)/i}return(Number.isNaN(o)||Number.isNaN(t))&&console.error("No mouse or touch offset found"),{x:o,y:t}}var cr=function(e,n,i,r,o){var t=e.transformState.scale,a=e.wrapperComponent,s=e.setup,l=s.maxScale,d=s.minScale,u=s.zoomAnimation,v=s.disablePadding,f=u.size,m=u.disabled;if(!a)throw new Error("Wrapper is not mounted");var c=t+n*i;if(o)return c;var g=r?!1:!m,w=F(Y(c,3),d,l,f,g&&!v);return w},hr=function(e,n){var i=e.previousWheelEvent,r=e.transformState.scale,o=e.setup,t=o.maxScale,a=o.minScale;return i?r<t||r>a||Math.sign(i.deltaY)!==Math.sign(n.deltaY)||i.deltaY>0&&i.deltaY<n.deltaY||i.deltaY<0&&i.deltaY>n.deltaY||Math.sign(i.deltaY)!==Math.sign(n.deltaY):!1},gr=function(e,n){var i=e.setup.pinch,r=i.disabled,o=i.excluded,t=e.isInitialized,a=n.target,s=t&&!r&&a;if(!s)return!1;var l=ee(a,o);return!l},Sr=function(e){var n=e.setup.pinch.disabled,i=e.isInitialized,r=e.pinchStartDistance,o=i&&!n&&r;return!!o},br=function(e,n,i){var r=i.getBoundingClientRect(),o=e.touches,t=Y(o[0].clientX-r.left,5),a=Y(o[0].clientY-r.top,5),s=Y(o[1].clientX-r.left,5),l=Y(o[1].clientY-r.top,5);return{x:(t+s)/2/n,y:(a+l)/2/n}},Ke=function(e){return Math.sqrt(Math.pow(e.touches[0].pageX-e.touches[1].pageX,2)+Math.pow(e.touches[0].pageY-e.touches[1].pageY,2))},wr=function(e,n){var i=e.pinchStartScale,r=e.pinchStartDistance,o=e.setup,t=o.maxScale,a=o.minScale,s=o.zoomAnimation,l=o.disablePadding,d=s.size,u=s.disabled;if(!i||r===null||!n)throw new Error("Pinch touches distance was not provided");if(n<0)return e.transformState.scale;var v=n/r,f=v*i;return F(Y(f,2),a,t,d,!u&&!l)},yr=160,Pr=100,Cr=function(e,n){var i=e.props,r=i.onWheelStart,o=i.onZoomStart;e.wheelStopEventTimer||(_(e),y(S(e),n,r),y(S(e),n,o))},Tr=function(e,n){var i=e.props,r=i.onWheel,o=i.onZoom,t=e.contentComponent,a=e.setup,s=e.transformState,l=s.scale,d=a.limitToBounds,u=a.centerZoomedOut,v=a.zoomAnimation,f=a.wheel,m=a.disablePadding,c=a.smooth,g=v.size,w=v.disabled,C=f.step,h=f.smoothStep;if(!t)throw new Error("Component not mounted");n.preventDefault(),n.stopPropagation();var P=mr(n,null),X=c?h*Math.abs(n.deltaY):C,T=cr(e,P,X,!n.ctrlKey);if(l!==T){var k=B(e,T),z=xe(n,t,l),j=w||g===0||u||m,O=d&&j,W=I(e,z.x,z.y,T,k,O),L=W.x,V=W.y;e.previousWheelEvent=n,e.setTransformState(T,L,V),y(S(e),n,r),y(S(e),n,o)}},Yr=function(e,n){var i=e.props,r=i.onWheelStop,o=i.onZoomStop;de(e.wheelAnimationTimer),e.wheelAnimationTimer=setTimeout(function(){e.mounted&&(Oe(e,n.x,n.y),e.wheelAnimationTimer=null)},Pr);var t=hr(e,n);t&&(de(e.wheelStopEventTimer),e.wheelStopEventTimer=setTimeout(function(){e.mounted&&(e.wheelStopEventTimer=null,y(S(e),n,r),y(S(e),n,o))},yr))},Ar=function(e,n){var i=Ke(n);e.pinchStartDistance=i,e.lastDistance=i,e.pinchStartScale=e.transformState.scale,e.isPanning=!1,_(e)},Er=function(e,n){var i=e.contentComponent,r=e.pinchStartDistance,o=e.transformState.scale,t=e.setup,a=t.limitToBounds,s=t.centerZoomedOut,l=t.zoomAnimation,d=l.disabled,u=l.size;if(!(r===null||!i)){var v=br(n,o,i);if(!(!Number.isFinite(v.x)||!Number.isFinite(v.y))){var f=Ke(n),m=wr(e,f);if(m!==o){var c=B(e,m),g=d||u===0||s,w=a&&g,C=I(e,v.x,v.y,m,c,w),h=C.x,P=C.y;e.pinchMidpoint=v,e.lastDistance=f,e.setTransformState(m,h,P)}}}},Xr=function(e){var n=e.pinchMidpoint;e.velocity=null,e.lastDistance=null,e.pinchMidpoint=null,e.pinchStartScale=null,e.pinchStartDistance=null,Oe(e,n==null?void 0:n.x,n==null?void 0:n.y)},Re=function(e,n){var i=e.props.onZoomStop,r=e.setup.doubleClick.animationTime;de(e.doubleClickStopEventTimer),e.doubleClickStopEventTimer=setTimeout(function(){e.doubleClickStopEventTimer=null,y(S(e),n,i)},r)},zr=function(e,n){var i=e.props,r=i.onZoomStart,o=i.onZoom,t=e.setup.doubleClick,a=t.animationTime,s=t.animationType;y(S(e),n,r),Ze(e,a,s,function(){return y(S(e),n,o)}),Re(e,n)};function _r(e,n){var i=e.setup,r=e.doubleClickStopEventTimer,o=e.transformState,t=e.contentComponent,a=o.scale,s=e.props,l=s.onZoomStart,d=s.onZoom,u=i.doubleClick,v=u.disabled,f=u.mode,m=u.step,c=u.animationTime,g=u.animationType;if(!v&&!r){if(f==="reset")return zr(e,n);if(!t)return console.error("No ContentComponent found");var w=f==="zoomOut"?-1:1,C=Be(e,w,m);if(a!==C){y(S(e),n,l);var h=xe(n,t,a),P=pe(e,C,h.x,h.y);if(!P)return console.error("Error during zoom event. New transformation state was not calculated.");y(S(e),n,d),N(e,P,c,g),Re(e,n)}}}var kr=function(e,n){var i=e.isInitialized,r=e.setup,o=e.wrapperComponent,t=r.doubleClick,a=t.disabled,s=t.excluded,l=n.target,d=o==null?void 0:o.contains(l),u=i&&l&&d&&!a;if(!u)return!1;var v=ee(l,s);return!v},Mr=function(){function e(n){var i=this;this.mounted=!0,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){i.initializeWindowEvents()},this.unmount=function(){i.cleanupWindowEvents()},this.update=function(r){B(i,i.transformState.scale),i.setup=ze(r)},this.initializeWindowEvents=function(){var r,o=ae(),t=(r=i.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,a=t==null?void 0:t.defaultView;a==null||a.addEventListener("mousedown",i.onPanningStart,o),a==null||a.addEventListener("mousemove",i.onPanning,o),a==null||a.addEventListener("mouseup",i.onPanningStop,o),t==null||t.addEventListener("mouseleave",i.clearPanning,o),a==null||a.addEventListener("keyup",i.setKeyUnPressed,o),a==null||a.addEventListener("keydown",i.setKeyPressed,o)},this.cleanupWindowEvents=function(){var r,o,t=ae(),a=(r=i.wrapperComponent)===null||r===void 0?void 0:r.ownerDocument,s=a==null?void 0:a.defaultView;s==null||s.removeEventListener("mousedown",i.onPanningStart,t),s==null||s.removeEventListener("mousemove",i.onPanning,t),s==null||s.removeEventListener("mouseup",i.onPanningStop,t),a==null||a.removeEventListener("mouseleave",i.clearPanning,t),s==null||s.removeEventListener("keyup",i.setKeyUnPressed,t),s==null||s.removeEventListener("keydown",i.setKeyPressed,t),document.removeEventListener("mouseleave",i.clearPanning,t),_(i),(o=i.observer)===null||o===void 0||o.disconnect()},this.handleInitializeWrapperEvents=function(r){var o=ae();r.addEventListener("wheel",i.onWheelZoom,o),r.addEventListener("dblclick",i.onDoubleClick,o),r.addEventListener("touchstart",i.onTouchPanningStart,o),r.addEventListener("touchmove",i.onTouchPanning,o),r.addEventListener("touchend",i.onTouchPanningStop,o)},this.handleInitialize=function(r){var o=i.setup.centerOnInit;i.applyTransformation(),i.onInitCallbacks.forEach(function(t){return t(S(i))}),o&&(i.setCenter(),i.observer=new ResizeObserver(function(){var t;i.onInitCallbacks.forEach(function(a){return a(S(i))}),i.setCenter(),(t=i.observer)===null||t===void 0||t.disconnect()}),i.observer.observe(r))},this.onWheelZoom=function(r){var o=i.setup.disabled;if(!o){var t=vr(i,r);if(t){var a=i.isPressingKeys(i.setup.wheel.activationKeys);a&&(Cr(i,r),Tr(i,r),Yr(i,r))}}},this.onPanningStart=function(r){var o=i.setup.disabled,t=i.props.onPanningStart;if(!o){var a=Ce(i,r);if(a){var s=i.isPressingKeys(i.setup.panning.activationKeys);s&&(r.preventDefault(),r.stopPropagation(),_(i),Ae(i,r),y(S(i),r,t))}}},this.onPanning=function(r){var o=i.setup.disabled,t=i.props.onPanning;if(!o){var a=Te(i);if(a){var s=i.isPressingKeys(i.setup.panning.activationKeys);s&&(r.preventDefault(),r.stopPropagation(),Ee(i,r.clientX,r.clientY),y(S(i),r,t))}}},this.onPanningStop=function(r){var o=i.props.onPanningStop;i.isPanning&&(er(i),y(S(i),r,o))},this.onPinchStart=function(r){var o=i.setup.disabled,t=i.props,a=t.onPinchingStart,s=t.onZoomStart;if(!o){var l=gr(i,r);l&&(Ar(i,r),_(i),y(S(i),r,a),y(S(i),r,s))}},this.onPinch=function(r){var o=i.setup.disabled,t=i.props,a=t.onPinching,s=t.onZoom;if(!o){var l=Sr(i);l&&(r.preventDefault(),r.stopPropagation(),Er(i,r),y(S(i),r,a),y(S(i),r,s))}},this.onPinchStop=function(r){var o=i.props,t=o.onPinchingStop,a=o.onZoomStop;i.pinchStartScale&&(Xr(i),y(S(i),r,t),y(S(i),r,a))},this.onTouchPanningStart=function(r){var o=i.setup.disabled,t=i.props.onPanningStart;if(!o){var a=Ce(i,r);if(a){var s=i.lastTouch&&+new Date-i.lastTouch<200;if(s&&r.touches.length===1)i.onDoubleClick(r);else{i.lastTouch=+new Date,_(i);var l=r.touches,d=l.length===1,u=l.length===2;d&&(_(i),Ae(i,r),y(S(i),r,t)),u&&i.onPinchStart(r)}}}},this.onTouchPanning=function(r){var o=i.setup.disabled,t=i.props.onPanning;if(i.isPanning&&r.touches.length===1){if(o)return;var a=Te(i);if(!a)return;r.preventDefault(),r.stopPropagation();var s=r.touches[0];Ee(i,s.clientX,s.clientY),y(S(i),r,t)}else r.touches.length>1&&i.onPinch(r)},this.onTouchPanningStop=function(r){i.onPanningStop(r),i.onPinchStop(r)},this.onDoubleClick=function(r){var o=i.setup.disabled;if(!o){var t=kr(i,r);t&&_r(i,r)}},this.clearPanning=function(r){i.isPanning&&i.onPanningStop(r)},this.setKeyPressed=function(r){i.pressedKeys[r.key]=!0},this.setKeyUnPressed=function(r){i.pressedKeys[r.key]=!1},this.isPressingKeys=function(r){return r.length?!!r.find(function(o){return i.pressedKeys[o]}):!0},this.setTransformState=function(r,o,t){var a=i.props.onTransformed;if(!Number.isNaN(r)&&!Number.isNaN(o)&&!Number.isNaN(t)){r!==i.transformState.scale&&(i.transformState.previousScale=i.transformState.scale,i.transformState.scale=r),i.transformState.positionX=o,i.transformState.positionY=t,i.applyTransformation();var s=S(i);i.onChangeCallbacks.forEach(function(l){return l(s)}),y(s,{scale:r,positionX:o,positionY:t},a)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(i.wrapperComponent&&i.contentComponent){var r=He(i.transformState.scale,i.wrapperComponent,i.contentComponent);i.setTransformState(r.scale,r.positionX,r.positionY)}},this.handleTransformStyles=function(r,o,t){return i.props.customTransform?i.props.customTransform(r,o,t):dr(r,o,t)},this.applyTransformation=function(){if(!(!i.mounted||!i.contentComponent)){var r=i.transformState,o=r.scale,t=r.positionX,a=r.positionY,s=i.handleTransformStyles(t,a,o);i.contentComponent.style.transform=s}},this.getContext=function(){return S(i)},this.onChange=function(r){return i.onChangeCallbacks.has(r)||i.onChangeCallbacks.add(r),function(){i.onChangeCallbacks.delete(r)}},this.onInit=function(r){return i.onInitCallbacks.has(r)||i.onInitCallbacks.add(r),function(){i.onInitCallbacks.delete(r)}},this.init=function(r,o){i.cleanupWindowEvents(),i.wrapperComponent=r,i.contentComponent=o,B(i,i.transformState.scale),i.handleInitializeWrapperEvents(r),i.handleInitialize(o),i.initializeWindowEvents(),i.isInitialized=!0;var t=S(i);y(t,void 0,i.props.onInit)},this.props=n,this.setup=ze(this.props),this.transformState=We(this.props)}return e}(),me=D.createContext(null),Nr=function(e,n){return typeof e=="function"?e(n):e},jr=D.forwardRef(function(e,n){var i=b.useRef(new Mr(e)).current,r=Nr(e.children,ue(i));return b.useImperativeHandle(n,function(){return ue(i)},[i]),b.useEffect(function(){i.update(e)},[i,e]),D.createElement(me.Provider,{value:i},r)});D.forwardRef(function(e,n){var i=b.useRef(null),r=b.useContext(me);return b.useEffect(function(){return r.onChange(function(o){if(i.current){var t=0,a=0;i.current.style.transform=r.handleTransformStyles(t,a,1/o.instance.transformState.scale)}})},[r]),D.createElement("div",M({},e,{ref:fr([i,n])}))});function Dr(e,n){n===void 0&&(n={});var i=n.insertAt;if(!(!e||typeof document>"u")){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",i==="top"&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var Or=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,_e={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};Dr(Or);var Wr=function(e){var n=e.children,i=e.wrapperClass,r=i===void 0?"":i,o=e.contentClass,t=o===void 0?"":o,a=e.wrapperStyle,s=e.contentStyle,l=e.wrapperProps,d=l===void 0?{}:l,u=e.contentProps,v=u===void 0?{}:u,f=b.useContext(me).init,m=b.useRef(null),c=b.useRef(null);return b.useEffect(function(){var g=m.current,w=c.current;g!==null&&w!==null&&f&&f(g,w)},[]),D.createElement("div",M({},d,{ref:m,className:"react-transform-wrapper ".concat(_e.wrapper," ").concat(r),style:a}),D.createElement("div",M({},v,{ref:c,className:"react-transform-component ".concat(_e.content," ").concat(t),style:s}),n))};function K({tile:e}){var a;const n=E(s=>s.data),i=b.useMemo(()=>new Intl.NumberFormat("en",{signDisplay:"exceptZero"}),[]),r=(a=n.match)==null?void 0:a.players.filter(s=>{var l;return s.id===((l=e.unit)==null?void 0:l.owner)})[0],o=e.unit&&!!A.units[e.unit.id].getActableTiles(n,e).length,t=b.useMemo(()=>o?void 0:"brightness(50%)",[o]);return e.unit?p.jsxs(p.Fragment,{children:[p.jsx("img",{src:x.units[e.unit.id],width:128,style:{position:"absolute",transform:"translate(0px, 0px) scale(0.5)",zIndex:2,filter:t}}),p.jsx("div",{style:{position:"absolute",width:128,zIndex:3,textShadow:"-1px -1px 0 #000, 1px -1px 0 #000, -1px 1px 0 #000, 1px 1px 0 #000"},children:p.jsx(ni,{align:"center",weight:800,size:32,color:r==null?void 0:r.color,children:i.format(A.units[e.unit.id].getBonus(n,e))})})]}):null}function Br({tile:e}){var c,g,w,C;const n=E(h=>h.data),i=n.animations[0],r=(c=n.match)==null?void 0:c.players.filter(h=>h.id===e.owner)[0],o=n.match&&A.util.getAdjacent4Tiles(n.match,e.pos),t=b.useMemo(()=>{var X,T,k,z;const h=n.match.players.filter(j=>j.id===e.owner)[0];if(!h)return{};const P=`5px dashed ${h.color}`;return{borderTop:((X=o.n)==null?void 0:X.owner)!==h.id?P:void 0,borderRight:((T=o.e)==null?void 0:T.owner)!==h.id?P:void 0,borderBottom:((k=o.s)==null?void 0:k.owner)!==h.id?P:void 0,borderLeft:((z=o.w)==null?void 0:z.owner)!==h.id?P:void 0}},[o,e.owner]),{hovered:a,ref:s}=bi();b.useEffect(()=>{a&&E.setState(h=>{h.data.hoveredTile=e.pos})},[a]);const l=()=>{E.setState(h=>{h.data.match&&A.events.selectTile.act(h.data,{player:h.data.match.turn.player,pos:e.pos})})},{onClick:d,onMouseDown:u,onMouseMove:v,onTouchStart:f,onTouchMove:m}=oi(l);return p.jsxs("div",{onClick:d,onMouseDown:u,onMouseMove:v,onTouchStart:f,onTouchMove:m,ref:s,style:{position:"absolute",left:e.pos.x*128,top:e.pos.y*128,width:128,height:128,backgroundColor:A.util.comparePos(e.pos,n.hoveredTile)?"rgba(255,255,255,0.5)":void 0,borderRadius:6},children:[p.jsx("div",{style:{position:"absolute",top:0,left:0,width:128,height:128,...t}}),p.jsx("img",{src:x.tileTypes[e.type],width:128,height:128,style:{position:"absolute",transform:"translate(0px, 0px)",zIndex:0}}),p.jsx("img",{src:e.landmark&&x.landmarks[e.landmark.id],width:128,style:{position:"absolute",transform:"translate(0px, 0px)",zIndex:1}}),!A.util.isUnitAnimating(n,e)&&p.jsx(K,{tile:e}),n.match.running&&r&&((w=(g=A.landmarks[r.banner]).canCreate)==null?void 0:w.call(g,n,e))&&p.jsx("img",{src:x.landmarks[r.banner],width:128,style:{position:"absolute",transform:"translate(0px, 0px)",zIndex:1,filter:"brightness(0.5)"}}),!i&&!!((C=n==null?void 0:n.highlightedTiles)!=null&&C.filter(h=>A.util.comparePos(h,e.pos)).length)&&p.jsx("div",{style:{position:"absolute",transform:"translate(0px, 0px)",zIndex:3,width:128,height:128,backgroundColor:"rgba(0, 0, 0, 0.375)"}})]})}function Lr(){const e=se(s=>s.modals.gameMenu),n=()=>{se.setState(s=>{s.modals.gameMenu.opened=!1})},i=ke(),r=()=>{n()},o=()=>{n()},t=()=>{n()},a=()=>{i("/battle"),n()};return p.jsx(ti,{opened:e.opened,onClose:n,title:"Menu",centered:!0,size:240,children:p.jsxs(H,{direction:"column",gap:"md",children:[p.jsx($,{onClick:r,children:"Continue"}),p.jsx($,{variant:"default",onClick:o,children:"Game Settings"}),p.jsx($,{variant:"default",onClick:t,children:"Lobby Settings"}),p.jsx($,{color:"red",onClick:a,children:"Quit"})]})})}function Zr(){const e=E(r=>r.data);function n(r){E.setState(o=>{A.events.removeAnimation.act(o.data,{animationId:r})})}return b.useMemo(()=>{var t,a;const r=[];let o=!1;for(let s=0;s<e.animations.length;++s){const l=e.animations[s];if(!l)continue;if(l.async)o=!0;else if(o&&!l.async)break;const d=`${l==null?void 0:l.type}${l==null?void 0:l.from.pos.x}:${l==null?void 0:l.from.pos.y}${(t=l==null?void 0:l.to)==null?void 0:t.pos.x}:${(a=l==null?void 0:l.to)==null?void 0:a.pos.y}`;switch(l==null?void 0:l.type){case"move":r.push(p.jsx(Hr,{animation:l,end:n},d));break;case"spawn":r.push(p.jsx(xr,{animation:l,end:n},d));break;case"death":r.push(p.jsx(Kr,{animation:l,end:n},d));break}if(!l.async)break}return p.jsx(p.Fragment,{children:r})},[e.animations])}function Hr({animation:e,end:n}){const i=b.useMemo(()=>{if(!e.to)return;const o=fe({"0%":{transform:`translate(${e.from.pos.x*128}px, ${e.from.pos.y*128}px)`},"100%":{transform:`translate(${e.to.pos.x*128}px, ${e.to.pos.y*128}px)`}});return G(t=>({container:{animation:`${o} 0.25s 1 forwards`}}))},[]);if(!i||!e.to)return null;const{classes:r}=i();return p.jsx(p.Fragment,{children:p.jsx("div",{className:r.container,style:{position:"absolute",zIndex:3},onAnimationEnd:()=>n(e.id),children:p.jsx(K,{tile:e.to})})})}function xr({animation:e,end:n}){const i=b.useMemo(()=>{const o=fe({"0%":{transform:"scale(0)"},"75%":{transform:"scale(1.25)"},"100%":{transform:"scale(1)"}});return G(t=>({container:{animation:`${o} 0.5s 1 forwards`}}))},[]);if(!i)return null;const{classes:r}=i();return p.jsx(p.Fragment,{children:p.jsx("div",{className:r.container,style:{position:"absolute",left:e.from.pos.x*128,top:e.from.pos.y*128,zIndex:3,transformOrigin:"64px 64px"},onAnimationEnd:()=>n(e.id),children:p.jsx(K,{tile:e.from})})})}function Kr({animation:e,end:n}){const i=b.useMemo(()=>{const o=fe({"0%":{transform:"scale(1)"},"25%":{transform:"scale(1.25)"},"100%":{transform:"scale(0)"}});return G(t=>({container:{animation:`${o} 0.5s 1 forwards`}}))},[]);if(!i||!e.to)return null;const{classes:r}=i();return p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{position:"absolute",left:e.from.pos.x*128,top:e.from.pos.y*128,zIndex:3,transformOrigin:"64px 64px"},children:p.jsx(K,{tile:e.from})}),p.jsx("div",{className:r.container,style:{position:"absolute",left:e.to.pos.x*128,top:e.to.pos.y*128,zIndex:3,transformOrigin:"64px 64px"},onAnimationEnd:()=>n(e.id),children:p.jsx(K,{tile:e.to})})]})}const Rr=G(e=>({header:{position:"absolute",top:0,left:0,right:0,height:"64px",padding:`0 ${e.spacing.md}`,zIndex:1,pointerEvents:"none",backgroundImage:"linear-gradient(0deg, rgba(0, 0, 0, 0),  rgba(0, 0, 0, 0.75))"},footer:{position:"absolute",bottom:0,left:0,right:0,height:"64px",padding:`0 ${e.spacing.md}`,zIndex:1,pointerEvents:"none",backgroundImage:"linear-gradient(0deg, rgba(0, 0, 0, 0.75), rgba(0, 0, 0, 0))"},button:{pointerEvents:"all"}}));function Ur(){const e=ke(),{classes:n}=Rr(),[i,r]=b.useState({x:innerWidth,y:innerHeight}),o=E(f=>f.preview),t=E(f=>f.data.match),a=t.players.filter(f=>f.id===t.turn.player)[0],s=()=>{E.setState(f=>{f.preview=!1}),e("/home")},l=()=>{se.setState(f=>{f.modals.gameMenu.opened=!0})},d=()=>{},u=()=>{E.setState(f=>{A.events.nextTurn.act(f.data,{})})},v=()=>{E.setState(f=>{f.lobby.seed=Date.now(),A.events.createMatch.act(f.data,{modeProps:f.lobby})})};return b.useEffect(()=>{const f=()=>{r({x:innerWidth,y:innerHeight})};return window.addEventListener("resize",f),()=>window.removeEventListener("resize",f)},[]),Si([["1",o?s:l],["2",d],["3",o?v:u]]),p.jsxs(p.Fragment,{children:[p.jsx(Lr,{}),p.jsxs(H,{className:n.header,align:"center",justify:"center",gap:"md",children:[p.jsx(ai,{src:a&&x.avatars[a.avatar]}),p.jsxs(H,{direction:"column",align:"center",children:[p.jsx(Q,{order:5,children:"Banners"}),p.jsx(Q,{order:5,children:(a==null?void 0:a.banners)??0})]}),p.jsxs(H,{direction:"column",align:"center",children:[p.jsx(Q,{order:5,children:"Turn"}),p.jsx(Q,{order:5,children:t.turn.count})]})]}),p.jsxs(H,{className:n.footer,align:"center",justify:"center",gap:"xs",children:[p.jsx(oe,{className:n.button,variant:"default",size:40,onClick:o?s:l,radius:"xl",children:o?p.jsx(wi,{}):p.jsx(Pi,{})}),p.jsx(oe,{className:n.button,variant:"default",size:40,onClick:d,radius:"xl",children:p.jsx(Ci,{})}),p.jsx(oe,{className:n.button,variant:"default",size:40,onClick:o?v:u,radius:"xl",children:o?p.jsx(Ti,{}):p.jsx(yi,{})})]}),p.jsx(jr,{initialPositionX:0,initialPositionY:0,initialScale:1,maxScale:1,minScale:.25,limitToBounds:!1,doubleClick:{disabled:!0},panning:{velocityDisabled:!0},children:p.jsxs(Wr,{wrapperStyle:{width:`${i.x}px`,height:`${i.y}px`},children:[p.jsx("div",{children:t.tiles.map(f=>p.jsx(Br,{tile:f},`${f.pos.x}:${f.pos.y}`))}),p.jsx(Zr,{})]})})]})}export{Ur as default};
